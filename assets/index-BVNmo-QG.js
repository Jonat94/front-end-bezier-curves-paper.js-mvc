(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const Y of document.querySelectorAll('link[rel="modulepreload"]'))R(Y);new MutationObserver(Y=>{for(const T of Y)if(T.type==="childList")for(const ot of T.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&R(ot)}).observe(document,{childList:!0,subtree:!0});function A(Y){const T={};return Y.integrity&&(T.integrity=Y.integrity),Y.referrerPolicy&&(T.referrerPolicy=Y.referrerPolicy),Y.crossOrigin==="use-credentials"?T.credentials="include":Y.crossOrigin==="anonymous"?T.credentials="omit":T.credentials="same-origin",T}function R(Y){if(Y.ep)return;Y.ep=!0;const T=A(Y);fetch(Y.href,T)}})();const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Pn=__DEFINES__;Object.keys(Pn).forEach(K=>{const s=K.split(".");let A=xr;for(let R=0;R<s.length;R++){const Y=s[R];R===s.length-1?A[Y]=Pn[K]:A=A[Y]||(A[Y]={})}});function fi(K){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},fi(K)}function Ir(K,s){if(fi(K)!="object"||!K)return K;var A=K[Symbol.toPrimitive];if(A!==void 0){var R=A.call(K,s);if(fi(R)!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(K)}function Sr(K){var s=Ir(K,"string");return fi(s)=="symbol"?s:s+""}function Ie(K,s,A){return(s=Sr(s))in K?Object.defineProperty(K,s,{value:A,enumerable:!0,configurable:!0,writable:!0}):K[s]=A,K}var Tr=class{constructor(K,s,A){this.logger=K,this.transport=s,this.importUpdatedModule=A,Ie(this,"hotModulesMap",new Map),Ie(this,"disposeMap",new Map),Ie(this,"pruneMap",new Map),Ie(this,"dataMap",new Map),Ie(this,"customListenersMap",new Map),Ie(this,"ctxToListenersMap",new Map),Ie(this,"currentFirstInvalidatedBy",void 0),Ie(this,"updateQueue",[]),Ie(this,"pendingUpdateQueue",!1)}async notifyListeners(K,s){const A=this.customListenersMap.get(K);A&&await Promise.allSettled(A.map(R=>R(s)))}send(K){this.transport.send(K).catch(s=>{this.logger.error(s)})}clear(){this.hotModulesMap.clear(),this.disposeMap.clear(),this.pruneMap.clear(),this.dataMap.clear(),this.customListenersMap.clear(),this.ctxToListenersMap.clear()}async prunePaths(K){await Promise.all(K.map(s=>{const A=this.disposeMap.get(s);if(A)return A(this.dataMap.get(s))})),await Promise.all(K.map(s=>{const A=this.pruneMap.get(s);if(A)return A(this.dataMap.get(s))}))}warnFailedUpdate(K,s){(!(K instanceof Error)||!K.message.includes("fetch"))&&this.logger.error(K),this.logger.error(`Failed to reload ${s}. This could be due to syntax errors or importing non-existent modules. (see errors above)`)}async queueUpdate(K){if(this.updateQueue.push(this.fetchUpdate(K)),!this.pendingUpdateQueue){this.pendingUpdateQueue=!0,await Promise.resolve(),this.pendingUpdateQueue=!1;const s=[...this.updateQueue];this.updateQueue=[],(await Promise.all(s)).forEach(A=>A&&A())}}async fetchUpdate(K){const{path:s,acceptedPath:A,firstInvalidatedBy:R}=K,Y=this.hotModulesMap.get(s);if(!Y)return;let T;const ot=s===A,j=Y.callbacks.filter(({deps:dt})=>dt.includes(A));if(ot||j.length>0){const dt=this.disposeMap.get(A);dt&&await dt(this.dataMap.get(A));try{T=await this.importUpdatedModule(K)}catch(Ft){this.warnFailedUpdate(Ft,A)}}return()=>{try{this.currentFirstInvalidatedBy=R;for(const{deps:Ft,fn:Ut}of j)Ut(Ft.map(Et=>Et===A?T:void 0));const dt=ot?s:`${A} via ${s}`;this.logger.debug(`hot updated: ${dt}`)}finally{this.currentFirstInvalidatedBy=void 0}}}};let Or="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lr=(K=21)=>{let s="",A=K|0;for(;A--;)s+=Or[Math.random()*64|0];return s};typeof process<"u"&&process.platform;function Er(){let K,s;return{promise:new Promise((A,R)=>{K=A,s=R}),resolve:K,reject:s}}function wn(K){const s=new Error(K.message||"Unknown invoke error");return Object.assign(s,K,{runnerError:new Error("RunnerError")}),s}const Ar=K=>{if(K.invoke)return{...K,async invoke(A,R){const Y=await K.invoke({type:"custom",event:"vite:invoke",data:{id:"send",name:A,data:R}});if("error"in Y)throw wn(Y.error);return Y.result}};if(!K.send||!K.connect)throw new Error("transport must implement send and connect when invoke is not implemented");const s=new Map;return{...K,connect({onMessage:A,onDisconnection:R}){return K.connect({onMessage(Y){if(Y.type==="custom"&&Y.event==="vite:invoke"){const T=Y.data;if(T.id.startsWith("response:")){const ot=T.id.slice(9),j=s.get(ot);if(!j)return;j.timeoutId&&clearTimeout(j.timeoutId),s.delete(ot);const{error:dt,result:Ft}=T.data;dt?j.reject(dt):j.resolve(Ft);return}}A(Y)},onDisconnection:R})},disconnect(){return s.forEach(A=>{A.reject(new Error(`transport was disconnected, cannot call ${JSON.stringify(A.name)}`))}),s.clear(),K.disconnect?.()},send(A){return K.send(A)},async invoke(A,R){const Y=Lr(),T={type:"custom",event:"vite:invoke",data:{name:A,id:`send:${Y}`,data:R}},ot=K.send(T),{promise:j,resolve:dt,reject:Ft}=Er(),Ut=K.timeout??6e4;let Et;Ut>0&&(Et=setTimeout(()=>{s.delete(Y),Ft(new Error(`transport invoke timed out after ${Ut}ms (data: ${JSON.stringify(T)})`))},Ut),Et?.unref?.()),s.set(Y,{resolve:dt,reject:Ft,name:A,timeoutId:Et}),ot&&ot.catch(ge=>{clearTimeout(Et),s.delete(Y),Ft(ge)});try{return await j}catch(ge){throw wn(ge)}}}},Mr=K=>{const s=Ar(K);let A=!s.connect,R;return{...K,...s.connect?{async connect(Y){if(A)return;if(R){await R;return}const T=s.connect({onMessage:Y??(()=>{}),onDisconnection(){A=!1}});T&&(R=T,await R,R=void 0),A=!0}}:{},...s.disconnect?{async disconnect(){A&&(R&&await R,A=!1,await s.disconnect())}}:{},async send(Y){if(s.send){if(!A)if(R)await R;else throw new Error("send was called before connect");await s.send(Y)}},async invoke(Y,T){if(!A)if(R)await R;else throw new Error("invoke was called before connect");return s.invoke(Y,T)}}},Cn=K=>{const s=K.pingInterval??3e4;let A,R;return{async connect({onMessage:Y,onDisconnection:T}){const ot=K.createConnection();ot.addEventListener("message",async({data:dt})=>{Y(JSON.parse(dt))});let j=ot.readyState===ot.OPEN;j||await new Promise((dt,Ft)=>{ot.addEventListener("open",()=>{j=!0,dt()},{once:!0}),ot.addEventListener("close",async()=>{if(!j){Ft(new Error("WebSocket closed without opened."));return}Y({type:"custom",event:"vite:ws:disconnect",data:{webSocket:ot}}),T()})}),Y({type:"custom",event:"vite:ws:connect",data:{webSocket:ot}}),A=ot,R=setInterval(()=>{ot.readyState===ot.OPEN&&ot.send(JSON.stringify({type:"ping"}))},s)},disconnect(){clearInterval(R),A?.close()},send(Y){A.send(JSON.stringify(Y))}}};function Nr(K){const s=new Br;return A=>s.enqueue(()=>K(A))}var Br=class{constructor(){Ie(this,"queue",[]),Ie(this,"pending",!1)}enqueue(K){return new Promise((s,A)=>{this.queue.push({promise:K,resolve:s,reject:A}),this.dequeue()})}dequeue(){if(this.pending)return!1;const K=this.queue.shift();return K?(this.pending=!0,K.promise().then(K.resolve).catch(K.reject).finally(()=>{this.pending=!1,this.dequeue()}),!0):!1}};const kr=__HMR_CONFIG_NAME__,Dr=__BASE__||"/",Xr="document"in globalThis?document.querySelector("meta[property=csp-nonce]")?.nonce:void 0;function ve(K,s={},...A){const R=document.createElement(K);for(const[Y,T]of Object.entries(s))T!==void 0&&R.setAttribute(Y,T);return R.append(...A),R}const Yr=`
:host {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 99999;
  --monospace: 'SFMono-Regular', Consolas,
  'Liberation Mono', Menlo, Courier, monospace;
  --red: #ff5555;
  --yellow: #e2aa53;
  --purple: #cfa4ff;
  --cyan: #2dd9da;
  --dim: #c9c9c9;

  --window-background: #181818;
  --window-color: #d8d8d8;
}

.backdrop {
  position: fixed;
  z-index: 99999;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow-y: scroll;
  margin: 0;
  background: rgba(0, 0, 0, 0.66);
}

.window {
  font-family: var(--monospace);
  line-height: 1.5;
  max-width: 80vw;
  color: var(--window-color);
  box-sizing: border-box;
  margin: 30px auto;
  padding: 2.5vh 4vw;
  position: relative;
  background: var(--window-background);
  border-radius: 6px 6px 8px 8px;
  box-shadow: 0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22);
  overflow: hidden;
  border-top: 8px solid var(--red);
  direction: ltr;
  text-align: left;
}

pre {
  font-family: var(--monospace);
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 1em;
  overflow-x: scroll;
  scrollbar-width: none;
}

pre::-webkit-scrollbar {
  display: none;
}

pre.frame::-webkit-scrollbar {
  display: block;
  height: 5px;
}

pre.frame::-webkit-scrollbar-thumb {
  background: #999;
  border-radius: 5px;
}

pre.frame {
  scrollbar-width: thin;
}

.message {
  line-height: 1.3;
  font-weight: 600;
  white-space: pre-wrap;
}

.message-body {
  color: var(--red);
}

.plugin {
  color: var(--purple);
}

.file {
  color: var(--cyan);
  margin-bottom: 0;
  white-space: pre-wrap;
  word-break: break-all;
}

.frame {
  color: var(--yellow);
}

.stack {
  font-size: 13px;
  color: var(--dim);
}

.tip {
  font-size: 13px;
  color: #999;
  border-top: 1px dotted #999;
  padding-top: 13px;
  line-height: 1.8;
}

code {
  font-size: 13px;
  font-family: var(--monospace);
  color: var(--yellow);
}

.file-link {
  text-decoration: underline;
  cursor: pointer;
}

kbd {
  line-height: 1.5;
  font-family: ui-monospace, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 0.75rem;
  font-weight: 700;
  background-color: rgb(38, 40, 44);
  color: rgb(166, 167, 171);
  padding: 0.15rem 0.3rem;
  border-radius: 0.25rem;
  border-width: 0.0625rem 0.0625rem 0.1875rem;
  border-style: solid;
  border-color: rgb(54, 57, 64);
  border-image: initial;
}
`,Fr=()=>ve("div",{class:"backdrop",part:"backdrop"},ve("div",{class:"window",part:"window"},ve("pre",{class:"message",part:"message"},ve("span",{class:"plugin",part:"plugin"}),ve("span",{class:"message-body",part:"message-body"})),ve("pre",{class:"file",part:"file"}),ve("pre",{class:"frame",part:"frame"}),ve("pre",{class:"stack",part:"stack"}),ve("div",{class:"tip",part:"tip"},"Click outside, press ",ve("kbd",{},"Esc")," key, or fix the code to dismiss.",ve("br"),"You can also disable this overlay by setting ",ve("code",{part:"config-option-name"},"server.hmr.overlay")," to ",ve("code",{part:"config-option-value"},"false")," in ",ve("code",{part:"config-file-name"},kr),".")),ve("style",{nonce:Xr},Yr)),bn=/(?:file:\/\/)?(?:[a-zA-Z]:\\|\/).*?:\d+:\d+/g,Ji=/^(?:>?\s*\d+\s+\|.*|\s+\|\s*\^.*)\r?\n/gm,{HTMLElement:Rr=class{}}=globalThis;var zr=class extends Rr{constructor(K,s=!0){super(),Ie(this,"root",void 0),Ie(this,"closeOnEsc",void 0),this.root=this.attachShadow({mode:"open"}),this.root.appendChild(Fr()),Ji.lastIndex=0;const A=K.frame&&Ji.test(K.frame),R=A?K.message.replace(Ji,""):K.message;K.plugin&&this.text(".plugin",`[plugin:${K.plugin}] `),this.text(".message-body",R.trim());const[Y]=(K.loc?.file||K.id||"unknown file").split("?");K.loc?this.text(".file",`${Y}:${K.loc.line}:${K.loc.column}`,s):K.id&&this.text(".file",Y),A&&this.text(".frame",K.frame.trim()),this.text(".stack",K.stack,s),this.root.querySelector(".window").addEventListener("click",T=>{T.stopPropagation()}),this.addEventListener("click",()=>{this.close()}),this.closeOnEsc=T=>{(T.key==="Escape"||T.code==="Escape")&&this.close()},document.addEventListener("keydown",this.closeOnEsc)}text(K,s,A=!1){const R=this.root.querySelector(K);if(!A)R.textContent=s;else{let Y=0,T;for(bn.lastIndex=0;T=bn.exec(s);){const{0:ot,index:j}=T,dt=s.slice(Y,j);R.appendChild(document.createTextNode(dt));const Ft=document.createElement("a");Ft.textContent=ot,Ft.className="file-link",Ft.onclick=()=>{fetch(new URL(`${Dr}__open-in-editor?file=${encodeURIComponent(ot)}`,import.meta.url))},R.appendChild(Ft),Y+=dt.length+ot.length}Y<s.length&&R.appendChild(document.createTextNode(s.slice(Y)))}}close(){this.parentNode?.removeChild(this),document.removeEventListener("keydown",this.closeOnEsc)}};const ci="vite-error-overlay",{customElements:Gi}=globalThis;Gi&&!Gi.get(ci)&&Gi.define(ci,zr);console.debug("[vite] connecting...");const Ki=new URL(import.meta.url),qr=__SERVER_HOST__,xn=__HMR_PROTOCOL__||(Ki.protocol==="https:"?"wss":"ws"),Dn=__HMR_PORT__,In=`${__HMR_HOSTNAME__||Ki.hostname}:${Dn||Ki.port}${__HMR_BASE__}`,Sn=__HMR_DIRECT_TARGET__,Qi=__BASE__||"/",Tn=__HMR_TIMEOUT__,On=__WS_TOKEN__,Xn=Mr((()=>{let K=Cn({createConnection:()=>new WebSocket(`${xn}://${In}?token=${On}`,"vite-hmr"),pingInterval:Tn});return{async connect(s){try{await K.connect(s)}catch(A){if(!Dn){K=Cn({createConnection:()=>new WebSocket(`${xn}://${Sn}?token=${On}`,"vite-hmr"),pingInterval:Tn});try{await K.connect(s),console.info("[vite] Direct websocket connection fallback. Check out https://vite.dev/config/server-options.html#server-hmr to remove the previous connection error.")}catch(R){if(R instanceof Error&&R.message.includes("WebSocket closed without opened.")){const Y=new URL(import.meta.url),T=Y.host+Y.pathname.replace(/@vite\/client$/,"");console.error(`[vite] failed to connect to websocket.
your current setup:
  (browser) ${T} <--[HTTP]--> ${qr} (server)
  (browser) ${In} <--[WebSocket (failing)]--> ${Sn} (server)
Check out your Vite / network configuration and https://vite.dev/config/server-options.html#server-hmr .`)}}return}throw console.error(`[vite] failed to connect to websocket (${A}). `),A}},async disconnect(){await K.disconnect()},send(s){K.send(s)}}})());let Yn=!1;typeof window<"u"&&window.addEventListener?.("beforeunload",()=>{Yn=!0});function Ln(K){const s=new URL(K,"http://vite.dev");return s.searchParams.delete("direct"),s.pathname+s.search}let En=!0;const An=new WeakSet,Vr=K=>{let s;return()=>{s&&(clearTimeout(s),s=null),s=setTimeout(()=>{location.reload()},K)}},$i=Vr(20),qe=new Tr({error:K=>console.error("[vite]",K),debug:(...K)=>console.debug("[vite]",...K)},Xn,async function({acceptedPath:s,timestamp:A,explicitImportRequired:R,isWithinCircularImport:Y}){const[T,ot]=s.split("?"),j=import(Qi+T.slice(1)+`?${R?"import&":""}t=${A}${ot?`&${ot}`:""}`);return Y&&j.catch(()=>{console.info(`[hmr] ${s} failed to apply HMR as it's within a circular import. Reloading page to reset the execution order. To debug and break the circular import, you can run \`vite --debug hmr\` to log the circular dependency path if a file change triggered it.`),$i()}),await j});Xn.connect(Nr(Wr));async function Wr(K){switch(K.type){case"connected":console.debug("[vite] connected.");break;case"update":if(await qe.notifyListeners("vite:beforeUpdate",K),Ii)if(En&&Ur()){location.reload();return}else Mn&&Fn(),En=!1;await Promise.all(K.updates.map(async s=>{if(s.type==="js-update")return qe.queueUpdate(s);const{path:A,timestamp:R}=s,Y=Ln(A),T=Array.from(document.querySelectorAll("link")).find(j=>!An.has(j)&&Ln(j.href).includes(Y));if(!T)return;const ot=`${Qi}${Y.slice(1)}${Y.includes("?")?"&":"?"}t=${R}`;return new Promise(j=>{const dt=T.cloneNode();dt.href=new URL(ot,T.href).href;const Ft=()=>{T.remove(),console.debug(`[vite] css hot updated: ${Y}`),j()};dt.addEventListener("load",Ft),dt.addEventListener("error",Ft),An.add(T),T.after(dt)})})),await qe.notifyListeners("vite:afterUpdate",K);break;case"custom":if(await qe.notifyListeners(K.event,K.data),K.event==="vite:ws:disconnect"&&Ii&&!Yn){console.log("[vite] server connection lost. Polling for restart...");const s=K.data.webSocket,A=new URL(s.url);A.search="",await Zr(A.href),location.reload()}break;case"full-reload":if(await qe.notifyListeners("vite:beforeFullReload",K),Ii)if(K.path&&K.path.endsWith(".html")){const s=decodeURI(location.pathname),A=Qi+K.path.slice(1);(s===A||K.path==="/index.html"||s.endsWith("/")&&s+"index.html"===A)&&$i();return}else $i();break;case"prune":await qe.notifyListeners("vite:beforePrune",K),await qe.prunePaths(K.paths);break;case"error":if(await qe.notifyListeners("vite:error",K),Ii){const s=K.err;Mn?Hr(s):console.error(`[vite] Internal Server Error
${s.message}
${s.stack}`)}break;case"ping":break;default:return K}}const Mn=__HMR_ENABLE_OVERLAY__,Ii="document"in globalThis;function Hr(K){Fn();const{customElements:s}=globalThis;if(s){const A=s.get(ci);document.body.appendChild(new A(K))}}function Fn(){document.querySelectorAll(ci).forEach(K=>K.close())}function Ur(){return document.querySelectorAll(ci).length}function Zr(K){if(typeof SharedWorker>"u"){const Y={currentState:document.visibilityState,listeners:new Set},T=()=>{Y.currentState=document.visibilityState;for(const ot of Y.listeners)ot(Y.currentState)};return document.addEventListener("visibilitychange",T),tn(K,Y)}const s=new Blob(['"use strict";',`const waitForSuccessfulPingInternal = ${tn.toString()};`,`const fn = ${Jr.toString()};`,`fn(${JSON.stringify(K)})`],{type:"application/javascript"}),A=URL.createObjectURL(s),R=new SharedWorker(A);return new Promise((Y,T)=>{const ot=()=>{R.port.postMessage({visibility:document.visibilityState})};document.addEventListener("visibilitychange",ot),R.port.addEventListener("message",j=>{document.removeEventListener("visibilitychange",ot),R.port.close();const dt=j.data;if(dt.type==="error"){T(dt.error);return}Y()}),ot(),R.port.start()})}function Jr(K){self.addEventListener("connect",s=>{const A=s.ports[0];if(!K){A.postMessage({type:"error",error:new Error("socketUrl not found")});return}const R={currentState:"visible",listeners:new Set};A.addEventListener("message",Y=>{const{visibility:T}=Y.data;R.currentState=T,console.debug("[vite] new window visibility",T);for(const ot of R.listeners)ot(T)}),A.start(),console.debug("[vite] connected from window"),tn(K,R).then(()=>{console.debug("[vite] ping successful");try{A.postMessage({type:"success"})}catch(Y){A.postMessage({type:"error",error:Y})}},Y=>{console.debug("[vite] error happened",Y);try{A.postMessage({type:"error",error:Y})}catch(T){A.postMessage({type:"error",error:T})}})})}async function tn(K,s,A=1e3){function R(ot){return new Promise(j=>setTimeout(j,ot))}async function Y(){try{const ot=new WebSocket(K,"vite-ping");return new Promise(j=>{function dt(){j(!0),Ut()}function Ft(){j(!1),Ut()}function Ut(){ot.removeEventListener("open",dt),ot.removeEventListener("error",Ft),ot.close()}ot.addEventListener("open",dt),ot.addEventListener("error",Ft)})}catch{return!1}}function T(ot){return new Promise(j=>{const dt=Ft=>{Ft==="visible"&&(j(),ot.listeners.delete(dt))};ot.listeners.add(dt)})}if(!await Y())for(await R(A);;)if(s.currentState==="visible"){if(await Y())break;await R(A)}else await T(s)}const Gr=new Map;"document"in globalThis&&document.querySelectorAll("style[data-vite-dev-id]").forEach(K=>{Gr.set(K.getAttribute("data-vite-dev-id"),K)});function Rn(K){return K&&K.__esModule&&Object.prototype.hasOwnProperty.call(K,"default")?K.default:K}function jr(K){if(Object.prototype.hasOwnProperty.call(K,"__esModule"))return K;var s=K.default;if(typeof s=="function"){var A=function R(){var Y=!1;try{Y=this instanceof R}catch{}return Y?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};A.prototype=s.prototype}else A={};return Object.defineProperty(A,"__esModule",{value:!0}),Object.keys(K).forEach(function(R){var Y=Object.getOwnPropertyDescriptor(K,R);Object.defineProperty(A,R,Y.get?Y:{enumerable:!0,get:function(){return K[R]}})}),A}function Kr(K){throw new Error('Could not dynamically require "'+K+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ti={exports:{}};const Qr={},$r=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"})),Nn=jr($r);/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jürg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jürg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */var ts=Ti.exports,Bn;function es(){return Bn||(Bn=1,(function(K){(function(s,A){s=s||Nn;var R=s.window,Y=s.document,T=new function(){var t=/^(statics|enumerable|beans|preserve)$/,i=[],n=i.slice,a=Object.create,u=Object.getOwnPropertyDescriptor,l=Object.defineProperty,c=i.forEach||function(m,g){for(var O=0,C=this.length;O<C;O++)m.call(g,this[O],O,this)},f=function(m,g){for(var O in this)this.hasOwnProperty(O)&&m.call(g,this[O],O,this)},d=Object.assign||function(m){for(var g=1,O=arguments.length;g<O;g++){var C=arguments[g];for(var L in C)C.hasOwnProperty(L)&&(m[L]=C[L])}return m},p=function(m,g,O){if(m){var C=u(m,"length");(C&&typeof C.value=="number"?c:f).call(m,g,O=O||m)}return O};function y(m,g,O,C,L){var w={};function x(S,B){B=B||(B=u(g,S))&&(B.get?B:B.value),typeof B=="string"&&B[0]==="#"&&(B=m[B.substring(1)]||B);var D=typeof B=="function",X=B,W=L||D&&!B.base?B&&B.get?S in m:m[S]:null,k;(!L||!W)&&(D&&W&&(B.base=W),D&&C!==!1&&(k=S.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(w[k[3].toLowerCase()+k[4]]=k[2]),(!X||D||!X.get||typeof X.get!="function"||!P.isPlainObject(X))&&(X={value:X,writable:!0}),(u(m,S)||{configurable:!0}).configurable&&(X.configurable=!0,X.enumerable=O??!k),l(m,S,X))}if(g){for(var v in g)g.hasOwnProperty(v)&&!t.test(v)&&x(v);for(var v in w){var b=w[v],E=m["set"+b],M=m["get"+b]||E&&m["is"+b];M&&(C===!0||M.length===0)&&x(v,{get:M,set:E})}}return m}function P(){for(var m=0,g=arguments.length;m<g;m++){var O=arguments[m];O&&d(this,O)}return this}return y(P,{inject:function(m){if(m){var g=m.statics===!0?m:m.statics,O=m.beans,C=m.preserve;g!==m&&y(this.prototype,m,m.enumerable,O,C),y(this,g,null,O,C)}for(var L=1,w=arguments.length;L<w;L++)this.inject(arguments[L]);return this},extend:function(){for(var m=this,g,O,C=0,L,w=arguments.length;C<w&&!(g&&O);C++)L=arguments[C],g=g||L.initialize,O=O||L.prototype;return g=g||function(){m.apply(this,arguments)},O=g.prototype=O||a(this.prototype),l(O,"constructor",{value:g,writable:!0,configurable:!0}),y(g,this),arguments.length&&this.inject.apply(g,arguments),g.base=m,g}}).inject({enumerable:!1,initialize:P,set:P,inject:function(){for(var m=0,g=arguments.length;m<g;m++){var O=arguments[m];O&&y(this,O,O.enumerable,O.beans,O.preserve)}return this},extend:function(){var m=a(this);return m.inject.apply(m,arguments)},each:function(m,g){return p(this,m,g)},clone:function(){return new this.constructor(this)},statics:{set:d,each:p,create:a,define:l,describe:u,clone:function(m){return d(new m.constructor,m)},isPlainObject:function(m){var g=m!=null&&m.constructor;return g&&(g===Object||g===P||g.name==="Object")},pick:function(m,g){return m!==A?m:g},slice:function(m,g,O){return n.call(m,g,O)}}})};K.exports=T,T.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+T.each(this,function(t,i){if(!/^_/.test(i)){var n=typeof t;this.push(i+": "+(n==="number"?Ut.instance.number(t):n==="string"?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return T.importJSON(t,this)},exportJSON:function(t){return T.exportJSON(this,t)},toJSON:function(){return T.serialize(this)},set:function(t,i){return t&&T.filter(this,t,i,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var i=t.base.apply(this,arguments),n=i.prototype._class;return n&&!T.exports[n]&&(T.exports[n]=i),i},equals:function(t,i){if(t===i)return!0;if(t&&t.equals)return t.equals(i);if(i&&i.equals)return i.equals(t);if(t&&i&&typeof t=="object"&&typeof i=="object"){if(Array.isArray(t)&&Array.isArray(i)){var n=t.length;if(n!==i.length)return!1;for(;n--;)if(!T.equals(t[n],i[n]))return!1}else{var a=Object.keys(t),n=a.length;if(n!==Object.keys(i).length)return!1;for(;n--;){var u=a[n];if(!(i.hasOwnProperty(u)&&T.equals(t[u],i[u])))return!1}}return!0}return!1},read:function(t,i,n,a){if(this===T){var u=this.peek(t,i);return t.__index++,u}var l=this.prototype,c=l._readIndex,f=i||c&&t.__index||0,d=t.length,p=t[f];if(a=a||d-f,p instanceof this||n&&n.readNull&&p==null&&a<=1)return c&&(t.__index=f+1),p&&n&&n.clone?p.clone():p;if(p=T.create(l),c&&(p.__read=!0),p=p.initialize.apply(p,f>0||f+a<d?T.slice(t,f,f+a):t)||p,c){t.__index=f+p.__read;var y=p.__filtered;y&&(t.__filtered=y,p.__filtered=A),p.__read=A}return p},peek:function(t,i){return t[t.__index=i||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,i,n,a){for(var u=[],l,c=i||0,f=a?c+a:t.length,d=c;d<f;d++)u.push(Array.isArray(l=t[d])?this.read(l,0,n):this.read(t,d,n,1));return u},readNamed:function(t,i,n,a,u){var l=this.getNamed(t,i),c=l!==A;if(c){var f=t.__filtered;if(!f){var d=this.getSource(t);f=t.__filtered=T.create(d),f.__unfiltered=d}f[i]=A}return this.read(c?[l]:t,n,a,u)},readSupported:function(t,i){var n=this.getSource(t),a=this,u=!1;return n&&Object.keys(n).forEach(function(l){if(l in i){var c=a.readNamed(t,l);c!==A&&(i[l]=c),u=!0}}),u},getSource:function(t){var i=t.__source;if(i===A){var n=t.length===1&&t[0];i=t.__source=n&&T.isPlainObject(n)?n:null}return i},getNamed:function(t,i){var n=this.getSource(t);if(n)return i?n[i]:t.__filtered||n},hasNamed:function(t,i){return!!this.getNamed(t,i)},filter:function(t,i,n,a){var u;function l(y){if(!(n&&y in n)&&!(u&&y in u)){var P=i[y];P!==A&&(t[y]=P)}}if(a){for(var c={},f=0,d,p=a.length;f<p;f++)(d=a[f])in i&&(l(d),c[d]=!0);u=c}return Object.keys(i.__unfiltered||i).forEach(l),t},isPlainValue:function(t,i){return T.isPlainObject(t)||Array.isArray(t)||i&&typeof t=="string"},serialize:function(t,i,n,a){i=i||{};var u=!a,l;if(u&&(i.formatter=new Ut(i.precision),a={length:0,definitions:{},references:{},add:function(P,m){var g="#"+P._id,O=this.references[g];if(!O){this.length++;var C=m.call(P),L=P._class;L&&C[0]!==L&&C.unshift(L),this.definitions[g]=C,O=this.references[g]=[g]}return O}}),t&&t._serialize){l=t._serialize(i,a);var c=t._class;c&&!t._compactSerialize&&(u||!n)&&l[0]!==c&&l.unshift(c)}else if(Array.isArray(t)){l=[];for(var f=0,d=t.length;f<d;f++)l[f]=T.serialize(t[f],i,n,a)}else if(T.isPlainObject(t)){l={};for(var p=Object.keys(t),f=0,d=p.length;f<d;f++){var y=p[f];l[y]=T.serialize(t[y],i,n,a)}}else typeof t=="number"?l=i.formatter.number(t,i.precision):l=t;return u&&a.length>0?[["dictionary",a.definitions],l]:l},deserialize:function(t,i,n,a,u){var l=t,c=!n,f=c&&t&&t.length&&t[0][0]==="dictionary";if(n=n||{},Array.isArray(t)){var d=t[0],p=d==="dictionary";if(t.length==1&&/^#/.test(d))return n.dictionary[d];d=T.exports[d],l=[];for(var y=d?1:0,P=t.length;y<P;y++)l.push(T.deserialize(t[y],i,n,p,f));if(d){var m=l;i?l=i(d,m,c||u):l=new d(m)}}else if(T.isPlainObject(t)){l={},a&&(n.dictionary=l);for(var g in t)l[g]=T.deserialize(t[g],i,n)}return f?l[1]:l},exportJSON:function(t,i){var n=T.serialize(t,i);return i&&i.asString==!1?n:JSON.stringify(n)},importJSON:function(t,i){return T.deserialize(typeof t=="string"?JSON.parse(t):t,function(n,a,u){var l=u&&i&&i.constructor===n,c=l?i:T.create(n.prototype);if(a.length===1&&c instanceof Nt&&(l||!(c instanceof Ve))){var f=a[0];T.isPlainObject(f)&&(f.insert=!1,l&&(a=a.concat([Nt.INSERT])))}return(l?c.set:n).apply(c,a),l&&(i=null),c})},push:function(t,i){var n=i.length;if(n<4096)t.push.apply(t,i);else{var a=t.length;t.length+=n;for(var u=0;u<n;u++)t[a+u]=i[u]}return t},splice:function(t,i,n,a){var u=i&&i.length,l=n===A;n=l?t.length:n,n>t.length&&(n=t.length);for(var c=0;c<u;c++)i[c]._index=n+c;if(l)return T.push(t,i),[];var f=[n,a];i&&T.push(f,i);for(var d=t.splice.apply(t,f),c=0,p=d.length;c<p;c++)d[c]._index=A;for(var c=n+u,p=t.length;c<p;c++)t[c]._index=c;return d},capitalize:function(t){return t.replace(/\b[a-z]/g,function(i){return i.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(i,n){return n.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var ot={on:function(t,i){if(typeof t!="string")T.each(t,function(l,c){this.on(c,l)},this);else{var n=this._eventTypes,a=n&&n[t],u=this._callbacks=this._callbacks||{};u=u[t]=u[t]||[],u.indexOf(i)===-1&&(u.push(i),a&&a.install&&u.length===1&&a.install.call(this,t))}return this},off:function(t,i){if(typeof t!="string"){T.each(t,function(c,f){this.off(f,c)},this);return}var n=this._eventTypes,a=n&&n[t],u=this._callbacks&&this._callbacks[t],l;return u&&(!i||(l=u.indexOf(i))!==-1&&u.length===1?(a&&a.uninstall&&a.uninstall.call(this,t),delete this._callbacks[t]):l!==-1&&u.splice(l,1)),this},once:function(t,i){return this.on(t,function n(){i.apply(this,arguments),this.off(t,n)})},emit:function(t,i){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var a=T.slice(arguments,1),u=i&&i.target&&!i.currentTarget;n=n.slice(),u&&(i.currentTarget=this);for(var l=0,c=n.length;l<c;l++)if(n[l].apply(this,a)==!1){i&&i.stop&&i.stop();break}return u&&delete i.currentTarget,!0},responds:function(t){return!!(this._callbacks&&this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var i=this._eventTypes,n=this._callbacks,a=t?"install":"uninstall";if(i){for(var u in n)if(n[u].length>0){var l=i[u],c=l&&l[a];c&&c.call(this,u)}}},statics:{inject:function t(i){var n=i._events;if(n){var a={};T.each(n,function(u,l){var c=typeof u=="string",f=c?u:l,d=T.capitalize(f),p=f.substring(2).toLowerCase();a[p]=c?{}:u,f="_"+f,i["get"+d]=function(){return this[f]},i["set"+d]=function(y){var P=this[f];P&&this.off(p,P),y&&this.on(p,y),this[f]=y}}),i._eventTypes=a}return t.base.apply(this,arguments)}}},j=T.extend({_class:"PaperScope",initialize:function t(){Bt=this,this.settings=new T({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var i=t.prototype;if(!this.support){var n=te.getContext(1,1)||{};i.support={nativeDash:"setLineDash"in n||"mozDash"in n,nativeBlendModes:ri.nativeModes},te.release(n)}if(!this.agent){var a=s.navigator.userAgent.toLowerCase(),u=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],l=u==="darwin"?"mac":u,c=i.agent=i.browser={platform:l};l&&(c[l]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(f,d,p,y,P){if(!c.chrome){var m=d==="opera"?y:/^(node|trident)$/.test(d)?P:p;c.version=m,c.versionNumber=parseFloat(m),d={trident:"msie",jsdom:"node"}[d]||d,c.name=d,c[d]=!0}}),c.chrome&&delete c.webkit,c.atom&&delete c.chrome}},version:"0.12.18",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,i){var n=Bt.PaperScript.execute(t,this,i);return Zt.updateFocus(),n},install:function(t){var i=this;T.each(["project","view","tool"],function(a){T.define(t,a,{configurable:!0,get:function(){return i[a]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return Bt=this,this.project=new Ce(t),this},createCanvas:function(t,i){return te.getCanvas(t,i)},activate:function(){Bt=this},clear:function(){for(var t=this.projects,i=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(var n=i.length-1;n>=0;n--)i[n].remove()},remove:function(){this.clear(),delete j._scopes[this._id]},statics:new function(){function t(i){return i+="Attribute",function(n,a){return n[i](a)||n[i]("data-paper-"+a)}}return{_scopes:{},_id:0,get:function(i){return this._scopes[i]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),dt=T.extend(ot,{initialize:function(t){this._scope=Bt,this._index=this._scope[this._list].push(this)-1,(t||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(T.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),Ft={findItemBoundsCollisions:function(t,i,n){function a(c){for(var f=new Array(c.length),d=0;d<c.length;d++){var p=c[d].getBounds();f[d]=[p.left,p.top,p.right,p.bottom]}return f}var u=a(t),l=!i||i===t?u:a(i);return this.findBoundsCollisions(u,l,n||0)},findCurveBoundsCollisions:function(t,i,n,a){function u(m){for(var g=Math.min,O=Math.max,C=new Array(m.length),L=0;L<m.length;L++){var w=m[L];C[L]=[g(w[0],w[2],w[4],w[6]),g(w[1],w[3],w[5],w[7]),O(w[0],w[2],w[4],w[6]),O(w[1],w[3],w[5],w[7])]}return C}var l=u(t),c=!i||i===t?l:u(i);if(a){for(var f=this.findBoundsCollisions(l,c,n||0,!1,!0),d=this.findBoundsCollisions(l,c,n||0,!0,!0),p=[],y=0,P=f.length;y<P;y++)p[y]={hor:f[y],ver:d[y]};return p}return this.findBoundsCollisions(l,c,n||0)},findBoundsCollisions:function(t,i,n,a,u){var l=!i||t===i,c=l?t:t.concat(i),f=t.length,d=c.length;function p(ut,ht,pt){for(var et=0,nt=ut.length;et<nt;){var ft=nt+et>>>1;c[ut[ft]][ht]<pt?et=ft+1:nt=ft}return et-1}for(var y=a?1:0,P=y+2,m=a?0:1,g=m+2,O=new Array(d),C=0;C<d;C++)O[C]=C;O.sort(function(ut,ht){return c[ut][y]-c[ht][y]});for(var L=[],w=new Array(f),C=0;C<d;C++){var x=O[C],v=c[x],b=l?x:x-f,E=x<f,M=l||!E,S=E?[]:null;if(L.length){var B=p(L,P,v[y]-n)+1;if(L.splice(0,B),l&&u){S=S.concat(L);for(var D=0;D<L.length;D++){var X=L[D];w[X].push(b)}}else for(var W=v[g],k=v[m],D=0;D<L.length;D++){var X=L[D],V=c[X],H=X<f,J=l||X>=f;(u||(E&&J||M&&H)&&W>=V[m]-n&&k<=V[g]+n)&&(E&&J&&S.push(l?X:X-f),M&&H&&w[X].push(b))}}if(E&&(t===i&&S.push(x),w[x]=S),L.length){var G=v[P],Q=p(L,P,G);L.splice(Q+1,0,x)}else L.push(x)}for(var C=0;C<w.length;C++){var st=w[C];st&&st.sort(function(ht,pt){return ht-pt})}return w}},Ut=T.extend({initialize:function(t){this.precision=T.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,i,n){return this.number(t)+(n||",")+this.number(i)},point:function(t,i){return this.number(t.x)+(i||",")+this.number(t.y)},size:function(t,i){return this.number(t.width)+(i||",")+this.number(t.height)},rectangle:function(t,i){return this.point(t,i)+(i||",")+this.size(t,i)}});Ut.instance=new Ut;var Et=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],i=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,a=Math.sqrt,u=Math.pow,l=Math.log2||function(P){return Math.log(P)*Math.LOG2E},c=1e-12,f=112e-18;function d(P,m,g){return P<m?m:P>g?g:P}function p(P,m,g){function O(B){var D=B*134217729,X=B-D,W=X+D,k=B-W;return[W,k]}var C=m*m-P*g,L=m*m+P*g;if(n(C)*3<L){var w=O(P),x=O(m),v=O(g),b=m*m,E=x[0]*x[0]-b+2*x[0]*x[1]+x[1]*x[1],M=P*g,S=w[0]*v[0]-M+w[0]*v[1]+w[1]*v[0]+w[1]*v[1];C=b-M+(E-S)}return C}function y(){var P=Math.max.apply(Math,arguments);return P&&(P<1e-8||P>1e8)?u(2,-Math.round(l(P))):0}return{EPSILON:c,MACHINE_EPSILON:f,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(a(2)-1)/3,isZero:function(P){return P>=-c&&P<=c},isMachineZero:function(P){return P>=-f&&P<=f},clamp:d,integrate:function(P,m,g,O){for(var C=t[O-2],L=i[O-2],w=(g-m)*.5,x=w+m,v=0,b=O+1>>1,E=O&1?L[v++]*P(x):0;v<b;){var M=w*C[v];E+=L[v++]*(P(x+M)+P(x-M))}return w*E},findRoot:function(P,m,g,O,C,L,w){for(var x=0;x<L;x++){var v=P(g),b=v/m(g),E=g-b;if(n(b)<w){g=E;break}v>0?(C=g,g=E<=O?(O+C)*.5:E):(O=g,g=E>=C?(O+C)*.5:E)}return d(g,O,C)},solveQuadratic:function(P,m,g,O,C,L){var w,x=1/0;if(n(P)<c){if(n(m)<c)return n(g)<c?-1:0;w=-g/m}else{m*=-.5;var v=p(P,m,g);if(v&&n(v)<f){var b=y(n(P),n(m),n(g));b&&(P*=b,m*=b,g*=b,v=p(P,m,g))}if(v>=-f){var E=v<0?0:a(v),M=m+(m<0?-E:E);M===0?(w=g/P,x=-w):(w=M/P,x=g/M)}}var S=0,B=C==null,D=C-c,X=L+c;return isFinite(w)&&(B||w>D&&w<X)&&(O[S++]=B?w:d(w,C,L)),x!==w&&isFinite(x)&&(B||x>D&&x<X)&&(O[S++]=B?x:d(x,C,L)),S},solveCubic:function(P,m,g,O,C,L,w){var x=y(n(P),n(m),n(g),n(O)),v,b,E,M,S;x&&(P*=x,m*=x,g*=x,O*=x);function B(Q){v=Q;var st=P*v;b=st+m,E=b*v+g,M=(st+b)*v+E,S=E*v+O}if(n(P)<c)P=m,b=g,E=O,v=1/0;else if(n(O)<c)b=m,E=g,v=0;else{B(-(m/P)/3);var D=S/P,X=u(n(D),1/3),W=D<0?-1:1,k=-M/P,V=k>0?1.324717957244746*Math.max(X,a(k)):X,H=v-W*V;if(H!==v){do B(H),H=M===0?v:v-S/M/(1+f);while(W*H>W*v);n(P)*v*v>n(O/v)&&(E=-O/v,b=(E-g)/v)}}var J=Et.solveQuadratic(P,b,E,C,L,w),G=L==null;return isFinite(v)&&(J===0||J>0&&v!==C[0]&&v!==C[1])&&(G||v>L-c&&v<w+c)&&(C[J++]=G?v:d(v,L,w)),J}}},ge={_id:1,_pools:{},get:function(t){if(t){var i=this._pools[t];return i||(i=this._pools[t]={_id:1}),i._id++}else return this._id++}},Z=T.extend({_class:"Point",_readIndex:!0,initialize:function(i,n){var a=typeof i,u=this.__read,l=0;if(a==="number"){var c=typeof n=="number";this._set(i,c?n:i),u&&(l=c?2:1)}else if(a==="undefined"||i===null)this._set(0,0),u&&(l=i===null?1:0);else{var f=a==="string"?i.split(/[\s,]+/)||[]:i;l=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"x"in f?this._set(f.x||0,f.y||0):"width"in f?this._set(f.width||0,f.height||0):"angle"in f?(this._set(f.length||0,0),this.setAngle(f.angle||0)):(this._set(0,0),l=0)}return u&&(this.__read=l),this},set:"#initialize",_set:function(t,i){return this.x=t,this.y=i,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new Z(this.x,this.y)},toString:function(){var t=Ut.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var i=this._angle||0;this._set(Math.cos(i)*t,Math.sin(i)*t)}else{var n=t/this.getLength();Et.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=Z.read(arguments),i=this.getLength()*t.getLength();if(Et.isZero(i))return NaN;var n=this.dot(t)/i;return Math.acos(n<-1?-1:n>1?1:n)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var i=this.getLength();this._set(Math.cos(t)*i,Math.sin(t)*i)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=Z.read(arguments);return Math.atan2(this.cross(t),this.dot(t))*180/Math.PI},getDistance:function(){var t=arguments,i=Z.read(t),n=i.x-this.x,a=i.y-this.y,u=n*n+a*a,l=T.read(t);return l?u:Math.sqrt(u)},normalize:function(t){t===A&&(t=1);var i=this.getLength(),n=i!==0?t/i:0,a=new Z(this.x*n,this.y*n);return n>=0&&(a._angle=this._angle),a},rotate:function(t,i){if(t===0)return this.clone();t=t*Math.PI/180;var n=i?this.subtract(i):this,a=Math.sin(t),u=Math.cos(t);return n=new Z(n.x*u-n.y*a,n.x*a+n.y*u),i?n.add(i):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=Z.read(arguments);return new Z(this.x+t.x,this.y+t.y)},subtract:function(){var t=Z.read(arguments);return new Z(this.x-t.x,this.y-t.y)},multiply:function(){var t=Z.read(arguments);return new Z(this.x*t.x,this.y*t.y)},divide:function(){var t=Z.read(arguments);return new Z(this.x/t.x,this.y/t.y)},modulo:function(){var t=Z.read(arguments);return new Z(this.x%t.x,this.y%t.y)},negate:function(){return new Z(-this.x,-this.y)},isInside:function(){return Ct.read(arguments).contains(this)},isClose:function(){var t=arguments,i=Z.read(t),n=T.read(t);return this.getDistance(i)<=n},isCollinear:function(){var t=Z.read(arguments);return Z.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=Z.read(arguments);return Z.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=Et.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=Z.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=Z.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=Z.read(arguments),i=t.isZero()?0:this.dot(t)/t.dot(t);return new Z(t.x*i,t.y*i)},statics:{min:function(){var t=arguments,i=Z.read(t),n=Z.read(t);return new Z(Math.min(i.x,n.x),Math.min(i.y,n.y))},max:function(){var t=arguments,i=Z.read(t),n=Z.read(t);return new Z(Math.max(i.x,n.x),Math.max(i.y,n.y))},random:function(){return new Z(Math.random(),Math.random())},isCollinear:function(t,i,n,a){return Math.abs(t*a-i*n)<=Math.sqrt((t*t+i*i)*(n*n+a*a))*1e-8},isOrthogonal:function(t,i,n,a){return Math.abs(t*n+i*a)<=Math.sqrt((t*t+i*i)*(n*n+a*a))*1e-8}}},T.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new Z(i(this.x),i(this.y))}},{})),we=Z.extend({initialize:function(i,n,a,u){this._x=i,this._y=n,this._owner=a,this._setter=u},_set:function(t,i,n){return this._x=t,this._y=i,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),gt=T.extend({_class:"Size",_readIndex:!0,initialize:function(i,n){var a=typeof i,u=this.__read,l=0;if(a==="number"){var c=typeof n=="number";this._set(i,c?n:i),u&&(l=c?2:1)}else if(a==="undefined"||i===null)this._set(0,0),u&&(l=i===null?1:0);else{var f=a==="string"?i.split(/[\s,]+/)||[]:i;l=1,Array.isArray(f)?this._set(+f[0],+(f.length>1?f[1]:f[0])):"width"in f?this._set(f.width||0,f.height||0):"x"in f?this._set(f.x||0,f.y||0):(this._set(0,0),l=0)}return u&&(this.__read=l),this},set:"#initialize",_set:function(t,i){return this.width=t,this.height=i,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new gt(this.width,this.height)},toString:function(){var t=Ut.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.width),i.number(this.height)]},add:function(){var t=gt.read(arguments);return new gt(this.width+t.width,this.height+t.height)},subtract:function(){var t=gt.read(arguments);return new gt(this.width-t.width,this.height-t.height)},multiply:function(){var t=gt.read(arguments);return new gt(this.width*t.width,this.height*t.height)},divide:function(){var t=gt.read(arguments);return new gt(this.width/t.width,this.height/t.height)},modulo:function(){var t=gt.read(arguments);return new gt(this.width%t.width,this.height%t.height)},negate:function(){return new gt(-this.width,-this.height)},isZero:function(){var t=Et.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,i){return new gt(Math.min(t.width,i.width),Math.min(t.height,i.height))},max:function(t,i){return new gt(Math.max(t.width,i.width),Math.max(t.height,i.height))},random:function(){return new gt(Math.random(),Math.random())}}},T.each(["round","ceil","floor","abs"],function(t){var i=Math[t];this[t]=function(){return new gt(i(this.width),i(this.height))}},{})),ae=gt.extend({initialize:function(i,n,a,u){this._width=i,this._height=n,this._owner=a,this._setter=u},_set:function(t,i,n){return this._width=t,this._height=i,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),Ct=T.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(i,n,a,u){var l=arguments,c=typeof i,f;if(c==="number"?(this._set(i,n,a,u),f=4):c==="undefined"||i===null?(this._set(0,0,0,0),f=i===null?1:0):l.length===1&&(Array.isArray(i)?(this._set.apply(this,i),f=1):i.x!==A||i.width!==A?(this._set(i.x||0,i.y||0,i.width||0,i.height||0),f=1):i.from===A&&i.to===A&&(this._set(0,0,0,0),T.readSupported(l,this)&&(f=1))),f===A){var d=Z.readNamed(l,"from"),p=T.peek(l),y=d.x,P=d.y,m,g;if(p&&p.x!==A||T.hasNamed(l,"to")){var O=Z.readNamed(l,"to");m=O.x-y,g=O.y-P,m<0&&(y=O.x,m=-m),g<0&&(P=O.y,g=-g)}else{var C=gt.read(l);m=C.width,g=C.height}this._set(y,P,m,g),f=l.__index}var L=l.__filtered;return L&&(this.__filtered=L),this.__read&&(this.__read=f),this},set:"#initialize",_set:function(t,i,n,a){return this.x=t,this.y=i,this.width=n,this.height=a,this},clone:function(){return new Ct(this.x,this.y,this.width,this.height)},equals:function(t){var i=T.isPlainValue(t)?Ct.read(arguments):t;return i===this||i&&this.x===i.x&&this.y===i.y&&this.width===i.width&&this.height===i.height||!1},toString:function(){var t=Ut.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var i=t.formatter;return[i.number(this.x),i.number(this.y),i.number(this.width),i.number(this.height)]},getPoint:function(t){var i=t?Z:we;return new i(this.x,this.y,this,"setPoint")},setPoint:function(){var t=Z.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var i=t?gt:ae;return new i(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=gt.read(arguments),i=this._sx,n=this._sy,a=t.width,u=t.height;i&&(this.x+=(this.width-a)*i),n&&(this.y+=(this.height-u)*n),this.width=a,this.height=u,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var i=t-this.x;this.width-=this._sx===.5?i*2:i}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var i=t-this.y;this.height-=this._sy===.5?i*2:i}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var i=t-this.x;this.width=this._sx===.5?i*2:i}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var i=t-this.y;this.height=this._sy===.5?i*2:i}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||this._sx===.5?this.x=t-this.width/2:(this._sx&&(this.x+=(t-this.x)*2*this._sx),this.width=(t-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||this._sy===.5?this.y=t-this.height/2:(this._sy&&(this.y+=(t-this.y)*2*this._sy),this.height=(t-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(t){var i=t?Z:we;return new i(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=Z.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(t){return t&&t.width!==A||(Array.isArray(t)?t:arguments).length===4?this._containsRectangle(Ct.read(arguments)):this._containsPoint(Z.read(arguments))},_containsPoint:function(t){var i=t.x,n=t.y;return i>=this.x&&n>=this.y&&i<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var i=t.x,n=t.y;return i>=this.x&&n>=this.y&&i+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=Ct.read(arguments),i=T.read(arguments)||0;return t.x+t.width>this.x-i&&t.y+t.height>this.y-i&&t.x<this.x+this.width+i&&t.y<this.y+this.height+i},intersect:function(){var t=Ct.read(arguments),i=Math.max(this.x,t.x),n=Math.max(this.y,t.y),a=Math.min(this.x+this.width,t.x+t.width),u=Math.min(this.y+this.height,t.y+t.height);return new Ct(i,n,a-i,u-n)},unite:function(){var t=Ct.read(arguments),i=Math.min(this.x,t.x),n=Math.min(this.y,t.y),a=Math.max(this.x+this.width,t.x+t.width),u=Math.max(this.y+this.height,t.y+t.height);return new Ct(i,n,a-i,u-n)},include:function(){var t=Z.read(arguments),i=Math.min(this.x,t.x),n=Math.min(this.y,t.y),a=Math.max(this.x+this.width,t.x),u=Math.max(this.y+this.height,t.y);return new Ct(i,n,a-i,u-n)},expand:function(){var t=gt.read(arguments),i=t.width,n=t.height;return new Ct(this.x-i/2,this.y-n/2,this.width+i,this.height+n)},scale:function(t,i){return this.expand(this.width*t-this.width,this.height*(i===A?t:i)-this.height)}},T.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,i){var n=t.join(""),a=/^[RL]/.test(n);i>=4&&(t[1]+=a?"Y":"X");var u=t[a?0:1],l=t[a?1:0],c="get"+u,f="get"+l,d="set"+u,p="set"+l,y="get"+n,P="set"+n;this[y]=function(m){var g=m?Z:we;return new g(this[c](),this[f](),this,P)},this[P]=function(){var m=Z.read(arguments);this[d](m.x),this[p](m.y)}},{beans:!0})),di=Ct.extend({initialize:function(i,n,a,u,l,c){this._set(i,n,a,u,!0),this._owner=l,this._setter=c},_set:function(t,i,n,a,u){return this._x=t,this._y=i,this._width=n,this._height=a,u||this._owner[this._setter](this),this}},new function(){var t=Ct.prototype;return T.each(["x","y","width","height"],function(i){var n=T.capitalize(i),a="_"+i;this["get"+n]=function(){return this[a]},this["set"+n]=function(u){this[a]=u,this._dontNotify||this._owner[this._setter](this)}},T.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(i){var n="set"+i;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(i){var n=this._owner;n._changeSelection&&n._changeSelection(2,i)}}))}),Wt=T.extend({_class:"Matrix",initialize:function t(i,n){var a=arguments,u=a.length,l=!0;if(u>=6?this._set.apply(this,a):u===1||u===2?i instanceof t?this._set(i._a,i._b,i._c,i._d,i._tx,i._ty,n):Array.isArray(i)?this._set.apply(this,n?i.concat([n]):i):l=!1:u?l=!1:this.reset(),!l)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,i,n,a,u,l,c){return this._a=t,this._b=i,this._c=n,this._d=a,this._tx=u,this._ty=l,c||this._changed(),this},_serialize:function(t,i){return T.serialize(this.getValues(),t,!0,i)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new Wt(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=Ut.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,i){var n=this._owner;return n?(n.transform(null,T.pick(t,!0),i),this.isIdentity()):!1},translate:function(){var t=Z.read(arguments),i=t.x,n=t.y;return this._tx+=i*this._a+n*this._c,this._ty+=i*this._b+n*this._d,this._changed(),this},scale:function(){var t=arguments,i=Z.read(t),n=Z.read(t,0,{readNull:!0});return n&&this.translate(n),this._a*=i.x,this._b*=i.x,this._c*=i.y,this._d*=i.y,n&&this.translate(n.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var i=Z.read(arguments,1),n=i.x,a=i.y,u=Math.cos(t),l=Math.sin(t),c=n-n*u+a*l,f=a-n*l-a*u,d=this._a,p=this._b,y=this._c,P=this._d;return this._a=u*d+l*y,this._b=u*p+l*P,this._c=-l*d+u*y,this._d=-l*p+u*P,this._tx+=c*d+f*y,this._ty+=c*p+f*P,this._changed(),this},shear:function(){var t=arguments,i=Z.read(t),n=Z.read(t,0,{readNull:!0});n&&this.translate(n);var a=this._a,u=this._b;return this._a+=i.y*this._c,this._b+=i.y*this._d,this._c+=i.x*a,this._d+=i.x*u,n&&this.translate(n.negate()),this._changed(),this},skew:function(){var t=arguments,i=Z.read(t),n=Z.read(t,0,{readNull:!0}),a=Math.PI/180,u=new Z(Math.tan(i.x*a),Math.tan(i.y*a));return this.shear(u,n)},append:function(t,i){if(t){var n=this._a,a=this._b,u=this._c,l=this._d,c=t._a,f=t._c,d=t._b,p=t._d,y=t._tx,P=t._ty;this._a=c*n+d*u,this._c=f*n+p*u,this._b=c*a+d*l,this._d=f*a+p*l,this._tx+=y*n+P*u,this._ty+=y*a+P*l,i||this._changed()}return this},prepend:function(t,i){if(t){var n=this._a,a=this._b,u=this._c,l=this._d,c=this._tx,f=this._ty,d=t._a,p=t._c,y=t._b,P=t._d,m=t._tx,g=t._ty;this._a=d*n+p*a,this._c=d*u+p*l,this._b=y*n+P*a,this._d=y*u+P*l,this._tx=d*c+p*f+m,this._ty=y*c+P*f+g,i||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,i=this._b,n=this._c,a=this._d,u=this._tx,l=this._ty,c=t*a-i*n,f=null;return c&&!isNaN(c)&&isFinite(u)&&isFinite(l)&&(this._a=a/c,this._b=-i/c,this._c=-n/c,this._d=t/c,this._tx=(n*l-a*u)/c,this._ty=(i*u-t*l)/c,f=this),f},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Wt(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,i,n){return arguments.length<3?this._transformPoint(Z.read(arguments)):this._transformCoordinates(t,i,n)},_transformPoint:function(t,i,n){var a=t.x,u=t.y;return i||(i=new Z),i._set(a*this._a+u*this._c+this._tx,a*this._b+u*this._d+this._ty,n)},_transformCoordinates:function(t,i,n){for(var a=0,u=2*n;a<u;a+=2){var l=t[a],c=t[a+1];i[a]=l*this._a+c*this._c+this._tx,i[a+1]=l*this._b+c*this._d+this._ty}return i},_transformCorners:function(t){var i=t.x,n=t.y,a=i+t.width,u=n+t.height,l=[i,n,a,n,a,u,i,u];return this._transformCoordinates(l,l,4)},_transformBounds:function(t,i,n){for(var a=this._transformCorners(t),u=a.slice(0,2),l=u.slice(),c=2;c<8;c++){var f=a[c],d=c&1;f<u[d]?u[d]=f:f>l[d]&&(l[d]=f)}return i||(i=new Ct),i._set(u[0],u[1],l[0]-u[0],l[1]-u[1],n)},inverseTransform:function(){return this._inverseTransform(Z.read(arguments))},_inverseTransform:function(t,i,n){var a=this._a,u=this._b,l=this._c,c=this._d,f=this._tx,d=this._ty,p=a*c-u*l,y=null;if(p&&!isNaN(p)&&isFinite(f)&&isFinite(d)){var P=t.x-this._tx,m=t.y-this._ty;i||(i=new Z),y=i._set((P*c-m*l)/p,(m*a-P*u)/p,n)}return y},decompose:function(){var t=this._a,i=this._b,n=this._c,a=this._d,u=t*a-i*n,l=Math.sqrt,c=Math.atan2,f=180/Math.PI,d,p,y;if(t!==0||i!==0){var P=l(t*t+i*i);d=Math.acos(t/P)*(i>0?1:-1),p=[P,u/P],y=[c(t*n+i*a,P*P),0]}else if(n!==0||a!==0){var m=l(n*n+a*a);d=Math.asin(n/m)*(a>0?1:-1),p=[u/m,m],y=[0,c(t*n+i*a,m*m)]}else d=0,y=p=[0,0];return{translation:this.getTranslation(),rotation:d*f,scaling:new Z(p),skewing:new Z(y[0]*f,y[1]*f)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new Z(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},T.each(["a","b","c","d","tx","ty"],function(t){var i=T.capitalize(t),n="_"+t;this["get"+i]=function(){return this[n]},this["set"+i]=function(a){this[n]=a,this._changed()}},{})),oe=T.extend({_class:"Line",initialize:function(i,n,a,u,l){var c=!1;arguments.length>=4?(this._px=i,this._py=n,this._vx=a,this._vy=u,c=l):(this._px=i.x,this._py=i.y,this._vx=n.x,this._vy=n.y,c=a),c||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new Z(this._px,this._py)},getVector:function(){return new Z(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,i){return oe.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,i)},getSide:function(t,i){return oe.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,i)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return oe.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return Z.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return Z.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,i,n,a,u,l,c,f,d,p){d||(n-=t,a-=i,c-=u,f-=l);var y=n*f-a*c;if(!Et.isMachineZero(y)){var P=t-u,m=i-l,g=(c*m-f*P)/y,O=(n*m-a*P)/y,C=1e-12,L=-C,w=1+C;if(p||L<g&&g<w&&L<O&&O<w)return p||(g=g<=0?0:g>=1?1:g),new Z(t+g*n,i+g*a)}},getSide:function(t,i,n,a,u,l,c,f){c||(n-=t,a-=i);var d=u-t,p=l-i,y=d*a-p*n;return!f&&Et.isMachineZero(y)&&(y=(d*n+d*n)/(n*n+a*a),y>=0&&y<=1&&(y=0)),y<0?-1:y>0?1:0},getSignedDistance:function(t,i,n,a,u,l,c){return c||(n-=t,a-=i),n===0?a>0?u-t:t-u:a===0?n<0?l-i:i-l:((u-t)*a-(l-i)*n)/(a>n?a*Math.sqrt(1+n*n/(a*a)):n*Math.sqrt(1+a*a/(n*n)))},getDistance:function(t,i,n,a,u,l,c){return Math.abs(oe.getSignedDistance(t,i,n,a,u,l,c))}}}),Ce=dt.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(i){dt.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new ni(null,null,this),this._view=Zt.create(this,i||te.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,i){return T.serialize(this._children,t,!0,i)},_changed:function(t,i){if(t&1){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var a=this._changes;if(a&&i){var u=this._changesById,l=i._id,c=u[l];c?c.flags|=t:a.push(u[l]={item:i,flags:t})}},clear:function(){for(var t=this._children,i=t.length-1;i>=0;i--)t[i].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return t.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new Ve({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],i={};return this.getItems({class:ti,match:function(n){var a=n._definition,u=a._id;return i[u]||(i[u]=!0,t.push(a)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,i=[];for(var n in t){var a=t[n],u=a._selection;u&1&&a.isInserted()?i.push(a):u||this._updateSelection(a)}return i},_updateSelection:function(t){var i=t._id,n=this._selectionItems;t._selection?n[i]!==t&&(this._selectionCount++,n[i]=t):n[i]===t&&(this._selectionCount--,delete n[i])},selectAll:function(){for(var t=this._children,i=0,n=t.length;i<n;i++)t[i].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var i in t)t[i].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(A,t)},insertLayer:function(t,i){if(i instanceof Ve){i._remove(!1,!0),T.splice(this._children,[i],t,0),i._setProject(this,!0);var n=i._name;n&&i.setName(n),this._changes&&i._changed(5),this._activeLayer||(this._activeLayer=i)}else i=null;return i},_insertItem:function(t,i,n){return i=this.insertLayer(t,i)||(this._activeLayer||this._insertItem(A,new Ve(Nt.NO_INSERT),!0)).insertChild(t,i),n&&i.activate&&i.activate(),i},getItems:function(t){return Nt._getItems(this,t)},getItem:function(t){return Nt._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var i=this._activeLayer;return T.importJSON(t,i&&i.isEmpty()&&i)},removeOn:function(t){var i=this._removeSets;if(i){t==="mouseup"&&(i.mousedrag=null);var n=i[t];if(n){for(var a in n){var u=n[a];for(var l in i){var c=i[l];c&&c!=n&&delete c[u._id]}u.remove()}i[t]=null}}},draw:function(t,i,n){this._updateVersion++,t.save(),i.applyToContext(t);for(var a=this._children,u=new T({offset:new Z(0,0),pixelRatio:n,viewMatrix:i.isIdentity()?null:i,matrices:[new Wt],updateMatrix:!0}),l=0,c=a.length;l<c;l++)a[l].draw(t,u);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var f=this._selectionItems,d=this._scope.settings.handleSize,p=this._updateVersion;for(var y in f)f[y]._drawSelection(t,i,d,f,p);t.restore()}}}),Nt=T.extend(ot,{statics:{extend:function t(i){return i._serializeFields&&(i._serializeFields=T.set({},this.prototype._serializeFields,i._serializeFields)),t.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Wt,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return T.each(t,function(i){this._events[i]={install:function(n){this.getView()._countItemEvent(n,1)},uninstall:function(n){this.getView()._countItemEvent(n,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,i){var n=t&&T.isPlainObject(t),a=n&&t.internal===!0,u=this._matrix=new Wt,l=n&&t.project||Bt.project,c=Bt.settings;return this._id=a?null:ge.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&c.applyMatrix,i&&u.translate(i),u._owner=this,this._style=new ni(l._currentStyle,this,l),a||n&&t.insert==!1||!c.insertItems&&!(n&&t.insert==!0)?this._setProject(l):(n&&t.parent||l)._insertItem(A,this,!0),n&&t!==Nt.NO_INSERT&&t!==Nt.INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,i){var n={},a=this;function u(l){for(var c in l){var f=a[c];T.equals(f,c==="leading"?l.fontSize*1.2:l[c])||(n[c]=T.serialize(f,t,c!=="data",i))}}return u(this._serializeFields),this instanceof Le||u(this._style._defaults),[this._class,n]},_changed:function(t){var i=this._symbol,n=this._parent||i,a=this._project;t&8&&(this._bounds=this._position=this._decomposed=A),t&16&&(this._globalMatrix=A),n&&t&72&&Nt._clearBoundsCache(n),t&2&&Nt._clearBoundsCache(this),a&&a._changed(t,this),i&&i._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var i=this._getOwner();if(t&&i){var n=i._children,a=i._namedChildren;(a[t]=a[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||A,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},T.each(["locked","visible","blendMode","opacity","guide"],function(t){var i=T.capitalize(t),n="_"+t,a={locked:256,visible:265};this["get"+i]=function(){return this[n]},this["set"+i]=function(u){u!=this[n]&&(this[n]=u,this._changed(a[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var i=this._project;i&&(i._updateSelection(this),this._changed(257))}},_changeSelection:function(t,i){var n=this._selection;this.setSelection(i?n|t:n&~t)},isSelected:function(){if(this._selectChildren){for(var t=this._children,i=0,n=t.length;i<n;i++)if(t[i].isSelected())return!0}return!!(this._selection&1)},setSelected:function(t){if(this._selectChildren)for(var i=this._children,n=0,a=i.length;n<a;n++)i[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,i=!!(this._selection&1);if(t&&i){for(var n=0,a=t.length;n<a;n++)if(!t[n].isFullySelected())return!1;return!0}return i},setFullySelected:function(t){var i=this._children;if(i)for(var n=0,a=i.length;n<a;n++)i[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var i=t?Z:we,n=this._position||(this._position=this._getPositionFromBounds());return new i(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(Z.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new we(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=Z.read(arguments,0,{clone:!0,readNull:!0}),this._position=A}},T.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,i){this[i]=function(n){return this.getBounds(n,t)}},{beans:!0,getBounds:function(t,i){var n=i||t instanceof Wt,a=T.set({},n?i:t,this._boundsOptions);(!a.stroke||this.getStrokeScaling())&&(a.cacheItem=this);var u=this._getCachedBounds(n&&t,a).rect;return arguments.length?u:new di(u.x,u.y,u.width,u.height,this,"setBounds")},setBounds:function(){var t=Ct.read(arguments),i=this.getBounds(),n=this._matrix,a=new Wt,u=t.getCenter();a.translate(u),(t.width!=i.width||t.height!=i.height)&&(n.isInvertible()||(n.set(n._backup||new Wt().translate(n.getTranslation())),i=this.getBounds()),a.scale(i.width!==0?t.width/i.width:0,i.height!==0?t.height/i.height:0)),u=i.getCenter(),a.translate(-u.x,-u.y),this.transform(a)},_getBounds:function(t,i){var n=this._children;return!n||!n.length?new Ct:(Nt._updateBoundsCache(this,i.cacheItem),Nt._getBounds(n,t,i))},_getBoundsCacheKey:function(t,i){return[t.stroke?1:0,t.handle?1:0,i?1:0].join("")},_getCachedBounds:function(t,i,n){t=t&&t._orNullIfIdentity();var a=i.internal&&!n,u=i.cacheItem,l=a?null:this._matrix._orNullIfIdentity(),c=u&&(!t||t.equals(l))&&this._getBoundsCacheKey(i,a),f=this._bounds;if(Nt._updateBoundsCache(this._parent||this._symbol,u),c&&f&&c in f){var d=f[c];return{rect:d.rect.clone(),nonscaling:d.nonscaling}}var p=this._getBounds(t||l,i),y=p.rect||p,P=this._style,m=p.nonscaling||P.hasStroke()&&!P.getStrokeScaling();if(c){f||(this._bounds=f={});var d=f[c]={rect:y.clone(),nonscaling:m,internal:a}}return{rect:y,nonscaling:m}},_getStrokeMatrix:function(t,i){var n=this.getStrokeScaling()?null:i&&i.internal?this:this._parent||this._symbol&&this._symbol._item,a=n?n.getViewMatrix().invert():t;return a&&a._shiftless()},statics:{_updateBoundsCache:function(t,i){if(t&&i){var n=i._id,a=t._boundsCache=t._boundsCache||{ids:{},list:[]};a.ids[n]||(a.list.push(i),a.ids[n]=i)}},_clearBoundsCache:function(t){var i=t._boundsCache;if(i){t._bounds=t._position=t._boundsCache=A;for(var n=0,a=i.list,u=a.length;n<u;n++){var l=a[n];l!==t&&(l._bounds=l._position=A,l._boundsCache&&Nt._clearBoundsCache(l))}}},_getBounds:function(t,i,n){var a=1/0,u=-a,l=a,c=u,f=!1;n=n||{};for(var d=0,p=t.length;d<p;d++){var y=t[d];if(y._visible&&!y.isEmpty(!0)){var P=y._getCachedBounds(i&&i.appended(y._matrix),n,!0),m=P.rect;a=Math.min(m.x,a),l=Math.min(m.y,l),u=Math.max(m.x+m.width,u),c=Math.max(m.y+m.height,c),P.nonscaling&&(f=!0)}}return{rect:isFinite(a)?new Ct(a,l,u-a,c-l):new Ct,nonscaling:f}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var i=this.getRotation();if(i!=null&&t!=null){var n=this._decomposed;this.rotate(t-i),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),i=t&&t.scaling;return new we(i?i.x:1,i?i.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=Z.read(arguments,0,{clone:!0,readNull:!0});if(t&&i&&!t.equals(i)){var n=this.getRotation(),a=this._decomposed,u=new Wt,l=Et.isZero;if(l(t.x)||l(t.y))u.translate(a.translation),n&&u.rotate(n),u.scale(i.x,i.y),this._matrix.set(u);else{var c=this.getPosition(!0);u.translate(c),n&&u.rotate(n),u.scale(i.x/t.x,i.y/t.y),n&&u.rotate(-n),u.translate(c.negate()),this.transform(u)}a&&(a.scaling=i,this._decomposed=a)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},getGlobalMatrix:function(t){var i=this._globalMatrix;if(i)for(var n=this._parent,a=[];n;){if(!n._globalMatrix){i=null;for(var u=0,l=a.length;u<l;u++)a[u]._globalMatrix=null;break}a.push(n),n=n._parent}if(!i){i=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&i.prepend(n.getGlobalMatrix(!0))}return t?i:i.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,i){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,a=0,u=n&&n.length;a<u;a++)n[a]._setProject(t);i=!0}i&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(i){t.base.call(this,i);for(var n=this._children,a=0,u=n&&n.length;a<u;a++)n[a]._installEvents(i)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Ve)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(t){var i=this._parent,n=i&&i._children;n&&i.insertChildren(t in n?t:A,[this])},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return T.equals(this._children,t._children)},clone:function(t){var i=new this.constructor(Nt.NO_INSERT),n=this._children,a=T.pick(t?t.insert:A,t===A||t===!0),u=T.pick(t?t.deep:A,!0);n&&i.copyAttributes(this),(!n||u)&&i.copyContent(this),n||i.copyAttributes(this),a&&i.insertAbove(this);var l=this._name,c=this._parent;if(l&&c){for(var n=c._children,f=l,d=1;n[l];)l=f+" "+d++;l!==f&&i.setName(l)}return i},copyContent:function(t){for(var i=t._children,n=0,a=i&&i.length;n<a;n++)this.addChild(i[n].clone(!1),!0)},copyAttributes:function(t,i){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],a=0,u=n.length;a<u;a++){var l=n[a];t.hasOwnProperty(l)&&(this[l]=t[l])}i||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var c=t._data,f=t._name;this._data=c?T.clone(c):null,f&&this.setName(f)},rasterize:function(t,i){var n,a,u;T.isPlainObject(t)?(n=t.resolution,a=t.insert,u=t.raster):(n=t,a=i),u||(u=new We(Nt.NO_INSERT));var l=this.getStrokeBounds(),c=(n||this.getView().getResolution())/72,f=l.getTopLeft().floor(),d=l.getBottomRight().ceil(),p=new gt(d.subtract(f)),y=p.multiply(c);if(u.setSize(y,!0),!y.isZero()){var P=u.getContext(!0),m=new Wt().scale(c).translate(f.negate());P.save(),m.applyToContext(P),this.draw(P,new T({matrices:[m]})),P.restore()}return u._matrix.set(new Wt().translate(f.add(p.divide(2))).scale(1/c)),(a===A||a)&&u.insertAbove(this),u},contains:function(){var t=this._matrix;return t.isInvertible()&&!!this._contains(t._inverseTransform(Z.read(arguments)))},_contains:function(t){var i=this._children;if(i){for(var n=i.length-1;n>=0;n--)if(i[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return Ct.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Xt.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,i){return t instanceof Nt?this._asPathItem().getIntersections(t._asPathItem(),null,i,!0).length>0:!1}},new function(){function t(){var a=arguments;return this._hitTest(Z.read(a),Ee.getOptions(a))}function i(){var a=arguments,u=Z.read(a),l=Ee.getOptions(a),c=[];return this._hitTest(u,new T({all:c},l)),c}function n(a,u,l,c){var f=this._children;if(f)for(var d=f.length-1;d>=0;d--){var p=f[d],y=p!==c&&p._hitTest(a,u,l);if(y&&!u.all)return y}return null}return Ce.inject({hitTest:t,hitTestAll:i,_hitTest:n}),{hitTest:t,hitTestAll:i,_hitTestChildren:n}},{_hitTest:function(t,i,n){if(this._locked||!this._visible||this._guide&&!i.guides||this.isEmpty())return null;var a=this._matrix,u=n?n.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(i.tolerance,1e-12),c=i._tolerancePadding=new gt(Xt._getStrokePadding(l,a._shiftless().invert()));if(t=a._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(c.multiply(2))._containsPoint(t))return null;var f=!(i.guides&&!this._guide||i.selected&&!this.isSelected()||i.type&&i.type!==T.hyphenate(this._class)||i.class&&!(this instanceof i.class)),d=i.match,p=this,y,P;function m(v){return v&&d&&!d(v)&&(v=null),v&&i.all&&i.all.push(v),v}function g(v,b){var E=b?y["get"+b]():p.getPosition();if(t.subtract(E).divide(c).length<=1)return new Ee(v,p,{name:b?T.hyphenate(b):v,point:E})}var O=i.position,C=i.center,L=i.bounds;if(f&&this._parent&&(O||C||L)){if((C||L)&&(y=this.getInternalBounds()),P=O&&g("position")||C&&g("center","Center"),!P&&L)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!P;x++)P=g("bounds",w[x]);P=m(P)}return P||(P=this._hitTestChildren(t,i,u)||f&&m(this._hitTestSelf(t,i,u,this.getStrokeScaling()?null:u._shiftless().invert()))||null),P&&P.point&&(P.point=a.transform(P.point)),P},_hitTestSelf:function(t,i){if(i.fill&&this.hasFill()&&this._contains(t))return new Ee("fill",this)},matches:function(t,i){function n(c,f){for(var d in c)if(c.hasOwnProperty(d)){var p=c[d],y=f[d];if(T.isPlainObject(p)&&T.isPlainObject(y)){if(!n(p,y))return!1}else if(!T.equals(p,y))return!1}return!0}var a=typeof t;if(a==="object"){for(var u in t)if(t.hasOwnProperty(u)&&!this.matches(u,t[u]))return!1;return!0}else{if(a==="function")return t(this);if(t==="match")return i(this);var l=/^(empty|editable)$/.test(t)?this["is"+T.capitalize(t)]():t==="type"?T.hyphenate(this._class):this[t];if(t==="class"){if(typeof i=="function")return this instanceof i;l=this._class}if(typeof i=="function")return!!i(l);if(i){if(i.test)return i.test(l);if(T.isPlainObject(i))return n(i,l)}return T.equals(l,i)}},getItems:function(t){return Nt._getItems(this,t,this._matrix)},getItem:function(t){return Nt._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(i,n,a,u,l){if(!u){var c=typeof n=="object"&&n,f=c&&c.overlapping,d=c&&c.inside,p=f||d,m=p&&Ct.read([p]);u={items:[],recursive:c&&c.recursive!==!1,inside:!!d,overlapping:!!f,rect:m,path:f&&new Xt.Rectangle({rectangle:m,insert:!1})},c&&(n=T.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var y=i._children,P=u.items,m=u.rect;a=m&&(a||new Wt);for(var g=0,O=y&&y.length;g<O;g++){var C=y[g],L=a&&a.appended(C._matrix),w=!0;if(m){var p=C.getBounds(L);if(!m.intersects(p))continue;m.contains(p)||u.overlapping&&(p.contains(m)||u.path.intersects(C,L))||(w=!1)}if(w&&C.matches(n)&&(P.push(C),l)||(u.recursive!==!1&&t(C,n,L,u,l),l&&P.length>0))break}return P}}},{importJSON:function(t){var i=T.importJSON(t,this);return i!==this?this.addChild(i):i},addChild:function(t){return this.insertChild(A,t)},insertChild:function(t,i){var n=i?this.insertChildren(t,[i]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,i){var n=this._children;if(n&&i&&i.length>0){i=T.slice(i);for(var a={},u=i.length-1;u>=0;u--){var l=i[u],c=l&&l._id;!l||a[c]?i.splice(u,1):(l._remove(!1,!0),a[c]=!0)}T.splice(n,i,t,0);for(var f=this._project,d=f._changes,u=0,p=i.length;u<p;u++){var l=i[u],y=l._name;l._parent=this,l._setProject(f,!0),y&&l.setName(y),d&&l._changed(5)}this._changed(11)}else i=null;return i},_insertItem:"#insertChild",_insertAt:function(t,i){var n=t&&t._getOwner(),a=t!==this&&n?this:null;return a&&(a._remove(!1,!0),n._insertItem(t._index+i,a)),a},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(A,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(A,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var i=this._children;if(i&&i.length===1){var n=i[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var i=t._children,n=t._namedChildren,a=this._name,u=n[a],l=u?u.indexOf(this):-1;l!==-1&&(i[a]==this&&delete i[a],u.splice(l,1),u.length?i[a]=u[0]:delete n[a])}},_remove:function(t,i){var n=this._getOwner(),a=this._project,u=this._index;return this._style&&this._style._dispose(),n?(this._name&&this._removeNamed(),u!=null&&(a._activeLayer===this&&(a._activeLayer=this.getNextSibling()||this.getPreviousSibling()),T.splice(n._children,null,u,1)),this._installEvents(!1),t&&a._changes&&this._changed(5),i&&n._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var i=t&&t.insertBelow(this);return i&&this.remove(),i},removeChildren:function(t,i){if(!this._children)return null;t=t||0,i=T.pick(i,this._children.length);for(var n=T.splice(this._children,null,t,i-t),a=n.length-1;a>=0;a--)n[a]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,i=this._children.length;t<i;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(t){var i=this._children,n=i?i.length:0;if(t){for(var a=0;a<n;a++)if(!i[a].isEmpty(t))return!1;return!0}return!n},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function i(c){var f=[];do f.unshift(c);while(c=c._parent);return f}for(var n=i(this),a=i(t),u=0,l=Math.min(n.length,a.length);u<l;u++)if(n[u]!=a[u])return n[u]._index<a[u]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return this._getOrder(t)===1},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var i=this;i=i._parent;)if(i===t)return!0;return!1},isAncestor:function(t){return t?t.isDescendant(this):!1},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var i=this._parent;i;){if(i._parent&&/^(Group|Layer|CompoundPath)$/.test(i._class)&&t.isDescendant(i))return!0;i=i._parent}return!1}},T.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var n=arguments,a=(i?T:Z).read(n),u=Z.read(n,0,{readNull:!0});return this.transform(new Wt()[t](a,u||this.getPosition(!0)))}},{translate:function(){var t=new Wt;return this.transform(t.translate.apply(t,arguments))},transform:function(t,i,n){var a=this._matrix,u=t&&!t.isIdentity(),l=n&&this._canApplyMatrix||this._applyMatrix&&(u||!a.isIdentity()||i&&this._children);if(!u&&!l)return this;if(u){!t.isInvertible()&&a.isInvertible()&&(a._backup=a.getValues()),a.prepend(t,!0);var c=this._style,f=c.getFillColor(!0),d=c.getStrokeColor(!0);f&&f.transform(t),d&&d.transform(t)}if(l&&(l=this._transformContent(a,i,n))){var p=this._pivot;p&&a._transformPoint(p,p,!0),a.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var y=this._bounds,P=this._position;(u||l)&&this._changed(25);var m=u&&y&&t.decompose();if(m&&m.skewing.isZero()&&m.rotation%90===0){for(var g in y){var O=y[g];if(O.nonscaling)delete y[g];else if(l||!O.internal){var C=O.rect;t._transformBounds(C,C)}}this._bounds=y;var L=y[this._getBoundsCacheKey(this._boundsOptions||{})];L&&(this._position=this._getPositionFromBounds(L.rect))}else u&&P&&this._pivot&&(this._position=t._transformPoint(P,P));return this},_transformContent:function(t,i,n){var a=this._children;if(a){for(var u=0,l=a.length;u<l;u++)a[u].transform(t,i,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(Z.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(Z.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(Z.read(arguments))},localToParent:function(){return this._matrix._transformPoint(Z.read(arguments))},fitBounds:function(t,i){t=Ct.read(arguments);var n=this.getBounds(),a=n.height/n.width,u=t.height/t.width,l=(i?a>u:a<u)?t.width/n.width:t.height/n.height,c=new Ct(new Z,new gt(n.width*l,n.height*l));c.setCenter(t.getCenter()),this.setBounds(c)}}),{_setStyles:function(t,i,n){var a=this._style,u=this._matrix;if(a.hasFill()&&(t.fillStyle=a.getFillColor().toCanvasStyle(t,u)),a.hasStroke()){t.strokeStyle=a.getStrokeColor().toCanvasStyle(t,u),t.lineWidth=a.getStrokeWidth();var l=a.getStrokeJoin(),c=a.getStrokeCap(),f=a.getMiterLimit();if(l&&(t.lineJoin=l),c&&(t.lineCap=c),f&&(t.miterLimit=f),Bt.support.nativeDash){var d=a.getDashArray(),p=a.getDashOffset();d&&d.length&&("setLineDash"in t?(t.setLineDash(d),t.lineDashOffset=p):(t.mozDash=d,t.mozDashOffset=p))}}if(a.hasShadow()){var y=i.pixelRatio||1,P=n._shiftless().prepend(new Wt().scale(y,y)),m=P.transform(new Z(a.getShadowBlur(),0)),g=P.transform(this.getShadowOffset());t.shadowColor=a.getShadowColor().toCanvasStyle(t),t.shadowBlur=m.getLength(),t.shadowOffsetX=g.x,t.shadowOffsetY=g.y}},draw:function(t,i,n){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var a=i.matrices,u=i.viewMatrix,l=this._matrix,c=a[a.length-1].appended(l);if(c.isInvertible()){u=u?u.appended(c):c,a.push(c),i.updateMatrix&&(this._globalMatrix=c);var f=this._blendMode,d=Et.clamp(this._opacity,0,1),p=f==="normal",y=ri.nativeModes[f],P=p&&d===1||i.dontStart||i.clip||(y||p&&d<1)&&this._canComposite(),m=i.pixelRatio||1,g,O,C;if(!P){var L=this.getStrokeBounds(u);if(!L.width||!L.height){a.pop();return}C=i.offset,O=i.offset=L.getTopLeft().floor(),g=t,t=te.getContext(L.getSize().ceil().add(1).multiply(m)),m!==1&&t.scale(m,m)}t.save();var w=n?n.appended(l):this._canScaleStroke&&!this.getStrokeScaling(!0)&&u,x=!P&&i.clipItem,v=!w||x;if(P?(t.globalAlpha=d,y&&(t.globalCompositeOperation=f)):v&&t.translate(-O.x,-O.y),v&&(P?l:u).applyToContext(t),x&&i.clipItem.draw(t,i.extend({clip:!0})),w){t.setTransform(m,0,0,m,0,0);var b=i.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,i,u,w),t.restore(),a.pop(),i.clip&&!i.dontFinish&&t.clip(this.getFillRule()),P||(ri.process(f,t,g,d,O.subtract(C).multiply(m)),te.release(t),i.offset=C)}}},_isUpdated:function(t){var i=this._parent;if(i instanceof Te)return i._isUpdated(t);var n=this._updateVersion===t;return!n&&i&&i._visible&&i._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,i,n,a,u){var l=this._selection,c=l&1,f=l&2||c&&this._selectBounds,d=l&4;if(this._drawSelected||(c=!1),(c||f||d)&&this._isUpdated(u)){var p,y=this.getSelectedColor(!0)||(p=this.getLayer())&&p.getSelectedColor(!0),P=i.appended(this.getGlobalMatrix(!0)),m=n/2;if(t.strokeStyle=t.fillStyle=y?y.toCanvasStyle(t):"#009dec",c&&this._drawSelected(t,P,a),d){var g=this.getPosition(!0),O=this._parent,C=O?O.localToGlobal(g):g,L=C.x,w=C.y;t.beginPath(),t.arc(L,w,m,0,Math.PI*2,!0),t.stroke();for(var x=[[0,-1],[1,0],[0,1],[-1,0]],v=m,b=n+1,E=0;E<4;E++){var M=x[E],S=M[0],B=M[1];t.moveTo(L+S*v,w+B*v),t.lineTo(L+S*b,w+B*b),t.stroke()}}if(f){var D=P._transformCorners(this.getInternalBounds());t.beginPath();for(var E=0;E<8;E++)t[E?"lineTo":"moveTo"](D[E],D[++E]);t.closePath(),t.stroke();for(var E=0;E<8;E++)t.fillRect(D[E]-m,D[++E]-m,n,n)}}},_canComposite:function(){return!1}},T.each(["down","drag","up","move"],function(t){this["removeOn"+T.capitalize(t)]=function(){var i={};return i[t]=!0,this.removeOn(i)}},{removeOn:function(t){for(var i in t)if(t[i]){var n="mouse"+i,a=this._project,u=a._removeSets=a._removeSets||{};u[n]=u[n]||{},u[n][this._id]=this}return this}}),{tween:function(t,i,n){n||(n=i,i=t,t=null,n||(n=i,i=null));var a=n&&n.easing,u=n&&n.start,l=n!=null&&(typeof n=="number"?n:n.duration),c=new ki(this,t,i,l,a,u);function f(d){c._handleFrame(d.time*1e3),c.running||this.off("frame",f)}return l&&this.on("frame",f),c},tweenTo:function(t,i){return this.tween(null,t,i)},tweenFrom:function(t,i){return this.tween(t,null,i)}}),Le=Nt.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(i){this._children=[],this._namedChildren={},this._initialize(i)||this.addChildren(Array.isArray(i)?i:arguments)},_changed:function t(i){t.base.call(this,i),i&2050&&(this._clipItem=A)},_getClipItem:function(){var t=this._clipItem;if(t===A){t=null;for(var i=this._children,n=0,a=i.length;n<a;n++)if(i[n]._clipMask){t=i[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var i=this.getFirstChild();i&&i.setClipMask(t)},_getBounds:function t(i,n){var a=this._getClipItem();return a?a._getCachedBounds(a._matrix.prepended(i),T.set({},n,{stroke:!1})):t.base.call(this,i,n)},_hitTestChildren:function t(i,n,a){var u=this._getClipItem();return(!u||u.contains(i))&&t.base.call(this,i,n,a,u)},_draw:function(t,i){var n=i.clip,a=!n&&this._getClipItem();i=i.extend({clipItem:a,clip:!1}),n?(t.beginPath(),i.dontStart=i.dontFinish=!0):a&&a.draw(t,i.extend({clip:!0}));for(var u=this._children,l=0,c=u.length;l<c;l++){var f=u[l];f!==a&&f.draw(t,i)}}}),Ve=Le.extend({_class:"Layer",initialize:function(){Le.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function t(){return this._parent?t.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),pe=Nt.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(i,n){this._initialize(i,n)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&T.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new ae(t.width,t.height,this,"setSize")},setSize:function(){var t=gt.read(arguments);if(!this._size)this._size=t.clone();else if(!this._size.equals(t)){var i=this._type,n=t.width,a=t.height;i==="rectangle"?this._radius.set(gt.min(this._radius,t.divide(2).abs())):i==="circle"?(n=a=(n+a)/2,this._radius=n/2):i==="ellipse"&&this._radius._set(n/2,a/2),this._size._set(n,a),this._changed(9)}},getRadius:function(){var t=this._radius;return this._type==="circle"?t:new ae(t.width,t.height,this,"setRadius")},setRadius:function(t){var i=this._type;if(i==="circle"){if(t===this._radius)return;var n=t*2;this._radius=t,this._size._set(n,n)}else if(t=gt.read(arguments),!this._radius)this._radius=t.clone();else{if(this._radius.equals(t))return;if(this._radius.set(t),i==="rectangle"){var n=gt.max(this._size,t.multiply(2));this._size.set(n)}else i==="ellipse"&&this._size._set(t.width*2,t.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var i=new Xt[T.capitalize(this._type)]({center:new Z,size:this._size,radius:this._radius,insert:!1});return i.copyAttributes(this),Bt.settings.applyMatrix&&i.setApplyMatrix(!0),(t===A||t)&&i.insertAbove(this),i},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,i,n,a){var u=this._style,l=u.hasFill(),c=u.hasStroke(),f=i.dontFinish||i.clip,d=!a;if(l||c||f){var p=this._type,y=this._radius,P=p==="circle";if(i.dontStart||t.beginPath(),d&&P)t.arc(0,0,y,0,Math.PI*2,!0);else{var m=P?y:y.width,g=P?y:y.height,O=this._size,C=O.width,L=O.height;if(d&&p==="rectangle"&&m===0&&g===0)t.rect(-C/2,-L/2,C,L);else{var w=C/2,x=L/2,v=1-.5522847498307936,b=m*v,E=g*v,M=[-w,-x+g,-w,-x+E,-w+b,-x,-w+m,-x,w-m,-x,w-b,-x,w,-x+E,w,-x+g,w,x-g,w,x-E,w-b,x,w-m,x,-w+m,x,-w+b,x,-w,x-E,-w,x-g];a&&a.transform(M,M,32),t.moveTo(M[0],M[1]),t.bezierCurveTo(M[2],M[3],M[4],M[5],M[6],M[7]),w!==m&&t.lineTo(M[8],M[9]),t.bezierCurveTo(M[10],M[11],M[12],M[13],M[14],M[15]),x!==g&&t.lineTo(M[16],M[17]),t.bezierCurveTo(M[18],M[19],M[20],M[21],M[22],M[23]),w!==m&&t.lineTo(M[24],M[25]),t.bezierCurveTo(M[26],M[27],M[28],M[29],M[30],M[31])}}t.closePath()}!f&&(l||c)&&(this._setStyles(t,i,n),l&&(t.fill(u.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),c&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,i){var n=new Ct(this._size).setCenter(0,0),a=this._style,u=i.stroke&&a.hasStroke()&&a.getStrokeWidth();return t&&(n=t._transformBounds(n)),u?n.expand(Xt._getStrokePadding(u,this._getStrokeMatrix(t,i))):n}},new function(){function t(n,a,u){var l=n._radius;if(!l.isZero())for(var c=n._size.divide(2),f=1;f<=4;f++){var d=new Z(f>1&&f<4?-1:1,f>2?-1:1),p=d.multiply(c),y=p.subtract(d.multiply(l)),P=new Ct(u?p.add(d.multiply(u)):p,y);if(P.contains(a))return{point:y,quadrant:f}}}function i(n,a,u,l){var c=n.divide(a);return(!l||c.isInQuadrant(l))&&c.subtract(c.normalize()).multiply(a).divide(u).length<=1}return{_contains:function n(a){if(this._type==="rectangle"){var u=t(this,a);return u?a.subtract(u.point).divide(this._radius).getLength()<=1:n.base.call(this,a)}else return a.divide(this.size).getLength()<=.5},_hitTestSelf:function n(a,u,l,c){var f=!1,d=this._style,p=u.stroke&&d.hasStroke(),y=u.fill&&d.hasFill();if(p||y){var P=this._type,m=this._radius,g=p?d.getStrokeWidth()/2:0,O=u._tolerancePadding.add(Xt._getStrokePadding(g,!d.getStrokeScaling()&&c));if(P==="rectangle"){var C=O.multiply(2),L=t(this,a,C);if(L)f=i(a.subtract(L.point),m,O,L.quadrant);else{var w=new Ct(this._size).setCenter(0,0),x=w.expand(C),v=w.expand(C.negate());f=x._containsPoint(a)&&!v._containsPoint(a)}}else f=i(a,m,O)}return f?new Ee(p?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(i,n,a,u,l){var c=T.create(pe.prototype);return c._type=i,c._size=a,c._radius=u,c._initialize(T.getNamed(l),n),c}return{Circle:function(){var i=arguments,n=Z.readNamed(i,"center"),a=T.readNamed(i,"radius");return t("circle",n,new gt(a*2),a,i)},Rectangle:function(){var i=arguments,n=Ct.readNamed(i,"rectangle"),a=gt.min(gt.readNamed(i,"radius"),n.getSize(!0).divide(2));return t("rectangle",n.getCenter(!0),n.getSize(!0),a,i)},Ellipse:function(){var i=arguments,n=pe._readEllipse(i),a=n.radius;return t("ellipse",n.center,a.multiply(2),a,i)},_readEllipse:function(i){var n,a;if(T.hasNamed(i,"radius"))n=Z.readNamed(i,"center"),a=gt.readNamed(i,"radius");else{var u=Ct.readNamed(i,"rectangle");n=u.getCenter(!0),a=u.getSize(!0).divide(2)}return{center:n,radius:a}}}}}),We=Nt.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(i,n){if(!this._initialize(i,n!==A&&Z.read(arguments))){var a,u=typeof i,l=u==="string"?Y.getElementById(i):u==="object"?i:null;if(l&&l!==Nt.NO_INSERT){if(l.getContext||l.naturalHeight!=null)a=l;else if(l){var c=gt.read(arguments);c.isZero()||(a=te.getCanvas(c))}}a?this.setImage(a):this.setSource(i)}this._size||(this._size=new gt,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var i=t._image,n=t._canvas;if(i)this._setImage(i);else if(n){var a=te.getCanvas(t._size);a.getContext("2d").drawImage(n,0,0),this._setImage(a)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new ae(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(t,i){var n=gt.read(arguments);if(n.equals(this._size))i&&this.clear();else if(n.width>0&&n.height>0){var a=!i&&this.getElement();this._setImage(te.getCanvas(n)),a&&this.getContext(!0).drawImage(a,0,0,n.width,n.height)}else this._canvas&&te.release(this._canvas),this._size=n.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||t.width===0&&t.height===0},getResolution:function(){var t=this._matrix,i=new Z(0,0).transform(t),n=new Z(1,0).transform(t).subtract(i),a=new Z(0,1).transform(t).subtract(i);return new gt(72/n.getLength(),72/a.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var i=this;function n(a){var u=i.getView(),l=a&&a.type||"load";u&&i.responds(l)&&(Bt=u._scope,i.emit(l,new je(a)))}this._setImage(t),this._loaded?setTimeout(n,0):t&&Ht.add(t,{load:function(a){i._setImage(t),n(a)},error:n})},_setImage:function(t){this._canvas&&te.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new gt(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=te.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch{te.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var i=new s.Image,n=this._crossOrigin;n&&(i.crossOrigin=n),t&&(i.src=t),this.setImage(i)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var i=this._image;i&&(i.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=typeof t=="string"?t:t?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=Ct.read(arguments),i=te.getContext(t.getSize());return i.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),i.canvas},getSubRaster:function(){var t=Ct.read(arguments),i=new We(Nt.NO_INSERT);return i._setImage(this.getSubCanvas(t)),i.translate(t.getCenter().subtract(this.getSize().divide(2))),i._matrix.prepend(this._matrix),i.insertAbove(this),i},toDataURL:function(){var t=this._image,i=t&&t.src;if(/^data:/.test(i))return i;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var i=Z.read(arguments,1);this.getContext(!0).drawImage(t,i.x,i.y)},getAverageColor:function(t){var i,n;if(t?t instanceof Ye?(n=t,i=t.getBounds()):typeof t=="object"&&("width"in t?i=new Ct(t):"x"in t&&(i=new Ct(t.x-.5,t.y-.5,1,1))):i=this.getBounds(),!i)return null;var a=32,u=Math.min(i.width,a),l=Math.min(i.height,a),c=We._sampleContext;c?c.clearRect(0,0,a+1,a+1):c=We._sampleContext=te.getContext(new gt(a)),c.save();var f=new Wt().scale(u/i.width,l/i.height).translate(-i.x,-i.y);f.applyToContext(c),n&&n.draw(c,new T({clip:!0,matrices:[f]})),this._matrix.applyToContext(c);var d=this.getElement(),p=this._size;d&&c.drawImage(d,-p.width/2,-p.height/2),c.restore();for(var y=c.getImageData(.5,.5,Math.ceil(u),Math.ceil(l)).data,P=[0,0,0],m=0,g=0,O=y.length;g<O;g+=4){var C=y[g+3];m+=C,C/=255,P[0]+=y[g]*C,P[1]+=y[g+1]*C,P[2]+=y[g+2]*C}for(var g=0;g<3;g++)P[g]/=m;return m?$t.read(P):null},getPixel:function(){var t=Z.read(arguments),i=this.getContext().getImageData(t.x,t.y,1,1).data;return new $t("rgb",[i[0]/255,i[1]/255,i[2]/255],i[3]/255)},setPixel:function(){var t=arguments,i=Z.read(t),n=$t.read(t),a=n._convert("rgb"),u=n._alpha,l=this.getContext(!0),c=l.createImageData(1,1),f=c.data;f[0]=a[0]*255,f[1]=a[1]*255,f[2]=a[2]*255,f[3]=u!=null?u*255:255,l.putImageData(c,i.x,i.y)},clear:function(){var t=this._size;this.getContext(!0).clearRect(0,0,t.width+1,t.height+1)},createImageData:function(){var t=gt.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=Ct.read(arguments);return t.isEmpty()&&(t=new Ct(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},putImageData:function(t){var i=Z.read(arguments,1);this.getContext(!0).putImageData(t,i.x,i.y)},setImageData:function(t){this.setSize(t),this.getContext(!0).putImageData(t,0,0)},_getBounds:function(t,i){var n=new Ct(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var i=this;return new Ee("pixel",i,{offset:t.add(i._size.divide(2)).round(),color:{get:function(){return i.getPixel(this.offset)}}})}},_draw:function(t,i,n){var a=this.getElement();if(a&&a.width>0&&a.height>0){t.globalAlpha=Et.clamp(this._opacity,0,1),this._setStyles(t,i,n);var u=this._smoothing,l=u==="off";Jt.setPrefixed(t,l?"imageSmoothingEnabled":"imageSmoothingQuality",l?!1:u),t.drawImage(a,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),ti=Nt.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(i,n){this._initialize(i,n!==A&&Z.read(arguments,1))||this.setDefinition(i instanceof be?i:new be(i))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,i){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),i)},_hitTestSelf:function(t,i,n){var a=i.extend({all:!1}),u=this._definition._item._hitTest(t,a,n);return u&&(u.item=this),u},_draw:function(t,i){this._definition._item.draw(t,i)}}),be=T.extend({_class:"SymbolDefinition",initialize:function(i,n){this._id=ge.get(),this.project=Bt.project,i&&this.setItem(i,n)},_serialize:function(t,i){return i.add(this,function(){return T.serialize([this._class,this._item],t,!1,i)})},_changed:function(t){t&8&&Nt._clearBoundsCache(this),t&1&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,i){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),i||t.setPosition(new Z),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new ti(this,t)},clone:function(){return new be(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),Ee=T.extend({_class:"HitResult",initialize:function(i,n,a){this.type=i,this.item=n,a&&this.inject(a)},statics:{getOptions:function(t){var i=t&&T.read(t);return new T({type:null,tolerance:Bt.settings.hitTolerance,fill:!i,stroke:!i,segments:!i,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},i)}}}),Pt=T.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(i,n,a,u,l,c){var f=arguments.length,d,p,y,P;f>0&&(i==null||typeof i=="object"?f===1&&i&&"point"in i?(d=i.point,p=i.handleIn,y=i.handleOut,P=i.selection):(d=i,p=n,y=a,P=u):(d=[i,n],p=a!==A?[a,u]:null,y=l!==A?[l,c]:null)),new ei(d,this,"_point"),new ei(p,this,"_handleIn"),new ei(y,this,"_handleOut"),P&&this.setSelection(P)},_serialize:function(t,i){var n=this._point,a=this._selection,u=a||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return a&&u.push(a),T.serialize(u,t,!0,i)},_changed:function(t){var i=this._path;if(i){var n=i._curves,a=this._index,u;n&&((!t||t===this._point||t===this._handleIn)&&(u=a>0?n[a-1]:i._closed?n[n.length-1]:null)&&u._changed(),(!t||t===this._point||t===this._handleOut)&&(u=n[a])&&u._changed()),i._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(Z.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(Z.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(Z.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,i=this._handleOut;return!t.isZero()&&!i.isZero()&&t.isCollinear(i)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var i=this._selection,n=this._path;this._selection=t=t||0,n&&t!==i&&(n._updateSelection(this,i,t),n._changed(257))},_changeSelection:function(t,i){var n=this._selection;this.setSelection(i?n|t:n&~t)},isSelected:function(){return!!(this._selection&7)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==A?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,i=this._index;return t?(i>0&&!t._closed&&i===t._segments.length-1&&i--,t.getCurves()[i]||null):null},getLocation:function(){var t=this.getCurve();return t?new Se(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,i,n){var a=t||{},u=a.type,l=a.factor,c=this.getPrevious(),f=this.getNext(),d=(c||this)._point,p=this._point,y=(f||this)._point,P=d.getDistance(p),m=p.getDistance(y);if(!u||u==="catmull-rom"){var g=l===A?.5:l,O=Math.pow(P,g),C=O*O,L=Math.pow(m,g),w=L*L;if(!i&&c){var x=2*w+3*L*O+C,v=3*L*(L+O);this.setHandleIn(v!==0?new Z((w*d._x+x*p._x-C*y._x)/v-p._x,(w*d._y+x*p._y-C*y._y)/v-p._y):new Z)}if(!n&&f){var x=2*C+3*O*L+w,v=3*O*(O+L);this.setHandleOut(v!==0?new Z((C*y._x+x*p._x-w*d._x)/v-p._x,(C*y._y+x*p._y-w*d._y)/v-p._y):new Z)}}else if(u==="geometric"){if(c&&f){var b=d.subtract(y),E=l===A?.4:l,M=E*P/(P+m);i||this.setHandleIn(b.multiply(M)),n||this.setHandleOut(b.multiply(M-E))}}else throw new Error("Smoothing method '"+u+"' not supported.")},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,i=this._handleOut,n=t.clone();t.set(i),i.set(n)},reversed:function(){return new Pt(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new Pt(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,i,n){var a=1-n,u=n,l=t._point,c=i._point,f=t._handleIn,d=i._handleIn,p=i._handleOut,y=t._handleOut;this._point._set(a*l._x+u*c._x,a*l._y+u*c._y,!0),this._handleIn._set(a*f._x+u*d._x,a*f._y+u*d._y,!0),this._handleOut._set(a*y._x+u*p._x,a*y._y+u*p._y,!0),this._changed()},_transformCoordinates:function(t,i,n){var a=this._point,u=!n||!this._handleIn.isZero()?this._handleIn:null,l=!n||!this._handleOut.isZero()?this._handleOut:null,c=a._x,f=a._y,d=2;return i[0]=c,i[1]=f,u&&(i[d++]=u._x+c,i[d++]=u._y+f),l&&(i[d++]=l._x+c,i[d++]=l._y+f),t&&(t._transformCoordinates(i,i,d/2),c=i[0],f=i[1],n?(a._x=c,a._y=f,d=2,u&&(u._x=i[d++]-c,u._y=i[d++]-f),l&&(l._x=i[d++]-c,l._y=i[d++]-f)):(u||(i[d++]=c,i[d++]=f),l||(i[d++]=c,i[d++]=f))),i}}),ei=Z.extend({initialize:function(i,n,a){var u,l,c;if(!i)u=l=0;else if((u=i[0])!==A)l=i[1];else{var f=i;(u=f.x)===A&&(f=Z.read(arguments),u=f.x),l=f.y,c=f.selected}this._x=u,this._y=l,this._owner=n,n[a]=this,c&&this.setSelected(!0)},_set:function(t,i){return this._x=t,this._y=i,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=Et.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),ct=T.extend({_class:"Curve",beans:!0,initialize:function(i,n,a,u,l,c,f,d){var p=arguments.length,y,P,m,g,O,C;p===3?(this._path=i,y=n,P=a):p?p===1?"segment1"in i?(y=new Pt(i.segment1),P=new Pt(i.segment2)):"point1"in i?(m=i.point1,O=i.handle1,C=i.handle2,g=i.point2):Array.isArray(i)&&(m=[i[0],i[1]],g=[i[6],i[7]],O=[i[2]-i[0],i[3]-i[1]],C=[i[4]-i[6],i[5]-i[7]]):p===2?(y=new Pt(i),P=new Pt(n)):p===4?(m=i,O=n,C=a,g=u):p===8&&(m=[i,n],g=[f,d],O=[a-i,u-n],C=[l-f,c-d]):(y=new Pt,P=new Pt),this._segment1=y||new Pt(m,null,O),this._segment2=P||new Pt(g,C,null)},_serialize:function(t,i){return T.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,i)},_changed:function(){this._length=this._bounds=A},clone:function(){return new ct(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return ct.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var i=this._segment2,n=i._handleOut;t=i.remove(),t&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(Z.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(Z.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(Z.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(Z.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return ct.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),i=[],n=0;n<8;n+=2)i.push(new Z(t[n],t[n+1]));return i}},{getLength:function(){return this._length==null&&(this._length=ct.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ct.getArea(this.getValues())},getLine:function(){return new oe(this._segment1._point,this._segment2._point)},getPart:function(t,i){return new ct(ct.getPart(this.getValues(),t,i))},getPartLength:function(t,i){return ct.getLength(this.getValues(),t,i)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,i){var n=1e-8,a=1-n,u=null;if(t>=n&&t<=a){var l=ct.subdivide(this.getValues(),t),c=l[0],f=l[1],d=i||this.hasHandles(),p=this._segment1,y=this._segment2,P=this._path;d&&(p._handleOut._set(c[2]-c[0],c[3]-c[1]),y._handleIn._set(f[4]-f[6],f[5]-f[7]));var m=c[6],g=c[7],O=new Pt(new Z(m,g),d&&new Z(c[4]-m,c[5]-g),d&&new Z(f[2]-m,f[3]-g));P?(P.insert(p._index+1,O),u=this.getNext()):(this._segment2=O,this._changed(),u=new ct(O,y))}return u},splitAt:function(t){var i=this._path;return i?i.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,i){return this.divideAtTime(t===A?.5:i?t:this.getTimeAt(t))},split:function(t,i){return this.splitAtTime(t===A?.5:i?t:this.getTimeAt(t))},reversed:function(){return new ct(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,i,n,a){var u=t._point,l=t._handleOut,c=i._handleIn,f=i._point,d=u.x,p=u.y,y=f.x,P=f.y,m=a?[d,p,d,p,y,P,y,P]:[d,p,d+l._x,p+l._y,y+c._x,P+c._y,y,P];return n&&n._transformCoordinates(m,m,4),m},subdivide:function(t,i){var n=t[0],a=t[1],u=t[2],l=t[3],c=t[4],f=t[5],d=t[6],p=t[7];i===A&&(i=.5);var y=1-i,P=y*n+i*u,m=y*a+i*l,g=y*u+i*c,O=y*l+i*f,C=y*c+i*d,L=y*f+i*p,w=y*P+i*g,x=y*m+i*O,v=y*g+i*C,b=y*O+i*L,E=y*w+i*v,M=y*x+i*b;return[[n,a,P,m,w,x,E,M],[E,M,v,b,C,L,d,p]]},getMonoCurves:function(t,i){var n=[],a=i?0:1,u=t[a+0],l=t[a+2],c=t[a+4],f=t[a+6];if(u>=l==l>=c&&l>=c==c>=f||ct.isStraight(t))n.push(t);else{var d=3*(l-c)-u+f,p=2*(u+c)-4*l,y=l-u,P=1e-8,m=1-P,g=[],O=Et.solveQuadratic(d,p,y,g,P,m);if(!O)n.push(t);else{g.sort();var C=g[0],L=ct.subdivide(t,C);n.push(L[0]),O>1&&(C=(g[1]-C)/(1-C),L=ct.subdivide(L[1],C),n.push(L[0])),n.push(L[1])}}return n},solveCubic:function(t,i,n,a,u,l){var c=t[i],f=t[i+2],d=t[i+4],p=t[i+6],y=0;if(!(c<n&&p<n&&f<n&&d<n||c>n&&p>n&&f>n&&d>n)){var P=3*(f-c),m=3*(d-f)-P,g=p-c-P-m;y=Et.solveCubic(g,m,P,c-n,a,u,l)}return y},getTimeOf:function(t,i){var n=new Z(t[0],t[1]),a=new Z(t[6],t[7]),u=1e-12,l=1e-7,c=i.isClose(n,u)?0:i.isClose(a,u)?1:null;if(c===null)for(var f=[i.x,i.y],d=[],p=0;p<2;p++)for(var y=ct.solveCubic(t,p,f[p],d,0,1),P=0;P<y;P++){var m=d[P];if(i.isClose(ct.getPoint(t,m),l))return m}return i.isClose(n,l)?0:i.isClose(a,l)?1:null},getNearestTime:function(t,i){if(ct.isStraight(t)){var n=t[0],a=t[1],u=t[6],l=t[7],c=u-n,f=l-a,d=c*c+f*f;if(d===0)return 0;var p=((i.x-n)*c+(i.y-a)*f)/d;return p<1e-12?0:p>.999999999999?1:ct.getTimeOf(t,new Z(n+p*c,a+p*f))}var y=100,P=1/0,m=0;function g(L){if(L>=0&&L<=1){var w=i.getDistance(ct.getPoint(t,L),!0);if(w<P)return P=w,m=L,!0}}for(var O=0;O<=y;O++)g(O/y);for(var C=1/(y*2);C>1e-8;)!g(m-C)&&!g(m+C)&&(C/=2);return m},getPart:function(t,i,n){var a=i>n;if(a){var u=i;i=n,n=u}return i>0&&(t=ct.subdivide(t,i)[1]),n<1&&(t=ct.subdivide(t,(n-i)/(1-i))[0]),a?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,i){var n=t[0],a=t[1],u=t[2],l=t[3],c=t[4],f=t[5],d=t[6],p=t[7],y=3*u-2*n-d,P=3*l-2*a-p,m=3*c-2*d-n,g=3*f-2*p-a;return Math.max(y*y,m*m)+Math.max(P*P,g*g)<=16*i*i},getArea:function(t){var i=t[0],n=t[1],a=t[2],u=t[3],l=t[4],c=t[5],f=t[6],d=t[7];return 3*((d-n)*(a+l)-(f-i)*(u+c)+u*(i-l)-a*(n-c)+d*(l+i/3)-f*(c+n/3))/20},getBounds:function(t){for(var i=t.slice(0,2),n=i.slice(),a=[0,0],u=0;u<2;u++)ct._addBounds(t[u],t[u+2],t[u+4],t[u+6],u,0,i,n,a);return new Ct(i[0],i[1],n[0]-i[0],n[1]-i[1])},_addBounds:function(t,i,n,a,u,l,c,f,d){function p(E,M){var S=E-M,B=E+M;S<c[u]&&(c[u]=S),B>f[u]&&(f[u]=B)}l/=2;var y=c[u]+l,P=f[u]-l;if(t<y||i<y||n<y||a<y||t>P||i>P||n>P||a>P)if(i<t!=i<a&&n<t!=n<a)p(t,0),p(a,0);else{var m=3*(i-n)-t+a,g=2*(t+n)-4*i,O=i-t,C=Et.solveQuadratic(m,g,O,d),L=1e-8,w=1-L;p(a,0);for(var x=0;x<C;x++){var v=d[x],b=1-v;L<=v&&v<=w&&p(b*b*b*t+3*b*b*v*i+3*b*v*v*n+v*v*v*a,l)}}}}},T.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var i=this._bounds[t];return i||(i=this._bounds[t]=Xt[t]([this._segment1,this._segment2],!1,this._path)),i.clone()}},{}),T.each({isStraight:function(t,i,n,a){if(i.isZero()&&n.isZero())return!0;var u=a.subtract(t);if(u.isZero())return!1;if(u.isCollinear(i)&&u.isCollinear(n)){var l=new oe(t,a),c=1e-7;if(l.getDistance(t.add(i))<c&&l.getDistance(a.add(n))<c){var f=u.dot(u),d=u.dot(i)/f,p=u.dot(n)/f;return d>=0&&d<=1&&p<=0&&p>=-1}}return!1},isLinear:function(t,i,n,a){var u=a.subtract(t).divide(3);return i.equals(u)&&n.negate().equals(u)}},function(t,i){this[i]=function(n){var a=this._segment1,u=this._segment2;return t(a._point,a._handleOut,u._handleIn,u._point,n)},this.statics[i]=function(n,a){var u=n[0],l=n[1],c=n[6],f=n[7];return t(new Z(u,l),new Z(n[2]-u,n[3]-l),new Z(n[4]-c,n[5]-f),new Z(c,f),a)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,i){return this.getLocationAtTime(i?t:this.getTimeAt(t))},getLocationAtTime:function(t){return t!=null&&t>=0&&t<=1?new Se(this,t):null},getTimeAt:function(t,i){return ct.getTimeAt(this.getValues(),t,i)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=Z.read(arguments);return t.isZero()?[]:ct.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(Z.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return ct.getTimeOf(this.getValues(),Z.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=Z.read(arguments),i=this.getValues(),n=ct.getNearestTime(i,t),a=ct.getPoint(i,n);return new Se(this,n,a,null,t.getDistance(a))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return T.each(t,function(i){this[i+"At"]=function(n,a){var u=this.getValues();return ct[i](u,a?n:ct.getTimeAt(u,n))},this[i+"AtTime"]=function(n){return ct[i](this.getValues(),n)}},{statics:{_evaluateMethods:t}})},new function(){function t(a){var u=a[0],l=a[1],c=a[2],f=a[3],d=a[4],p=a[5],y=a[6],P=a[7],m=9*(c-d)+3*(y-u),g=6*(u+d)-12*c,O=3*(c-u),C=9*(f-p)+3*(P-l),L=6*(l+p)-12*f,w=3*(f-l);return function(x){var v=(m*x+g)*x+O,b=(C*x+L)*x+w;return Math.sqrt(v*v+b*b)}}function i(a,u){return Math.max(2,Math.min(16,Math.ceil(Math.abs(u-a)*32)))}function n(a,u,l,c){if(u==null||u<0||u>1)return null;var f=a[0],d=a[1],p=a[2],y=a[3],P=a[4],m=a[5],g=a[6],O=a[7],C=Et.isZero;C(p-f)&&C(y-d)&&(p=f,y=d),C(P-g)&&C(m-O)&&(P=g,m=O);var L=3*(p-f),w=3*(P-p)-L,x=g-f-L-w,v=3*(y-d),b=3*(m-y)-v,E=O-d-v-b,M,S;if(l===0)M=u===0?f:u===1?g:((x*u+w)*u+L)*u+f,S=u===0?d:u===1?O:((E*u+b)*u+v)*u+d;else{var B=1e-8,D=1-B;if(u<B?(M=L,S=v):u>D?(M=3*(g-P),S=3*(O-m)):(M=(3*x*u+2*w)*u+L,S=(3*E*u+2*b)*u+v),c){M===0&&S===0&&(u<B||u>D)&&(M=P-p,S=m-y);var X=Math.sqrt(M*M+S*S);X&&(M/=X,S/=X)}if(l===3){var P=6*x*u+2*w,m=6*E*u+2*b,W=Math.pow(M*M+S*S,3/2);M=W!==0?(M*m-S*P)/W:0,S=0}}return l===2?new Z(S,-M):new Z(M,S)}return{statics:{classify:function(a){var u=a[0],l=a[1],c=a[2],f=a[3],d=a[4],p=a[5],y=a[6],P=a[7],m=u*(P-p)+l*(d-y)+y*p-P*d,g=c*(l-P)+f*(y-u)+u*P-l*y,O=d*(f-l)+p*(u-c)+c*l-f*u,C=3*O,L=C-g,w=L-g+m,x=Math.sqrt(w*w+L*L+C*C),v=x!==0?1/x:0,b=Et.isZero,E="serpentine";w*=v,L*=v,C*=v;function M(X,W,k){var V=W!==A,H=V&&W>0&&W<1,J=V&&k>0&&k<1;return V&&(!(H||J)||X==="loop"&&!(H&&J))&&(X="arch",H=J=!1),{type:X,roots:H||J?H&&J?W<k?[W,k]:[k,W]:[H?W:k]:null}}if(b(w))return b(L)?M(b(C)?"line":"quadratic"):M(E,C/(3*L));var S=3*L*L-4*w*C;if(b(S))return M("cusp",L/(2*w));var B=S>0?Math.sqrt(S/3):Math.sqrt(-S),D=2*w;return M(S>0?E:"loop",(L+B)/D,(L-B)/D)},getLength:function(a,u,l,c){if(u===A&&(u=0),l===A&&(l=1),ct.isStraight(a)){var f=a;l<1&&(f=ct.subdivide(f,l)[0],u/=l),u>0&&(f=ct.subdivide(f,u)[1]);var d=f[6]-f[0],p=f[7]-f[1];return Math.sqrt(d*d+p*p)}return Et.integrate(c||t(a),u,l,i(u,l))},getTimeAt:function(a,u,l){if(l===A&&(l=u<0?1:0),u===0)return l;var c=Math.abs,f=1e-12,d=u>0,p=d?l:0,y=d?1:l,P=t(a),m=ct.getLength(a,p,y,P),g=c(u)-m;if(c(g)<f)return d?y:p;if(g>f)return null;var O=u/m,C=0;function L(w){return C+=Et.integrate(P,l,w,i(l,w)),l=w,C-u}return Et.findRoot(L,P,l+O,p,y,32,1e-12)},getPoint:function(a,u){return n(a,u,0,!1)},getTangent:function(a,u){return n(a,u,1,!0)},getWeightedTangent:function(a,u){return n(a,u,1,!1)},getNormal:function(a,u){return n(a,u,2,!0)},getWeightedNormal:function(a,u){return n(a,u,2,!1)},getCurvature:function(a,u){return n(a,u,3,!1).x},getPeaks:function(a){var u=a[0],l=a[1],c=a[2],f=a[3],d=a[4],p=a[5],y=a[6],P=a[7],m=-u+3*c-3*d+y,g=3*u-6*c+3*d,O=-3*u+3*c,C=-l+3*f-3*p+P,L=3*l-6*f+3*p,w=-3*l+3*f,x=1e-8,v=1-x,b=[];return Et.solveCubic(9*(m*m+C*C),9*(m*g+L*C),2*(g*g+L*L)+3*(O*m+w*C),O*g+L*w,b,x,v),b.sort()}}}},new function(){function t(g,O,C,L,w,x,v){var b=!v&&C.getPrevious()===w,E=!v&&C!==w&&C.getNext()===w,M=1e-8,S=1-M;if(L!==null&&L>=(b?M:0)&&L<=(E?S:1)&&x!==null&&x>=(E?M:0)&&x<=(b?S:1)){var B=new Se(C,L,null,v),D=new Se(w,x,null,v);B._intersection=D,D._intersection=B,(!O||O(B))&&Se.insert(g,B,!0)}}function i(g,O,C,L,w,x,v,b,E,M,S,B,D){if(++E>=4096||++b>=40)return E;var X=1e-9,W=O[0],k=O[1],V=O[6],H=O[7],J=oe.getSignedDistance,G=J(W,k,V,H,O[2],O[3]),Q=J(W,k,V,H,O[4],O[5]),st=G*Q>0?3/4:4/9,ut=st*Math.min(0,G,Q),ht=st*Math.max(0,G,Q),pt=J(W,k,V,H,g[0],g[1]),et=J(W,k,V,H,g[2],g[3]),nt=J(W,k,V,H,g[4],g[5]),ft=J(W,k,V,H,g[6],g[7]),vt=n(pt,et,nt,ft),_t=vt[0],wt=vt[1],yt,St;if(G===0&&Q===0&&pt===0&&et===0&&nt===0&&ft===0||(yt=a(_t,wt,ut,ht))==null||(St=a(_t.reverse(),wt.reverse(),ut,ht))==null)return E;var Mt=M+(S-M)*yt,It=M+(S-M)*St;if(Math.max(D-B,It-Mt)<X){var ee=(Mt+It)/2,ie=(B+D)/2;t(w,x,v?L:C,v?ie:ee,v?C:L,v?ee:ie)}else{g=ct.getPart(g,yt,St);var se=D-B;if(St-yt>.8)if(It-Mt>se){var jt=ct.subdivide(g,.5),ee=(Mt+It)/2;E=i(O,jt[0],L,C,w,x,!v,b,E,B,D,Mt,ee),E=i(O,jt[1],L,C,w,x,!v,b,E,B,D,ee,It)}else{var jt=ct.subdivide(O,.5),ie=(B+D)/2;E=i(jt[0],g,L,C,w,x,!v,b,E,B,ie,Mt,It),E=i(jt[1],g,L,C,w,x,!v,b,E,ie,D,Mt,It)}else se===0||se>=X?E=i(O,g,L,C,w,x,!v,b,E,B,D,Mt,It):E=i(g,O,C,L,w,x,v,b,E,Mt,It,B,D)}return E}function n(g,O,C,L){var w=[0,g],x=[1/3,O],v=[2/3,C],b=[1,L],E=O-(2*g+L)/3,M=C-(g+2*L)/3,S;if(E*M<0)S=[[w,x,b],[w,v,b]];else{var B=E/M;S=[B>=2?[w,x,b]:B<=.5?[w,v,b]:[w,x,v,b],[w,b]]}return(E||M)<0?S.reverse():S}function a(g,O,C,L){return g[0][1]<C?u(g,!0,C):O[0][1]>L?u(O,!1,L):g[0][0]}function u(g,O,C){for(var L=g[0][0],w=g[0][1],x=1,v=g.length;x<v;x++){var b=g[x][0],E=g[x][1];if(O?E>=C:E<=C)return E===C?b:L+(C-w)*(b-L)/(E-w);L=b,w=E}return null}function l(g,O,C,L,w){var x=Et.isZero;if(x(L)&&x(w)){var v=ct.getTimeOf(g,new Z(O,C));return v===null?[]:[v]}for(var b=Math.atan2(-w,L),E=Math.sin(b),M=Math.cos(b),S=[],B=[],D=0;D<8;D+=2){var X=g[D]-O,W=g[D+1]-C;S.push(X*M-W*E,X*E+W*M)}return ct.solveCubic(S,1,0,B,0,1),B}function c(g,O,C,L,w,x,v){for(var b=O[0],E=O[1],M=O[6],S=O[7],B=l(g,b,E,M-b,S-E),D=0,X=B.length;D<X;D++){var W=B[D],k=ct.getPoint(g,W),V=ct.getTimeOf(O,k);V!==null&&t(w,x,v?L:C,v?V:W,v?C:L,v?W:V)}}function f(g,O,C,L,w,x){var v=oe.intersect(g[0],g[1],g[6],g[7],O[0],O[1],O[6],O[7]);v&&t(w,x,C,ct.getTimeOf(g,v),L,ct.getTimeOf(O,v))}function d(g,O,C,L,w,x){var v=1e-12,b=Math.min,E=Math.max;if(E(g[0],g[2],g[4],g[6])+v>b(O[0],O[2],O[4],O[6])&&b(g[0],g[2],g[4],g[6])-v<E(O[0],O[2],O[4],O[6])&&E(g[1],g[3],g[5],g[7])+v>b(O[1],O[3],O[5],O[7])&&b(g[1],g[3],g[5],g[7])-v<E(O[1],O[3],O[5],O[7])){var M=P(g,O);if(M)for(var S=0;S<2;S++){var B=M[S];t(w,x,C,B[0],L,B[1],!0)}else{var D=ct.isStraight(g),X=ct.isStraight(O),W=D&&X,k=D&&!X,V=w.length;if((W?f:D||X?c:i)(k?O:g,k?g:O,k?L:C,k?C:L,w,x,k,0,0,0,1,0,1),!W||w.length===V)for(var S=0;S<4;S++){var H=S>>1,J=S&1,G=H*6,Q=J*6,st=new Z(g[G],g[G+1]),ut=new Z(O[Q],O[Q+1]);st.isClose(ut,v)&&t(w,x,C,H,L,J)}}}return w}function p(g,O,C,L){var w=ct.classify(g);if(w.type==="loop"){var x=w.roots;t(C,L,O,x[0],O,x[1])}return C}function y(g,O,C,L,w,x){var v=1e-7,b=!O;b&&(O=g);for(var E=g.length,M=O.length,S=new Array(E),B=b?S:new Array(M),D=[],X=0;X<E;X++)S[X]=g[X].getValues(L);if(!b)for(var X=0;X<M;X++)B[X]=O[X].getValues(w);for(var W=Ft.findCurveBoundsCollisions(S,B,v),k=0;k<E;k++){var V=g[k],H=S[k];b&&p(H,V,D,C);var J=W[k];if(J)for(var G=0;G<J.length;G++){if(x&&D.length)return D;var Q=J[G];if(!b||Q>k){var st=O[Q],ut=B[Q];d(H,ut,V,st,D,C)}}}return D}function P(g,O){function C(ft){var vt=ft[6]-ft[0],_t=ft[7]-ft[1];return vt*vt+_t*_t}var L=Math.abs,w=oe.getDistance,x=1e-8,v=1e-7,b=ct.isStraight(g),E=ct.isStraight(O),M=b&&E,S=C(g)<C(O),B=S?O:g,D=S?g:O,X=B[0],W=B[1],k=B[6]-X,V=B[7]-W;if(w(X,W,k,V,D[0],D[1],!0)<v&&w(X,W,k,V,D[6],D[7],!0)<v)!M&&w(X,W,k,V,B[2],B[3],!0)<v&&w(X,W,k,V,B[4],B[5],!0)<v&&w(X,W,k,V,D[2],D[3],!0)<v&&w(X,W,k,V,D[4],D[5],!0)<v&&(b=E=M=!0);else if(M)return null;if(b^E)return null;for(var H=[g,O],J=[],G=0;G<4&&J.length<2;G++){var Q=G&1,st=Q^1,ut=G>>1,ht=ct.getTimeOf(H[Q],new Z(H[st][ut?6:0],H[st][ut?7:1]));if(ht!=null){var pt=Q?[ut,ht]:[ht,ut];(!J.length||L(pt[0]-J[0][0])>x&&L(pt[1]-J[0][1])>x)&&J.push(pt)}if(G>2&&!J.length)break}if(J.length!==2)J=null;else if(!M){var et=ct.getPart(g,J[0][0],J[1][0]),nt=ct.getPart(O,J[0][1],J[1][1]);(L(nt[2]-et[2])>v||L(nt[3]-et[3])>v||L(nt[4]-et[4])>v||L(nt[5]-et[5])>v)&&(J=null)}return J}function m(g,O){var C=g[0],L=g[1],w=g[2],x=g[3],v=g[4],b=g[5],E=g[6],M=g[7],S=O.normalize(),B=S.x,D=S.y,X=3*E-9*v+9*w-3*C,W=3*M-9*b+9*x-3*L,k=6*v-12*w+6*C,V=6*b-12*x+6*L,H=3*w-3*C,J=3*x-3*L,G=2*X*D-2*W*B,Q=[];if(Math.abs(G)<Et.CURVETIME_EPSILON){var st=X*J-W*H,G=X*V-W*k;if(G!=0){var ut=-st/G;ut>=0&&ut<=1&&Q.push(ut)}}else{var ht=(k*k-4*X*H)*D*D+(-2*k*V+4*W*H+4*X*J)*B*D+(V*V-4*W*J)*B*B,pt=k*D-V*B;if(ht>=0&&G!=0){var et=Math.sqrt(ht),nt=-(pt+et)/G,ft=(-pt+et)/G;nt>=0&&nt<=1&&Q.push(nt),ft>=0&&ft<=1&&Q.push(ft)}}return Q}return{getIntersections:function(g){var O=this.getValues(),C=g&&g!==this&&g.getValues();return C?d(O,C,this,g,[]):p(O,this,[])},statics:{getOverlaps:P,getIntersections:y,getCurveLineIntersections:l,getTimesWithTangent:m}}}),Se=T.extend({_class:"CurveLocation",initialize:function(i,n,a,u,l){if(n>=.99999999){var c=i.getNext();c&&(n=0,i=c)}this._setCurve(i),this._time=n,this._point=a||i.getPointAtTime(n),this._overlap=u,this._distance=l,this._intersection=this._next=this._previous=null},_setPath:function(t){this._path=t,this._version=t?t._version:0},_setCurve:function(t){this._setPath(t._path),this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){var i=t.getCurve();i?this._setCurve(i):(this._setPath(t._path),this._segment1=t,this._segment2=null),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var i=this.getCurve(),n=this.getTime();n===0?t=i._segment1:n===1?t=i._segment2:n!=null&&(t=i.getPartLength(0,n)<i.getPartLength(n,1)?i._segment1:i._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,i=this;t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function n(a){var u=a&&a.getCurve();if(u&&(i._time=u.getTimeOf(i._point))!=null)return i._setCurve(u),u}return this._curve||n(this._segment)||n(this._segment1)||n(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),i=this._time;return t&&i==null?this._time=t.getTimeOf(this._point):i},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(t==null){t=0;var i=this.getPath(),n=this.getIndex();if(i&&n!=null)for(var a=i.getCurves(),u=0;u<n;u++)t+=a[u].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(t==null){var i=this.getCurve(),n=this.getTime();this._curveOffset=t=n!=null&&i&&i.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),i=t&&t.divideAtTime(this.getTime());return i&&this._setSegment(i._segment1),i},split:function(){var t=this.getCurve(),i=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(i.getLastSegment()),n},equals:function(t,i){var n=this===t;if(!n&&t instanceof Se){var a=this.getCurve(),u=t.getCurve(),l=a._path,c=u._path;if(l===c){var f=Math.abs,d=1e-7,p=f(this.getOffset()-t.getOffset()),y=!i&&this._intersection,P=!i&&t._intersection;n=(p<d||l&&f(l.getLength()-p)<d)&&(!y&&!P||y&&P&&y.equals(P,!0))}}return n},toString:function(){var t=[],i=this.getPoint(),n=Ut.instance;i&&t.push("point: "+i);var a=this.getIndex();a!=null&&t.push("index: "+a);var u=this.getTime();return u!=null&&t.push("time: "+n.number(u)),this._distance!=null&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var i=this.getCurve(),n=t.getCurve();return!(i.isStraight()&&n.isStraight()&&i.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var i=this.getTime(),n=t.getTime(),a=1e-8,u=1-a,l=i>=a&&i<=u,c=n>=a&&n<=u;if(l&&c)return!this.isTouching();var f=this.getCurve(),d=f&&i<a?f.getPrevious():f,p=t.getCurve(),y=p&&n<a?p.getPrevious():p;if(i>u&&(f=f.getNext()),n>u&&(p=p.getNext()),!d||!f||!y||!p)return!1;var P=[];function m(B,D){var X=B.getValues(),W=ct.classify(X).roots||ct.getPeaks(X),k=W.length,V=ct.getLength(X,D&&k?W[k-1]:0,!D&&k?W[0]:1);P.push(k?V:V/32)}function g(B,D,X){return D<X?B>D&&B<X:B>D||B<X}l||(m(d,!0),m(f,!1)),c||(m(y,!0),m(p,!1));var O=this.getPoint(),C=Math.min.apply(Math,P),L=l?f.getTangentAtTime(i):f.getPointAt(C).subtract(O),w=l?L.negate():d.getPointAt(-C).subtract(O),x=c?p.getTangentAtTime(n):p.getPointAt(C).subtract(O),v=c?x.negate():y.getPointAt(-C).subtract(O),b=w.getAngle(),E=L.getAngle(),M=v.getAngle(),S=x.getAngle();return!!(l?g(b,M,S)^g(E,M,S)&&g(b,S,M)^g(E,S,M):g(M,b,E)^g(S,b,E)&&g(M,E,b)^g(S,E,b))},hasOverlap:function(){return!!this._overlap}},T.each(ct._evaluateMethods,function(t){var i=t+"At";this[t]=function(){var n=this.getCurve(),a=this.getTime();return a!=null&&n&&n[i](a,!0)}},{preserve:!0}),new function(){function t(i,n,a){var u=i.length,l=0,c=u-1;function f(O,C){for(var L=O+C;L>=-1&&L<=u;L+=C){var w=i[(L%u+u)%u];if(!n.getPoint().isClose(w.getPoint(),1e-7))break;if(n.equals(w))return w}return null}for(;l<=c;){var d=l+c>>>1,p=i[d],y;if(a&&(y=n.equals(p)?p:f(d,-1)||f(d,1)))return n._overlap&&(y._overlap=y._intersection._overlap=!0),y;var P=n.getPath(),m=p.getPath(),g=P!==m?P._id-m._id:n.getIndex()+n.getTime()-(p.getIndex()+p.getTime());g<0?c=d-1:l=d+1}return i.splice(l,0,n),n}return{statics:{insert:t,expand:function(i){for(var n=i.slice(),a=i.length-1;a>=0;a--)t(n,i[a]._intersection,!1);return n}}}}),Ye=Nt.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var i,n,a;if(T.isPlainObject(t)?(n=t.segments,i=t.pathData):Array.isArray(t)?n=t:typeof t=="string"&&(i=t),n){var u=n[0];a=u&&Array.isArray(u[0])}else i&&(a=(i.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(i));var l=a?Te:Xt;return new l(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var i=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),n,a=!1,u,l,c=new Z,f=new Z;function d(v,b){var E=+n[v];return a&&(E+=c[b]),E}function p(v){return new Z(d(v,"x"),d(v+1,"y"))}this.clear();for(var y=0,P=i&&i.length;y<P;y++){var m=i[y],g=m[0],O=g.toLowerCase();n=m.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var C=n&&n.length;switch(a=g===O,u==="z"&&!/[mz]/.test(O)&&this.moveTo(c),O){case"m":case"l":for(var L=O==="m",w=0;w<C;w+=2)this[L?"moveTo":"lineTo"](c=p(w)),L&&(f=c,L=!1);l=c;break;case"h":case"v":var x=O==="h"?"x":"y";c=c.clone();for(var w=0;w<C;w++)c[x]=d(w,x),this.lineTo(c);l=c;break;case"c":for(var w=0;w<C;w+=6)this.cubicCurveTo(p(w),l=p(w+2),c=p(w+4));break;case"s":for(var w=0;w<C;w+=4)this.cubicCurveTo(/[cs]/.test(u)?c.multiply(2).subtract(l):c,l=p(w),c=p(w+2)),u=O;break;case"q":for(var w=0;w<C;w+=4)this.quadraticCurveTo(l=p(w),c=p(w+2));break;case"t":for(var w=0;w<C;w+=2)this.quadraticCurveTo(l=/[qt]/.test(u)?c.multiply(2).subtract(l):c,c=p(w)),u=O;break;case"a":for(var w=0;w<C;w+=7)this.arcTo(c=p(w+5),new gt(+n[w],+n[w+1]),+n[w+2],+n[w+4],+n[w+3]);break;case"z":this.closePath(1e-12),c=f;break}u=O}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var i=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return i.onPath||!!(this.getFillRule()==="evenodd"?i.windingL&1||i.windingR&1:i.winding)},getIntersections:function(t,i,n,a){var u=this===t||!t,l=this._matrix._orNullIfIdentity(),c=u?l:(n||t._matrix)._orNullIfIdentity();return u||this.getBounds(l).intersects(t.getBounds(c),1e-12)?ct.getIntersections(this.getCurves(),!u&&t.getCurves(),i,l,c,a):[]},getCrossings:function(t){return this.getIntersections(t,function(i){return i.isCrossing()})},getNearestLocation:function(){for(var t=Z.read(arguments),i=this.getCurves(),n=1/0,a=null,u=0,l=i.length;u<l;u++){var c=i[u].getNearestLocation(t);c._distance<n&&(n=c._distance,a=c)}return a},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,i,n){var a=!this._children,u=a?"_segments":"_children",l=t[u],c=i[u],f=this[u];if(!l||!c||l.length!==c.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+i);var d=f.length,p=c.length;if(d<p)for(var y=a?Pt:Xt,P=d;P<p;P++)this.add(new y);else d>p&&this[a?"removeSegments":"removeChildren"](p,d);for(var P=0;P<p;P++)f[P].interpolate(l[P],c[P],n);a&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var i=!1;if(t){var n=this._children||[this],a=t._children?t._children.slice():[t],u=n.length,l=a.length,c=[],f=0;i=!0;for(var d=Ft.findItemBoundsCollisions(n,a,Et.GEOMETRIC_EPSILON),p=u-1;p>=0&&i;p--){var y=n[p];i=!1;var P=d[p];if(P)for(var m=P.length-1;m>=0&&!i;m--)y.compare(a[P[m]])&&(c[P[m]]||(c[P[m]]=!0,f++),i=!0)}i=i&&f===l}return i}}),Xt=Ye.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(i){this._closed=!1,this._segments=[],this._version=0;var n=arguments,a=Array.isArray(i)?typeof i[0]=="object"?i:n:i&&i.size===A&&(i.x!==A||i.point!==A)?n:null;a&&a.length>0?this.setSegments(a):(this._curves=A,this._segmentSelection=0,!a&&typeof i=="string"&&(this.setPathData(i),i=null)),this._initialize(!a&&i)},_equals:function(t){return this._closed===t._closed&&T.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(i){if(t.base.call(this,i),i&8){if(this._length=this._area=A,i&32)this._version++;else if(this._curves)for(var n=0,a=this._curves.length;n<a;n++)this._curves[n]._changed()}else i&64&&(this._bounds=A)},getStyle:function(){var t=this._parent;return(t instanceof Te?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var i=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=A,n){var a=t[n-1];typeof a=="boolean"&&(this.setClosed(a),n--),this._add(Pt.readList(t,0,{},n))}i&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,i=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var a=0;a<n;a++)t[a]=new ct(this,i[a],i[a+1]||i[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var i=this._curves.length=this._countCurves();t&&(this._curves[i-1]=new ct(this,this._segments[i-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,i){var n=this._segments,a=n.length,u=new Ut(i),l=new Array(6),c=!0,f,d,p,y,P,m,g,O,C=[];function L(x,v){if(x._transformCoordinates(t,l),f=l[0],d=l[1],c)C.push("M"+u.pair(f,d)),c=!1;else if(P=l[2],m=l[3],P===f&&m===d&&g===p&&O===y){if(!v){var b=f-p,E=d-y;C.push(b===0?"v"+u.number(E):E===0?"h"+u.number(b):"l"+u.pair(b,E))}}else C.push("c"+u.pair(g-p,O-y)+" "+u.pair(P-p,m-y)+" "+u.pair(f-p,d-y));p=f,y=d,g=l[4],O=l[5]}if(!a)return"";for(var w=0;w<a;w++)L(n[w]);return this._closed&&a>0&&(L(n[0],!0),C.push("z")),C.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var i=this._segments,n=new Array(6),a=0,u=i.length;a<u;a++)i[a]._transformCoordinates(t,n,!0);return!0},_add:function(t,c){for(var n=this._segments,a=this._curves,u=t.length,l=c==null,c=l?n.length:c,f=0;f<u;f++){var d=t[f];d._path&&(d=t[f]=d.clone()),d._path=this,d._index=c+f,d._selection&&this._updateSelection(d,0,d._selection)}if(l)T.push(n,t);else{n.splice.apply(n,[c,0].concat(t));for(var f=c+u,p=n.length;f<p;f++)n[f]._index=f}if(a){var y=this._countCurves(),P=c>0&&c+u-1===y?c-1:c,m=P,g=Math.min(P+u,y);t._curves&&(a.splice.apply(a,[P,0].concat(t._curves)),m+=t._curves.length);for(var f=m;f<g;f++)a.splice(f,0,new ct(this,null,null));this._adjustCurves(P,g)}return this._changed(41),t},_adjustCurves:function(t,i){for(var n=this._segments,a=this._curves,u,l=t;l<i;l++)u=a[l],u._path=this,u._segment1=n[l],u._segment2=n[l+1]||n[0],u._changed();(u=a[this._closed&&!t?n.length-1:t-1])&&(u._segment2=n[t]||n[0],u._changed()),(u=a[i])&&(u._segment1=n[i],u._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){var i=arguments;return i.length>1&&typeof t!="number"?this._add(Pt.readList(i)):this._add([Pt.read(i)])[0]},insert:function(t,i){var n=arguments;return n.length>2&&typeof i!="number"?this._add(Pt.readList(n,1),t):this._add([Pt.read(n,1)],t)[0]},addSegment:function(){return this._add([Pt.read(arguments)])[0]},insertSegment:function(t){return this._add([Pt.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(Pt.readList(t))},insertSegments:function(t,i){return this._add(Pt.readList(i),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,i,n){t=t||0,i=T.pick(i,this._segments.length);var a=this._segments,u=this._curves,l=a.length,c=a.splice(t,i-t),f=c.length;if(!f)return c;for(var d=0;d<f;d++){var p=c[d];p._selection&&this._updateSelection(p,p._selection,0),p._index=p._path=null}for(var d=t,y=a.length;d<y;d++)a[d]._index=d;if(u){for(var P=t>0&&i===l+(this._closed?1:0)?t-1:t,u=u.splice(P,f),d=u.length-1;d>=0;d--)u[d]._path=null;n&&(c._curves=u.slice(1)),this._adjustCurves(P,P)}return this._changed(41),c},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,i=0,n=t.length;i<n;i++)if(t[i].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,i=0,n=t.length;i<n;i++)t[i].clearHandles()},getLength:function(){if(this._length==null){for(var t=this.getCurves(),i=0,n=0,a=t.length;n<a;n++)i+=t[n].getLength();this._length=i}return this._length},getArea:function(){var t=this._area;if(t==null){var i=this._segments,n=this._closed;t=0;for(var a=0,u=i.length;a<u;a++){var l=a+1===u;t+=ct.getArea(ct.getValues(i[a],i[l?0:a+1],null,l&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===t*7},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(i){i&1||this._selectSegments(!1),t.base.call(this,i)},_selectSegments:function(t){var i=this._segments,n=i.length,a=t?7:0;this._segmentSelection=a*n;for(var u=0;u<n;u++)i[u]._selection=a},_updateSelection:function(t,i,n){t._selection=n;var a=this._segmentSelection+=n-i;a>0&&this.setSelected(!0)},divideAt:function(t){var i=this.getLocationAt(t),n;return i&&(n=i.getCurve().divideAt(i.getCurveOffset()))?n._segment1:null},splitAt:function(t){var i=this.getLocationAt(t),n=i&&i.index,a=i&&i.time,u=1e-8,l=1-u;a>l&&(n++,a=0);var c=this.getCurves();if(n>=0&&n<c.length){a>=u&&c[n++].divideAtTime(a);var f=this.removeSegments(n,this._segments.length,!0),d;return this._closed?(this.setClosed(!1),d=this):(d=new Xt(Nt.NO_INSERT),d.insertAbove(this),d.copyAttributes(this)),d._add(f,0),this.addSegment(f[0]),d}return null},split:function(t,i){var n,a=i===A?t:(n=this.getCurves()[t])&&n.getLocationAtTime(i);return a!=null?this.splitAt(a):null},join:function(t,i){var n=i||0;if(t&&t!==this){var a=t._segments,u=this.getLastSegment(),l=t.getLastSegment();if(!l)return this;u&&u._point.isClose(l._point,n)&&t.reverse();var c=t.getFirstSegment();if(u&&u._point.isClose(c._point,n))u.setHandleOut(c._handleOut),this._add(a.slice(1));else{var f=this.getFirstSegment();f&&f._point.isClose(c._point,n)&&t.reverse(),l=t.getLastSegment(),f&&f._point.isClose(l._point,n)?(f.setHandleIn(l._handleIn),this._add(a.slice(0,a.length-1),0)):this._add(a.slice())}t._closed&&this._add([a[0]]),t.remove()}var d=this.getFirstSegment(),p=this.getLastSegment();return d!==p&&d._point.isClose(p._point,n)&&(d.setHandleIn(p._handleIn),p.remove(),this.setClosed(!0)),this},reduce:function(t){for(var i=this.getCurves(),n=t&&t.simplify,a=n?1e-7:0,u=i.length-1;u>=0;u--){var l=i[u];!l.hasHandles()&&(!l.hasLength(a)||n&&l.isCollinear(l.getNext()))&&l.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,i=this._segments.length;t<i;t++){var n=this._segments[t],a=n._handleIn;n._handleIn=n._handleOut,n._handleOut=a,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var i=new pi(this,t||.25,256,!0),n=i.parts,a=n.length,u=[],l=0;l<a;l++)u.push(new Pt(n[l].curve.slice(0,2)));!this._closed&&a>0&&u.push(new Pt(n[a-1].curve.slice(6))),this.setSegments(u)},simplify:function(t){var i=new Oi(this).fit(t||2.5);return i&&this.setSegments(i),!!i},smooth:function(t){var i=this,n=t||{},a=n.type||"asymmetric",u=this._segments,l=u.length,c=this._closed;function f(_t,wt){var yt=_t&&_t.index;if(yt!=null){var St=_t.path;if(St&&St!==i)throw new Error(_t._class+" "+yt+" of "+St+" is not part of "+i);wt&&_t instanceof ct&&yt++}else yt=typeof _t=="number"?_t:wt;return Math.min(yt<0&&c?yt%l:yt<0?yt+l:yt,l-1)}var d=c&&n.from===A&&n.to===A,p=f(n.from,0),y=f(n.to,l-1);if(p>y)if(c)p-=l;else{var P=p;p=y,y=P}if(/^(?:asymmetric|continuous)$/.test(a)){var m=a==="asymmetric",g=Math.min,O=y-p+1,C=O-1,L=d?g(O,4):1,w=L,x=L,v=[];if(c||(w=g(1,p),x=g(1,l-y-1)),C+=w+x,C<=1)return;for(var b=0,E=p-w;b<=C;b++,E++)v[b]=u[(E<0?E+l:E)%l]._point;for(var M=v[0]._x+2*v[1]._x,S=v[0]._y+2*v[1]._y,B=2,D=C-1,X=[M],W=[S],k=[B],V=[],H=[],b=1;b<C;b++){var J=b<D,G=J||m?1:2,Q=J?4:m?2:7,st=J?4:m?3:8,ut=J?2:m?0:1,ht=G/B;B=k[b]=Q-ht,M=X[b]=st*v[b]._x+ut*v[b+1]._x-ht*M,S=W[b]=st*v[b]._y+ut*v[b+1]._y-ht*S}V[D]=X[D]/k[D],H[D]=W[D]/k[D];for(var b=C-2;b>=0;b--)V[b]=(X[b]-V[b+1])/k[b],H[b]=(W[b]-H[b+1])/k[b];V[C]=(3*v[C]._x-V[D])/2,H[C]=(3*v[C]._y-H[D])/2;for(var b=w,pt=C-x,E=p;b<=pt;b++,E++){var et=u[E<0?E+l:E],nt=et._point,ft=V[b]-nt._x,vt=H[b]-nt._y;(d||b<pt)&&et.setHandleOut(ft,vt),(d||b>w)&&et.setHandleIn(-ft,-vt)}}else for(var b=p;b<=y;b++)u[b<0?b+l:b].smooth(n,!d&&b===p,!d&&b===y)},toShape:function(t){if(!this._closed)return null;var i=this._segments,n,a,u,l;function c(m,g){var O=i[m],C=O.getNext(),L=i[g],w=L.getNext();return O._handleOut.isZero()&&C._handleIn.isZero()&&L._handleOut.isZero()&&w._handleIn.isZero()&&C._point.subtract(O._point).isCollinear(w._point.subtract(L._point))}function f(m){var g=i[m],O=g.getPrevious(),C=g.getNext();return O._handleOut.isZero()&&g._handleIn.isZero()&&g._handleOut.isZero()&&C._handleIn.isZero()&&g._point.subtract(O._point).isOrthogonal(C._point.subtract(g._point))}function d(m){var g=i[m],O=g.getNext(),C=g._handleOut,L=O._handleIn,w=.5522847498307936;if(C.isOrthogonal(L)){var x=g._point,v=O._point,b=new oe(x,C,!0).intersect(new oe(v,L,!0),!0);return b&&Et.isZero(C.getLength()/b.subtract(x).getLength()-w)&&Et.isZero(L.getLength()/b.subtract(v).getLength()-w)}return!1}function p(m,g){return i[m]._point.getDistance(i[g]._point)}if(!this.hasHandles()&&i.length===4&&c(0,2)&&c(1,3)&&f(1)?(n=pe.Rectangle,a=new gt(p(0,3),p(0,1)),l=i[1]._point.add(i[2]._point).divide(2)):i.length===8&&d(0)&&d(2)&&d(4)&&d(6)&&c(1,5)&&c(3,7)?(n=pe.Rectangle,a=new gt(p(1,6),p(0,3)),u=a.subtract(new gt(p(0,7),p(1,2))).divide(2),l=i[3]._point.add(i[4]._point).divide(2)):i.length===4&&d(0)&&d(1)&&d(2)&&d(3)&&(Et.isZero(p(0,2)-p(1,3))?(n=pe.Circle,u=p(0,2)/2):(n=pe.Ellipse,u=new gt(p(2,0)/2,p(3,1)/2)),l=i[1]._point),n){var y=this.getPosition(!0),P=new n({center:y,size:a,radius:u,insert:!1});return P.copyAttributes(this,!0),P._matrix.prepend(this._matrix),P.rotate(l.subtract(y).getAngle()+90),(t===A||t)&&P.insertAbove(this),P}return null},toPath:"#clone",compare:function t(i){if(!i||i instanceof Te)return t.base.call(this,i);var n=this.getCurves(),a=i.getCurves(),u=n.length,l=a.length;if(!u||!l)return u==l;for(var c=n[0].getValues(),f=[],d=0,p,y=0,P,m=0;m<l;m++){var L=a[m].getValues();f.push(L);var g=ct.getOverlaps(c,L);if(g){p=!m&&g[0][0]>0?l-1:m,P=g[0][1];break}}for(var O=Math.abs,C=1e-8,L=f[p],w;c&&L;){var g=ct.getOverlaps(c,L);if(g){var x=g[0][0];if(O(x-y)<C){y=g[1][0],y===1&&(c=++d<u?n[d].getValues():null,y=0);var v=g[0][1];if(O(v-P)<C){if(w||(w=[p,v]),P=g[1][1],P===1&&(++p>=l&&(p=0),L=f[p]||a[p].getValues(),P=0),!c)return w[0]===p&&w[1]===P;continue}}}break}return!1},_hitTestSelf:function(t,i,n,a){var u=this,l=this.getStyle(),c=this._segments,f=c.length,d=this._closed,p=i._tolerancePadding,y=p,P,m,g,O,C,L,w=i.stroke&&l.hasStroke(),x=i.fill&&l.hasFill(),v=i.curves,b=w?l.getStrokeWidth()/2:x&&i.tolerance>0||v?0:null;b!==null&&(b>0?(P=l.getStrokeJoin(),m=l.getStrokeCap(),g=l.getMiterLimit(),y=y.add(Xt._getStrokePadding(b,a))):P=m="round");function E(V,H){return t.subtract(V).divide(H).length<=1}function M(V,H,J){if(!i.selected||H.isSelected()){var G=V._point;if(H!==G&&(H=H.add(G)),E(H,y))return new Ee(J,u,{segment:V,point:H})}}function S(V,H){return(H||i.segments)&&M(V,V._point,"segment")||!H&&i.handles&&(M(V,V._handleIn,"handle-in")||M(V,V._handleOut,"handle-out"))}function B(V){O.add(V)}function D(V){var H=d||V._index>0&&V._index<f-1;if((H?P:m)==="round")return E(V._point,y);if(O=new Xt({internal:!0,closed:!0}),H?V.isSmooth()||Xt._addBevelJoin(V,P,b,g,null,a,B,!0):m==="square"&&Xt._addSquareCap(V,m,b,null,a,B,!0),!O.isEmpty()){var J;return O.contains(t)||(J=O.getNearestLocation(t))&&E(J.getPoint(),p)}}if(i.ends&&!i.segments&&!d){if(L=S(c[0],!0)||S(c[f-1],!0))return L}else if(i.segments||i.handles){for(var X=0;X<f;X++)if(L=S(c[X]))return L}if(b!==null){if(C=this.getNearestLocation(t),C){var W=C.getTime();W===0||W===1&&f>1?D(C.getSegment())||(C=null):E(C.getPoint(),y)||(C=null)}if(!C&&P==="miter"&&f>1)for(var X=0;X<f;X++){var k=c[X];if(t.getDistance(k._point)<=g*b&&D(k)){C=k.getLocation();break}}}return!C&&x&&this._contains(t)||C&&!w&&!v?new Ee("fill",this):C?new Ee(w?"stroke":"curve",this,{location:C,point:C.getPoint()}):null}},T.each(ct._evaluateMethods,function(t){this[t+"At"]=function(i){var n=this.getLocationAt(i);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=Z.read(arguments),i=this.getCurves(),n=0,a=i.length;n<a;n++){var u=i[n].getLocationOf(t);if(u)return u}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if(typeof t=="number"){for(var i=this.getCurves(),n=0,a=0,u=i.length;a<u;a++){var l=n,c=i[a];if(n+=c.getLength(),n>t)return c.getLocationAt(t-l)}if(i.length>0&&t<=this.getLength())return new Se(i[i.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=Z.read(arguments);if(t.isZero())return[];for(var i=[],n=0,a=this.getCurves(),u=0,l=a.length;u<l;u++){for(var c=a[u],f=c.getTimesWithTangent(t),d=0,p=f.length;d<p;d++){var y=n+c.getOffsetAtTime(f[d]);i.indexOf(y)<0&&i.push(y)}n+=c.length}return i}}),new function(){function t(n,a,u,l){if(l<=0)return;var c=l/2,f=l-2,d=c-1,p=new Array(6),y,P;function m(x){var v=p[x],b=p[x+1];(y!=v||P!=b)&&(n.beginPath(),n.moveTo(y,P),n.lineTo(v,b),n.stroke(),n.beginPath(),n.arc(v,b,c,0,Math.PI*2,!0),n.fill())}for(var g=0,O=a.length;g<O;g++){var C=a[g],L=C._selection;if(C._transformCoordinates(u,p),y=p[0],P=p[1],L&2&&m(2),L&4&&m(4),n.fillRect(y-c,P-c,l,l),f>0&&!(L&1)){var w=n.fillStyle;n.fillStyle="#ffffff",n.fillRect(y-d,P-d,f,f),n.fillStyle=w}}}function i(n,a,u){var l=a._segments,c=l.length,f=new Array(6),d=!0,p,y,P,m,g,O,C,L;function w(v){if(u)v._transformCoordinates(u,f),p=f[0],y=f[1];else{var b=v._point;p=b._x,y=b._y}if(d)n.moveTo(p,y),d=!1;else{if(u)g=f[2],O=f[3];else{var E=v._handleIn;g=p+E._x,O=y+E._y}g===p&&O===y&&C===P&&L===m?n.lineTo(p,y):n.bezierCurveTo(C,L,g,O,p,y)}if(P=p,m=y,u)C=f[4],L=f[5];else{var E=v._handleOut;C=P+E._x,L=m+E._y}}for(var x=0;x<c;x++)w(l[x]);a._closed&&c>0&&w(l[0])}return{_draw:function(n,a,u,l){var c=a.dontStart,f=a.dontFinish||a.clip,d=this.getStyle(),p=d.hasFill(),y=d.hasStroke(),P=d.getDashArray(),m=!Bt.support.nativeDash&&y&&P&&P.length;c||n.beginPath(),(p||y&&!m||f)&&(i(n,this,l),this._closed&&n.closePath());function g(v){return P[(v%m+m)%m]}if(!f&&(p||y)&&(this._setStyles(n,a,u),p&&(n.fill(d.getFillRule()),n.shadowColor="rgba(0,0,0,0)"),y)){if(m){c||n.beginPath();for(var O=new pi(this,.25,32,!1,l),C=O.length,L=-d.getDashOffset(),w,x=0;L>0;)L-=g(x--)+g(x--);for(;L<C;)w=L+g(x++),(L>0||w>0)&&O.drawPart(n,Math.max(L,0),Math.max(w,0)),L=w+g(x++)}n.stroke()}},_drawSelected:function(n,a){n.beginPath(),i(n,this,a),n.stroke(),t(n,this._segments,a,Bt.settings.handleSize)}}},new function(){function t(i){var n=i._segments;if(!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return{moveTo:function(){var i=this._segments;i.length===1&&this.removeSegment(0),i.length||this._add([new Pt(Z.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new Pt(Z.read(arguments))])},cubicCurveTo:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=Z.read(i),l=t(this);l.setHandleOut(n.subtract(l._point)),this._add([new Pt(u,a.subtract(u))])},quadraticCurveTo:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=t(this)._point;this.cubicCurveTo(n.add(u.subtract(n).multiply(1/3)),n.add(a.subtract(n).multiply(1/3)),a)},curveTo:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=T.pick(T.read(i),.5),l=1-u,c=t(this)._point,f=n.subtract(c.multiply(l*l)).subtract(a.multiply(u*u)).divide(2*u*l);if(f.isNaN())throw new Error("Cannot put a curve through points with parameter = "+u);this.quadraticCurveTo(f,a)},arcTo:function(){var i=arguments,n=Math.abs,a=Math.sqrt,u=t(this),l=u._point,c=Z.read(i),f,d=T.peek(i),p=T.pick(d,!0),y,P,m,g;if(typeof p=="boolean")var O=l.add(c).divide(2),f=O.add(O.subtract(l).rotate(p?-90:90));else if(T.remain(i)<=2)f=c,c=Z.read(i);else if(!l.equals(c)){var C=gt.read(i),L=Et.isZero;if(L(C.width)||L(C.height))return this.lineTo(c);var w=T.read(i),p=!!T.read(i),x=!!T.read(i),O=l.add(c).divide(2),v=l.subtract(O).rotate(-w),b=v.x,E=v.y,M=n(C.width),S=n(C.height),B=M*M,D=S*S,X=b*b,W=E*E,k=a(X/B+W/D);if(k>1&&(M*=k,S*=k,B=M*M,D=S*S),k=(B*D-B*W-D*X)/(B*W+D*X),n(k)<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");y=new Z(M*E/S,-S*b/M).multiply((x===p?-1:1)*a(k)).rotate(w).add(O),g=new Wt().translate(y).rotate(w).scale(M,S),m=g._inverseTransform(l),P=m.getDirectedAngle(g._inverseTransform(c)),!p&&P>0?P-=360:p&&P<0&&(P+=360)}if(f){var V=new oe(l.add(f).divide(2),f.subtract(l).rotate(90),!0),H=new oe(f.add(c).divide(2),c.subtract(f).rotate(90),!0),J=new oe(l,c),G=J.getSide(f);if(y=V.intersect(H,!0),!y){if(!G)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}m=l.subtract(y),P=m.getDirectedAngle(c.subtract(y));var Q=J.getSide(y,!0);Q===0?P=G*n(P):G===Q&&(P+=P<0?360:-360)}if(P){for(var st=1e-5,ut=n(P),ht=ut>=360?4:Math.ceil((ut-st)/90),pt=P/ht,et=pt*Math.PI/360,nt=4/3*Math.sin(et)/(1+Math.cos(et)),ft=[],vt=0;vt<=ht;vt++){var v=c,_t=null;if(vt<ht&&(_t=m.rotate(90).multiply(nt),g?(v=g._transformPoint(m),_t=g._transformPoint(m.add(_t)).subtract(v)):v=y.add(m)),!vt)u.setHandleOut(_t);else{var wt=m.rotate(-90).multiply(nt);g&&(wt=g._transformPoint(m.add(wt)).subtract(v)),ft.push(new Pt(v,wt,_t))}m=m.rotate(pt)}this._add(ft)}},lineBy:function(){var i=Z.read(arguments),n=t(this)._point;this.lineTo(n.add(i))},curveBy:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=T.read(i),l=t(this)._point;this.curveTo(l.add(n),l.add(a),u)},cubicCurveBy:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=Z.read(i),l=t(this)._point;this.cubicCurveTo(l.add(n),l.add(a),l.add(u))},quadraticCurveBy:function(){var i=arguments,n=Z.read(i),a=Z.read(i),u=t(this)._point;this.quadraticCurveTo(u.add(n),u.add(a))},arcBy:function(){var i=arguments,n=t(this)._point,a=n.add(Z.read(i)),u=T.pick(T.peek(i),!0);typeof u=="boolean"?this.arcTo(a,u):this.arcTo(a,n.add(Z.read(i)))},closePath:function(i){this.setClosed(!0),this.join(this,i)}}},{_getBounds:function(t,i){var n=i.handle?"getHandleBounds":i.stroke?"getStrokeBounds":"getBounds";return Xt[n](this._segments,this._closed,this,t,i)},statics:{getBounds:function(t,i,n,a,u,l){var c=t[0];if(!c)return new Ct;var f=new Array(6),d=c._transformCoordinates(a,new Array(6)),p=d.slice(0,2),y=p.slice(),P=new Array(2);function m(C){C._transformCoordinates(a,f);for(var L=0;L<2;L++)ct._addBounds(d[L],d[L+4],f[L+2],f[L],L,l?l[L]:0,p,y,P);var w=d;d=f,f=w}for(var g=1,O=t.length;g<O;g++)m(t[g]);return i&&m(c),new Ct(p[0],p[1],y[0]-p[0],y[1]-p[1])},getStrokeBounds:function(t,i,n,a,u){var l=n.getStyle(),c=l.hasStroke(),f=l.getStrokeWidth(),d=c&&n._getStrokeMatrix(a,u),p=c&&Xt._getStrokePadding(f,d),y=Xt.getBounds(t,i,n,a,u,p);if(!c)return y;var P=f/2,m=l.getStrokeJoin(),g=l.getStrokeCap(),O=l.getMiterLimit(),C=new Ct(new gt(p));function L(M){y=y.include(M)}function w(M){y=y.unite(C.setCenter(M._point.transform(a)))}function x(M,S){S==="round"||M.isSmooth()?w(M):Xt._addBevelJoin(M,S,P,O,a,d,L)}function v(M,S){S==="round"?w(M):Xt._addSquareCap(M,S,P,a,d,L)}var b=t.length-(i?0:1);if(b>0){for(var E=1;E<b;E++)x(t[E],m);i?x(t[0],m):(v(t[0],g),v(t[t.length-1],g))}return y},_getStrokePadding:function(t,i){if(!i)return[t,t];var n=new Z(t,0).transform(i),a=new Z(0,t).transform(i),u=n.getAngleInRadians(),l=n.getLength(),c=a.getLength(),f=Math.sin(u),d=Math.cos(u),p=Math.tan(u),y=Math.atan2(c*p,l),P=Math.atan2(c,p*l);return[Math.abs(l*Math.cos(y)*d+c*Math.sin(y)*f),Math.abs(c*Math.sin(P)*d+l*Math.cos(P)*f)]},_addBevelJoin:function(t,i,n,a,u,l,c,f){var d=t.getCurve(),p=d.getPrevious(),y=d.getPoint1().transform(u),P=p.getNormalAtTime(1).multiply(n).transform(l),m=d.getNormalAtTime(0).multiply(n).transform(l),g=P.getDirectedAngle(m);if((g<0||g>=180)&&(P=P.negate(),m=m.negate()),f&&c(y),c(y.add(P)),i==="miter"){var O=new oe(y.add(P),new Z(-P.y,P.x),!0).intersect(new oe(y.add(m),new Z(-m.y,m.x),!0),!0);O&&y.getDistance(O)<=a*n&&c(O)}c(y.add(m))},_addSquareCap:function(t,i,n,a,u,l,c){var f=t._point.transform(a),d=t.getLocation(),p=d.getNormal().multiply(d.getTime()===0?n:-n).transform(u);i==="square"&&(c&&(l(f.subtract(p)),l(f.add(p))),f=f.add(p.rotate(-90))),l(f.add(p)),l(f.subtract(p))},getHandleBounds:function(t,i,n,a,u){var l=n.getStyle(),c=u.stroke&&l.hasStroke(),f,d;if(c){var p=n._getStrokeMatrix(a,u),y=l.getStrokeWidth()/2,P=y;l.getStrokeJoin()==="miter"&&(P=y*l.getMiterLimit()),l.getStrokeCap()==="square"&&(P=Math.max(P,y*Math.SQRT2)),f=Xt._getStrokePadding(y,p),d=Xt._getStrokePadding(P,p)}for(var m=new Array(6),g=1/0,O=-g,C=g,L=O,w=0,x=t.length;w<x;w++){var v=t[w];v._transformCoordinates(a,m);for(var b=0;b<6;b+=2){var E=b?f:d,M=E?E[0]:0,S=E?E[1]:0,B=m[b],D=m[b+1],X=B-M,W=B+M,k=D-S,V=D+S;X<g&&(g=X),W>O&&(O=W),k<C&&(C=k),V>L&&(L=V)}}return new Ct(g,C,O-g,L-C)}}});Xt.inject({statics:new function(){var t=.5522847498307936,i=[new Pt([-1,0],[0,t],[0,-t]),new Pt([0,-1],[-t,0],[t,0]),new Pt([1,0],[0,-t],[0,t]),new Pt([0,1],[t,0],[-t,0])];function n(u,l,c){var f=T.getNamed(c),d=new Xt(f&&(f.insert==!0?Nt.INSERT:f.insert==!1?Nt.NO_INSERT:null));return d._add(u),d._closed=l,d.set(f,Nt.INSERT)}function a(u,l,c){for(var f=new Array(4),d=0;d<4;d++){var p=i[d];f[d]=new Pt(p._point.multiply(l).add(u),p._handleIn.multiply(l),p._handleOut.multiply(l))}return n(f,!0,c)}return{Line:function(){var u=arguments;return n([new Pt(Z.readNamed(u,"from")),new Pt(Z.readNamed(u,"to"))],!1,u)},Circle:function(){var u=arguments,l=Z.readNamed(u,"center"),c=T.readNamed(u,"radius");return a(l,new gt(c),u)},Rectangle:function(){var u=arguments,l=Ct.readNamed(u,"rectangle"),c=gt.readNamed(u,"radius",0,{readNull:!0}),f=l.getBottomLeft(!0),d=l.getTopLeft(!0),p=l.getTopRight(!0),y=l.getBottomRight(!0),P;if(!c||c.isZero())P=[new Pt(f),new Pt(d),new Pt(p),new Pt(y)];else{c=gt.min(c,l.getSize(!0).divide(2));var m=c.width,g=c.height,O=m*t,C=g*t;P=[new Pt(f.add(m,0),null,[-O,0]),new Pt(f.subtract(0,g),[0,C]),new Pt(d.add(0,g),null,[0,-C]),new Pt(d.add(m,0),[-O,0],null),new Pt(p.subtract(m,0),null,[O,0]),new Pt(p.add(0,g),[0,-C],null),new Pt(y.subtract(0,g),null,[0,C]),new Pt(y.subtract(m,0),[O,0])]}return n(P,!0,u)},RoundRectangle:"#Rectangle",Ellipse:function(){var u=arguments,l=pe._readEllipse(u);return a(l.center,l.radius,u)},Oval:"#Ellipse",Arc:function(){var u=arguments,l=Z.readNamed(u,"from"),c=Z.readNamed(u,"through"),f=Z.readNamed(u,"to"),d=T.getNamed(u),p=new Xt(d&&d.insert==!1&&Nt.NO_INSERT);return p.moveTo(l),p.arcTo(c,f),p.set(d)},RegularPolygon:function(){for(var u=arguments,l=Z.readNamed(u,"center"),c=T.readNamed(u,"sides"),f=T.readNamed(u,"radius"),d=360/c,p=c%3===0,y=new Z(0,p?-f:f),P=p?-1:.5,m=new Array(c),g=0;g<c;g++)m[g]=new Pt(l.add(y.rotate((g+P)*d)));return n(m,!0,u)},Star:function(){for(var u=arguments,l=Z.readNamed(u,"center"),c=T.readNamed(u,"points")*2,f=T.readNamed(u,"radius1"),d=T.readNamed(u,"radius2"),p=360/c,y=new Z(0,-1),P=new Array(c),m=0;m<c;m++)P[m]=new Pt(l.add(y.rotate(p*m).multiply(m%2?d:f)));return n(P,!0,u)}}}});var Te=Ye.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(i){this._children=[],this._namedChildren={},this._initialize(i)||(typeof i=="string"?this.setPathData(i):this.addChildren(Array.isArray(i)?i:arguments))},insertChildren:function t(i,n){var a=n,u=a[0];u&&typeof u[0]=="number"&&(a=[a]);for(var l=n.length-1;l>=0;l--){var c=a[l];a===n&&!(c instanceof Xt)&&(a=T.slice(a)),Array.isArray(c)?a[l]=new Xt({segments:c,insert:!1}):c instanceof Te&&(a.splice.apply(a,[l,1].concat(c.removeChildren())),c.remove())}return t.base.call(this,i,a)},reduce:function t(i){for(var n=this._children,a=n.length-1;a>=0;a--){var u=n[a].reduce(i);u.isEmpty()&&u.remove()}if(!n.length){var u=new Xt(Nt.NO_INSERT);return u.copyAttributes(this),u.insertAbove(this),this.remove(),u}return t.base.call(this)},isClosed:function(){for(var t=this._children,i=0,n=t.length;i<n;i++)if(!t[i]._closed)return!1;return!0},setClosed:function(t){for(var i=this._children,n=0,a=i.length;n<a;n++)i[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,i=[],n=0,a=t.length;n<a;n++)T.push(i,t[n].getCurves());return i},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,i=0,n=0,a=t.length;n<a;n++)i+=t[n].getArea();return i},getLength:function(){for(var t=this._children,i=0,n=0,a=t.length;n<a;n++)i+=t[n].getLength();return i},getPathData:function(t,i){for(var n=this._children,a=[],u=0,l=n.length;u<l;u++){var c=n[u],f=c._matrix;a.push(c.getPathData(t&&!f.isIdentity()?t.appended(f):t,i))}return a.join("")},_hitTestChildren:function t(i,n,a){return t.base.call(this,i,n.class===Xt||n.type==="path"?n:T.set({},n,{fill:!1}),a)},_draw:function(t,i,n,a){var u=this._children;if(u.length){i=i.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var l=0,c=u.length;l<c;l++)u[l].draw(t,i,a);if(!i.clip){this._setStyles(t,i,n);var f=this._style;f.hasFill()&&(t.fill(f.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),f.hasStroke()&&t.stroke()}}},_drawSelected:function(t,i,n){for(var a=this._children,u=0,l=a.length;u<l;u++){var c=a[u],f=c._matrix;n[c._id]||c._drawSelected(t,f.isIdentity()?i:i.appended(f))}}},new function(){function t(i,n){var a=i._children;if(n&&!a.length)throw new Error("Use a moveTo() command first");return a[a.length-1]}return T.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(i){this[i]=function(){var n=t(this,!0);n[i].apply(n,arguments)}},{moveTo:function(){var i=t(this),n=i&&i.isEmpty()?i:new Xt(Nt.NO_INSERT);n!==i&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var i=t(this,!0),n=i&&i.getLastSegment(),a=Z.read(arguments);this.moveTo(n?a.add(n._point):a)},closePath:function(i){t(this,!0).closePath(i)}})},T.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(i){for(var n=this._children,a,u=0,l=n.length;u<l;u++)a=n[u][t](i)||a;return a}},{}));Ye.inject(new function(){var t=Math.min,i=Math.max,n=Math.abs,a={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function u(w){return w._children||[w]}function l(w,x){var v=w.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(x){for(var b=u(v),E=0,M=b.length;E<M;E++){var w=b[E];!w._closed&&!w.isEmpty()&&(w.closePath(1e-12),w.getFirstSegment().setHandleIn(0,0),w.getLastSegment().setHandleOut(0,0))}v=v.resolveCrossings().reorient(v.getFillRule()==="nonzero",!0)}return v}function c(w,x,v,b,E){var M=new Te(Nt.NO_INSERT);return M.addChildren(w,!0),M=M.reduce({simplify:x}),E&&E.insert==!1||M.insertAbove(b&&v.isSibling(b)&&v.getIndex()<b.getIndex()?b:v),M.copyAttributes(v,!0),M}function f(w){return w.hasOverlap()||w.isCrossing()}function d(w,x,v,b){if(b&&(b.trace==!1||b.stroke)&&/^(subtract|intersect)$/.test(v))return p(w,x,v);var E=l(w,!0),M=x&&w!==x&&l(x,!0),S=a[v];S[v]=!0,M&&(S.subtract||S.exclude)^(M.isClockwise()^E.isClockwise())&&M.reverse();var B=g(Se.expand(E.getIntersections(M,f))),D=u(E),X=M&&u(M),W=[],k=[],V;function H(_t){for(var wt=0,yt=_t.length;wt<yt;wt++){var St=_t[wt];T.push(W,St._segments),T.push(k,St.getCurves()),St._overlapsOnly=!0}}function J(_t){for(var wt=[],yt=0,St=_t&&_t.length;yt<St;yt++)wt.push(k[_t[yt]]);return wt}if(B.length){H(D),X&&H(X);for(var G=new Array(k.length),Q=0,st=k.length;Q<st;Q++)G[Q]=k[Q].getValues();for(var ut=Ft.findCurveBoundsCollisions(G,G,0,!0),ht={},Q=0;Q<k.length;Q++){var pt=k[Q],et=pt._path._id,nt=ht[et]=ht[et]||{};nt[pt.getIndex()]={hor:J(ut[Q].hor),ver:J(ut[Q].ver)}}for(var Q=0,st=B.length;Q<st;Q++)C(B[Q]._segment,E,M,ht,S);for(var Q=0,st=W.length;Q<st;Q++){var ft=W[Q],vt=ft._intersection;ft._winding||C(ft,E,M,ht,S),vt&&vt._overlap||(ft._path._overlapsOnly=!1)}V=L(W,S)}else V=m(X?D.concat(X):D.slice(),function(_t){return!!S[_t]});return c(V,!0,w,x,b)}function p(w,x,v){var b=l(w),E=l(x),M=b.getIntersections(E,f),S=v==="subtract",B=v==="divide",D={},X=[];function W(H){if(!D[H._id]&&(B||E.contains(H.getPointAt(H.getLength()/2))^S))return X.unshift(H),D[H._id]=!0}for(var k=M.length-1;k>=0;k--){var V=M[k].split();V&&(W(V)&&V.getFirstSegment().setHandleIn(0,0),b.getLastSegment().setHandleOut(0,0))}return W(b),c(X,!1,w,x)}function y(w,x){for(var v=w;v;){if(v===x)return;v=v._previous}for(;w._next&&w._next!==x;)w=w._next;if(!w._next){for(;x._previous;)x=x._previous;w._next=x,x._previous=w}}function P(w){for(var x=w.length-1;x>=0;x--)w[x].clearHandles()}function m(w,x,v){var b=w&&w.length;if(b){var E=T.each(w,function(ut,ht){this[ut._id]={container:null,winding:ut.isClockwise()?1:-1,index:ht}},{}),M=w.slice().sort(function(ut,ht){return n(ht.getArea())-n(ut.getArea())}),S=M[0],B=Ft.findItemBoundsCollisions(M,null,Et.GEOMETRIC_EPSILON);v==null&&(v=S.isClockwise());for(var D=0;D<b;D++){var X=M[D],W=E[X._id],k=0,V=B[D];if(V){for(var H=null,J=V.length-1;J>=0;J--)if(V[J]<D){H=H||X.getInteriorPoint();var G=M[V[J]];if(G.contains(H)){var Q=E[G._id];k=Q.winding,W.winding+=k,W.container=Q.exclude?Q.container:G;break}}}if(x(W.winding)===x(k))W.exclude=!0,w[W.index]=null;else{var st=W.container;X.setClockwise(st?!st.isClockwise():v)}}}return w}function g(w,x,v){var b=x&&[],E=1e-8,M=1-E,S=!1,B=v||[],D=v&&{},X,W,k;function V(wt){return wt._path._id+"."+wt._segment1._index}for(var H=(v&&v.length)-1;H>=0;H--){var J=v[H];J._path&&(D[V(J)]=!0)}for(var H=w.length-1;H>=0;H--){var G=w[H],Q=G._time,st=Q,ut=x&&!x(G),J=G._curve,ht;if(J&&(J!==W?(S=!J.hasHandles()||D&&D[V(J)],X=[],k=null,W=J):k>=E&&(Q/=k)),ut){X&&X.push(G);continue}else x&&b.unshift(G);if(k=st,Q<E)ht=J._segment1;else if(Q>M)ht=J._segment2;else{var pt=J.divideAtTime(Q,!0);S&&B.push(J,pt),ht=pt._segment1;for(var et=X.length-1;et>=0;et--){var nt=X[et];nt._time=(nt._time-Q)/(1-Q)}}G._setSegment(ht);var ft=ht._intersection,vt=G._intersection;if(ft){y(ft,vt);for(var _t=ft;_t;)y(_t._intersection,ft),_t=_t._next}else ht._intersection=vt}return v||P(B),b||w}function O(w,x,v,b,E){var M=Array.isArray(x)?x:x[v?"hor":"ver"],S=v?1:0,B=S^1,D=[w.x,w.y],X=D[S],W=D[B],k=1e-9,V=1e-6,H=X-k,J=X+k,G=0,Q=0,st=0,ut=0,ht=!1,pt=!1,et=1,nt=[],ft,vt;function _t(zt){var Kt=zt[B+0],Vt=zt[B+6];if(!(W<t(Kt,Vt)||W>i(Kt,Vt))){var ne=zt[S+0],me=zt[S+2],Ne=zt[S+4],bt=zt[S+6];if(Kt===Vt){(ne<J&&bt>H||bt<J&&ne>H)&&(ht=!0);return}var ye=W===Kt?0:W===Vt||H>i(ne,me,Ne,bt)||J<t(ne,me,Ne,bt)?1:ct.solveCubic(zt,B,W,nt,0,1)>0?nt[0]:1,ce=ye===0?ne:ye===1?bt:ct.getPoint(zt,ye)[v?"y":"x"],_e=Kt>Vt?1:-1,Be=ft[B]>ft[B+6]?1:-1,xe=ft[S+6];return W!==Kt?(ce<H?st+=_e:ce>J?ut+=_e:ht=!0,ce>X-V&&ce<X+V&&(et/=2)):(_e!==Be?ne<H?st+=_e:ne>J&&(ut+=_e):ne!=xe&&(xe<J&&ce>J?(ut+=_e,ht=!0):xe>H&&ce<H&&(st+=_e,ht=!0)),et/=4),ft=zt,!E&&ce>H&&ce<J&&ct.getTangent(zt,ye)[v?"x":"y"]===0&&O(w,x,!v,b,!0)}}function wt(zt){var Kt=zt[B+0],Vt=zt[B+2],ne=zt[B+4],me=zt[B+6];if(W<=i(Kt,Vt,ne,me)&&W>=t(Kt,Vt,ne,me)){for(var Ne=zt[S+0],bt=zt[S+2],ye=zt[S+4],ce=zt[S+6],_e=H>i(Ne,bt,ye,ce)||J<t(Ne,bt,ye,ce)?[zt]:ct.getMonoCurves(zt,v),Be,xe=0,e=_e.length;xe<e;xe++)if(Be=_t(_e[xe]))return Be}}for(var yt=0,St=M.length;yt<St;yt++){var Mt=M[yt],It=Mt._path,ee=Mt.getValues(),ie;if((!yt||M[yt-1]._path!==It)&&(ft=null,It._closed||(vt=ct.getValues(It.getLastCurve().getSegment2(),Mt.getSegment1(),null,!b),vt[B]!==vt[B+6]&&(ft=vt)),!ft)){ft=ee;for(var se=It.getLastCurve();se&&se!==Mt;){var jt=se.getValues();if(jt[B]!==jt[B+6]){ft=jt;break}se=se.getPrevious()}}if(ie=wt(ee))return ie;if(yt+1===St||M[yt+1]._path!==It){if(vt&&(ie=wt(vt)))return ie;ht&&!st&&!ut&&(st=ut=It.isClockwise(b)^v?1:-1),G+=st,Q+=ut,st=ut=0,ht&&(pt=!0,ht=!1),vt=null}}return G=n(G),Q=n(Q),{winding:i(G,Q),windingL:G,windingR:Q,quality:et,onPath:pt}}function C(w,x,v,b,E){var M=[],S=w,B=0,k;do{var D=w.getCurve();if(D){var X=D.getLength();M.push({segment:w,curve:D,length:X}),B+=X}w=w.getNext()}while(w&&!w._intersection&&w!==S);for(var W=[.5,.25,.75],k={winding:0,quality:-1},V=.001,H=1-V,J=0;J<W.length&&k.quality<.5;J++)for(var X=B*W[J],G=0,Q=M.length;G<Q;G++){var st=M[G],ut=st.length;if(X<=ut){var D=st.curve,ht=D._path,pt=ht._parent,et=pt instanceof Te?pt:ht,nt=Et.clamp(D.getTimeAt(X),V,H),ft=D.getPointAtTime(nt),vt=n(D.getTangentAtTime(nt).y)<Math.SQRT1_2,_t=null;if(E.subtract&&v){var wt=et===x?v:x,yt=wt._getWinding(ft,vt,!0);if(et===x&&yt.winding||et===v&&!yt.winding){if(yt.quality<1)continue;_t={winding:0,quality:1}}}_t=_t||O(ft,b[ht._id][D.getIndex()],vt,!0),_t.quality>k.quality&&(k=_t);break}X-=ut}for(var G=M.length-1;G>=0;G--)M[G].segment._winding=k}function L(w,x){var v=[],b;function E(St){var Mt;return!!(St&&!St._visited&&(!x||x[(Mt=St._winding||{}).winding]&&!(x.unite&&Mt.winding===2&&Mt.windingL&&Mt.windingR)))}function M(St){if(St){for(var Mt=0,It=b.length;Mt<It;Mt++)if(St===b[Mt])return!0}return!1}function S(St){for(var Mt=St._segments,It=0,ee=Mt.length;It<ee;It++)Mt[It]._visited=!0}function B(St,Mt){var It=St._intersection,ee=It,ie=[];Mt&&(b=[St]);function se(jt,zt){for(;jt&&jt!==zt;){var Kt=jt._segment,Vt=Kt&&Kt._path;if(Vt){var ne=Kt.getNext()||Vt.getFirstSegment(),me=ne._intersection;Kt!==St&&(M(Kt)||M(ne)||ne&&E(Kt)&&(E(ne)||me&&E(me._segment)))&&ie.push(Kt),Mt&&b.push(Kt)}jt=jt._next}}if(It){for(se(It);It&&It._previous;)It=It._previous;se(It,ee)}return ie}w.sort(function(St,Mt){var It=St._intersection,ee=Mt._intersection,ie=!!(It&&It._overlap),se=!!(ee&&ee._overlap),jt=St._path,zt=Mt._path;return ie^se?ie?1:-1:!It^!ee?It?1:-1:jt!==zt?jt._id-zt._id:St._index-Mt._index});for(var D=0,X=w.length;D<X;D++){var W=w[D],k=E(W),V=null,H=!1,J=!0,G=[],Q,st,ut;if(k&&W._path._overlapsOnly){var ht=W._path,pt=W._intersection._segment._path;ht.compare(pt)&&(ht.getArea()&&v.push(ht.clone(!1)),S(ht),S(pt),k=!1)}for(;k;){var et=!V,nt=B(W,et),ft=nt.shift(),H=!et&&(M(W)||M(ft)),vt=!H&&ft;if(et&&(V=new Xt(Nt.NO_INSERT),Q=null),H){(W.isFirst()||W.isLast())&&(J=W._path._closed),W._visited=!0;break}if(vt&&Q&&(G.push(Q),Q=null),Q||(vt&&nt.push(W),Q={start:V._segments.length,crossings:nt,visited:st=[],handleIn:ut}),vt&&(W=ft),!E(W)){V.removeSegments(Q.start);for(var _t=0,wt=st.length;_t<wt;_t++)st[_t]._visited=!1;st.length=0;do W=Q&&Q.crossings.shift(),(!W||!W._path)&&(W=null,Q=G.pop(),Q&&(st=Q.visited,ut=Q.handleIn));while(Q&&!E(W));if(!W)break}var yt=W.getNext();V.add(new Pt(W._point,ut,yt&&W._handleOut)),W._visited=!0,st.push(W),W=yt||W._path.getFirstSegment(),ut=yt&&yt._handleIn}H&&(J&&(V.getFirstSegment().setHandleIn(ut),V.setClosed(J)),V.getArea()!==0&&v.push(V))}return v}return{_getWinding:function(w,x,v){return O(w,this.getCurves(),x,v)},unite:function(w,x){return d(this,w,"unite",x)},intersect:function(w,x){return d(this,w,"intersect",x)},subtract:function(w,x){return d(this,w,"subtract",x)},exclude:function(w,x){return d(this,w,"exclude",x)},divide:function(w,x){return x&&(x.trace==!1||x.stroke)?p(this,w,"divide"):c([this.subtract(w,x),this.intersect(w,x)],!0,this,w,x)},resolveCrossings:function(){var w=this._children,x=w||[this];function v(Q,st){var ut=Q&&Q._intersection;return ut&&ut._overlap&&ut._path===st}var b=!1,E=!1,M=this.getIntersections(null,function(Q){return Q.hasOverlap()&&(b=!0)||Q.isCrossing()&&(E=!0)}),S=b&&E&&[];if(M=Se.expand(M),b)for(var B=g(M,function(Q){return Q.hasOverlap()},S),D=B.length-1;D>=0;D--){var X=B[D],W=X._path,k=X._segment,V=k.getPrevious(),H=k.getNext();v(V,W)&&v(H,W)&&(k.remove(),V._handleOut._set(0,0),H._handleIn._set(0,0),V!==k&&!V.getCurve().hasLength()&&(H._handleIn.set(V._handleIn),V.remove()))}E&&(g(M,b&&function(Q){var st=Q.getCurve(),ut=Q.getSegment(),ht=Q._intersection,pt=ht._curve,et=ht._segment;if(st&&pt&&st._path&&pt._path)return!0;ut&&(ut._intersection=null),et&&(et._intersection=null)},S),S&&P(S),x=L(T.each(x,function(Q){T.push(this,Q._segments)},[])));var J=x.length,G;return J>1&&w?(x!==w&&this.setChildren(x),G=this):J===1&&!w&&(x[0]!==this&&this.setSegments(x[0].removeSegments()),G=this),G||(G=new Te(Nt.NO_INSERT),G.addChildren(x),G=G.reduce(),G.copyAttributes(this),this.replaceWith(G)),G},reorient:function(w,x){var v=this._children;return v&&v.length?this.setChildren(m(this.removeChildren(),function(b){return!!(w?b:b&1)},x)):x!==A&&this.setClockwise(x),this},getInteriorPoint:function(){var w=this.getBounds(),x=w.getCenter(!0);if(!this.contains(x)){for(var v=this.getCurves(),b=x.y,E=[],M=[],S=0,B=v.length;S<B;S++){var D=v[S].getValues(),X=D[1],W=D[3],k=D[5],V=D[7];if(b>=t(X,W,k,V)&&b<=i(X,W,k,V))for(var H=ct.getMonoCurves(D),J=0,G=H.length;J<G;J++){var Q=H[J],st=Q[1],ut=Q[7];if(st!==ut&&(b>=st&&b<=ut||b>=ut&&b<=st)){var ht=b===st?Q[0]:b===ut?Q[6]:ct.solveCubic(Q,1,b,M,0,1)===1?ct.getPoint(Q,M[0]).x:(Q[0]+Q[6])/2;E.push(ht)}}}E.length>1&&(E.sort(function(pt,et){return pt-et}),x.x=(E[0]+E[1])/2)}return x}}});var pi=T.extend({_class:"PathFlattener",initialize:function(t,i,n,a,u){var l=[],c=[],f=0,d=1/(n||32),p=t._segments,y=p[0],P;function m(L,w){var x=ct.getValues(L,w,u);l.push(x),g(x,L._index,0,1)}function g(L,w,x,v){if(v-x>d&&!(a&&ct.isStraight(L))&&!ct.isFlatEnough(L,i||.25)){var b=ct.subdivide(L,.5),E=(x+v)/2;g(b[0],w,x,E),g(b[1],w,E,v)}else{var M=L[6]-L[0],S=L[7]-L[1],B=Math.sqrt(M*M+S*S);B>0&&(f+=B,c.push({offset:f,curve:L,index:w,time:v}))}}for(var O=1,C=p.length;O<C;O++)P=p[O],m(y,P),y=P;t._closed&&m(P||y,p[0]),this.curves=l,this.parts=c,this.length=f,this.index=0},_get:function(t){for(var i=this.parts,n=i.length,a,u=this.index;a=u,!(!u||i[--u].offset<t););for(;a<n;a++){var l=i[a];if(l.offset>=t){this.index=a;var c=i[a-1],f=c&&c.index===l.index?c.time:0,d=c?c.offset:0;return{index:l.index,time:f+(l.time-f)*(t-d)/(l.offset-d)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,i,n){for(var a=this._get(i),u=this._get(n),l=a.index,c=u.index;l<=c;l++){var f=ct.getPart(this.curves[l],l===a.index?a.time:0,l===u.index?u.time:1);l===a.index&&t.moveTo(f[0],f[1]),t.bezierCurveTo.apply(t,f.slice(2))}}},T.each(ct._evaluateMethods,function(t){this[t+"At"]=function(i){var n=this._get(i);return ct[t](this.curves[n.index],n.time)}},{})),Oi=T.extend({initialize:function(t){for(var i=this.points=[],n=t._segments,a=t._closed,u=0,l,c=n.length;u<c;u++){var f=n[u].point;(!l||!l.equals(f))&&i.push(l=f.clone())}a&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=a},fit:function(t){var i=this.points,n=i.length,a=null;return n>0&&(a=[new Pt(i[0])],n>1&&(this.fitCubic(a,t,0,n-1,i[1].subtract(i[0]),i[n-2].subtract(i[n-1])),this.closed&&(a.shift(),a.pop()))),a},fitCubic:function(t,i,n,a,u,l){var c=this.points;if(a-n===1){var f=c[n],d=c[a],p=f.getDistance(d)/3;this.addCurve(t,[f,f.add(u.normalize(p)),d.add(l.normalize(p)),d]);return}for(var y=this.chordLengthParameterize(n,a),P=Math.max(i,i*i),m,g=!0,O=0;O<=4;O++){var C=this.generateBezier(n,a,y,u,l),L=this.findMaxError(n,a,C,y);if(L.error<i&&g){this.addCurve(t,C);return}if(m=L.index,L.error>=P)break;g=this.reparameterize(n,a,y,C),P=L.error}var w=c[m-1].subtract(c[m+1]);this.fitCubic(t,i,n,m,u,w),this.fitCubic(t,i,m,a,w.negate(),l)},addCurve:function(t,i){var n=t[t.length-1];n.setHandleOut(i[1].subtract(i[0])),t.push(new Pt(i[3],i[2].subtract(i[3])))},generateBezier:function(t,i,n,a,u){for(var l=1e-12,c=Math.abs,f=this.points,d=f[t],p=f[i],y=[[0,0],[0,0]],P=[0,0],m=0,g=i-t+1;m<g;m++){var O=n[m],C=1-O,L=3*O*C,w=C*C*C,x=L*C,v=L*O,b=O*O*O,E=a.normalize(x),M=u.normalize(v),S=f[t+m].subtract(d.multiply(w+x)).subtract(p.multiply(v+b));y[0][0]+=E.dot(E),y[0][1]+=E.dot(M),y[1][0]=y[0][1],y[1][1]+=M.dot(M),P[0]+=E.dot(S),P[1]+=M.dot(S)}var B=y[0][0]*y[1][1]-y[1][0]*y[0][1],D,X;if(c(B)>l){var W=y[0][0]*P[1]-y[1][0]*P[0],k=P[0]*y[1][1]-P[1]*y[0][1];D=k/B,X=W/B}else{var V=y[0][0]+y[0][1],H=y[1][0]+y[1][1];D=X=c(V)>l?P[0]/V:c(H)>l?P[1]/H:0}var J=p.getDistance(d),G=l*J,Q,st;if(D<G||X<G)D=X=J/3;else{var ut=p.subtract(d);Q=a.normalize(D),st=u.normalize(X),Q.dot(ut)-st.dot(ut)>J*J&&(D=X=J/3,Q=st=null)}return[d,d.add(Q||a.normalize(D)),p.add(st||u.normalize(X)),p]},reparameterize:function(t,i,n,a){for(var u=t;u<=i;u++)n[u-t]=this.findRoot(a,this.points[u],n[u-t]);for(var u=1,l=n.length;u<l;u++)if(n[u]<=n[u-1])return!1;return!0},findRoot:function(t,i,n){for(var a=[],u=[],l=0;l<=2;l++)a[l]=t[l+1].subtract(t[l]).multiply(3);for(var l=0;l<=1;l++)u[l]=a[l+1].subtract(a[l]).multiply(2);var c=this.evaluate(3,t,n),f=this.evaluate(2,a,n),d=this.evaluate(1,u,n),p=c.subtract(i),y=f.dot(f)+p.dot(d);return Et.isMachineZero(y)?n:n-p.dot(f)/y},evaluate:function(t,i,n){for(var a=i.slice(),u=1;u<=t;u++)for(var l=0;l<=t-u;l++)a[l]=a[l].multiply(1-n).add(a[l+1].multiply(n));return a[0]},chordLengthParameterize:function(t,i){for(var n=[0],a=t+1;a<=i;a++)n[a-t]=n[a-t-1]+this.points[a].getDistance(this.points[a-1]);for(var a=1,u=i-t;a<=u;a++)n[a]/=n[u];return n},findMaxError:function(t,i,n,a){for(var u=Math.floor((i-t+1)/2),l=0,c=t+1;c<i;c++){var f=this.evaluate(3,n,a[c-t]),d=f.subtract(this.points[c]),p=d.x*d.x+d.y*d.y;p>=l&&(l=p,u=c)}return{error:l,index:u}}}),Oe=Nt.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(i){this._content="",this._lines=[];var n=i&&T.isPlainObject(i)&&i.x===A&&i.y===A;this._initialize(n&&i,!n&&Z.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),Li=Oe.extend({_class:"PointText",initialize:function(){Oe.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new we(t.x,t.y,this,"setPoint")},setPoint:function(){var t=Z.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,i,n){if(this._content){this._setStyles(t,i,n);var a=this._lines,u=this._style,l=u.hasFill(),c=u.hasStroke(),f=u.getLeading(),d=t.shadowColor;t.font=u.getFontStyle(),t.textAlign=u.getJustification();for(var p=0,y=a.length;p<y;p++){t.shadowColor=d;var P=a[p];l&&(t.fillText(P,0,0),t.shadowColor="rgba(0,0,0,0)"),c&&t.strokeText(P,0,0),t.translate(0,f)}}},_getBounds:function(t,i){var n=this._style,a=this._lines,u=a.length,l=n.getJustification(),c=n.getLeading(),f=this.getView().getTextWidth(n.getFontStyle(),a),d=0;l!=="left"&&(d-=f/(l==="center"?2:1));var p=new Ct(d,u?-.75*c:0,f,u*c);return t?t._transformBounds(p,p):p}}),$t=T.extend(new function(){var t={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},n={transparent:[0,0,0,0]},a;function u(f){var d=f.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||f.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),p="rgb",y;if(d){var P=d[4]?4:3;y=new Array(P);for(var m=0;m<P;m++){var g=d[m+1];y[m]=parseInt(g.length==1?g+g:g,16)/255}}else if(d=f.match(/^(rgb|hsl)a?\((.*)\)$/)){p=d[1],y=d[2].trim().split(/[,\s]+/g);for(var O=p==="hsl",m=0,C=Math.min(y.length,4);m<C;m++){var L=y[m],g=parseFloat(L);if(O)if(m===0){var w=L.match(/([a-z]*)$/)[1];g*={turn:360,rad:180/Math.PI,grad:.9}[w]||1}else m<3&&(g/=100);else m<3&&(g/=/%$/.test(L)?100:255);y[m]=g}}else{var x=n[f];if(!x)if(R){a||(a=te.getContext(1,1,{willReadFrequently:!0}),a.globalCompositeOperation="copy"),a.fillStyle="rgba(0,0,0,0)",a.fillStyle=f,a.fillRect(0,0,1,1);var v=a.getImageData(0,0,1,1).data;x=n[f]=[v[0]/255,v[1]/255,v[2]/255]}else x=[0,0,0];y=x.slice()}return[p,y]}var l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],c={"rgb-hsb":function(f,d,p){var y=Math.max(f,d,p),P=Math.min(f,d,p),m=y-P,g=m===0?0:(y==f?(d-p)/m+(d<p?6:0):y==d?(p-f)/m+2:(f-d)/m+4)*60;return[g,y===0?0:m/y,y]},"hsb-rgb":function(f,d,p){f=(f/60%6+6)%6;var P=Math.floor(f),y=f-P,P=l[P],m=[p,p*(1-d),p*(1-d*y),p*(1-d*(1-y))];return[m[P[0]],m[P[1]],m[P[2]]]},"rgb-hsl":function(f,d,p){var y=Math.max(f,d,p),P=Math.min(f,d,p),m=y-P,g=m===0,O=g?0:(y==f?(d-p)/m+(d<p?6:0):y==d?(p-f)/m+2:(f-d)/m+4)*60,C=(y+P)/2,L=g?0:C<.5?m/(y+P):m/(2-y-P);return[O,L,C]},"hsl-rgb":function(f,d,p){if(f=(f/360%1+1)%1,d===0)return[p,p,p];for(var y=[f+1/3,f,f-1/3],P=p<.5?p*(1+d):p+d-p*d,m=2*p-P,g=[],O=0;O<3;O++){var C=y[O];C<0&&(C+=1),C>1&&(C-=1),g[O]=6*C<1?m+(P-m)*6*C:2*C<1?P:3*C<2?m+(P-m)*(2/3-C)*6:m}return g},"rgb-gray":function(f,d,p){return[f*.2989+d*.587+p*.114]},"gray-rgb":function(f){return[f,f,f]},"gray-hsb":function(f){return[0,0,f]},"gray-hsl":function(f){return[0,0,f]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return T.each(t,function(f,d){i[d]=[],T.each(f,function(p,y){var P=T.capitalize(p),m=/^(hue|saturation)$/.test(p),g=i[d][y]=d==="gradient"?p==="gradient"?function(O){var C=this._components[0];return O=Ge.read(Array.isArray(O)?O:arguments,0,{readNull:!0}),C!==O&&(C&&C._removeOwner(this),O&&O._addOwner(this)),O}:function(){return Z.read(arguments,0,{readNull:p==="highlight",clone:!0})}:function(O){return O==null||isNaN(O)?0:+O};this["get"+P]=function(){return this._type===d||m&&/^hs[bl]$/.test(this._type)?this._components[y]:this._convert(d)[y]},this["set"+P]=function(O){this._type!==d&&!(m&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(d),this._properties=t[d],this._type=d),this._components[y]=g.call(this,O),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function f(d){var p=arguments,y=this.__read,P=0,m,g,O,C;Array.isArray(d)&&(p=d,d=p[0]);var L=d!=null&&typeof d;if(L==="string"&&d in t&&(m=d,d=p[1],Array.isArray(d)?(g=d,O=p[2]):(y&&(P=1),p=T.slice(p,1),L=typeof d)),!g){if(C=L==="number"?p:L==="object"&&d.length!=null?d:null,C){m||(m=C.length>=3?"rgb":"gray");var w=t[m].length;O=C[w],y&&(P+=C===arguments?w+(O!=null?1:0):1),C.length>w&&(C=T.slice(C,0,w))}else if(L==="string"){var x=u(d);m=x[0],g=x[1],g.length===4&&(O=g[3],g.length--)}else if(L==="object")if(d.constructor===f){if(m=d._type,g=d._components.slice(),O=d._alpha,m==="gradient")for(var v=1,b=g.length;v<b;v++){var E=g[v];E&&(g[v]=E.clone())}}else if(d.constructor===Ge)m="gradient",C=p;else{m="hue"in d?"lightness"in d?"hsl":"hsb":"gradient"in d||"stops"in d||"radial"in d?"gradient":"gray"in d?"gray":"rgb";var M=t[m],S=i[m];this._components=g=[];for(var v=0,b=M.length;v<b;v++){var B=d[M[v]];B==null&&!v&&m==="gradient"&&"stops"in d&&(B={stops:d.stops,radial:d.radial}),B=S[v].call(this,B),B!=null&&(g[v]=B)}O=d.alpha}y&&m&&(P=1)}if(this._type=m||"rgb",!g){this._components=g=[];for(var S=i[this._type],v=0,b=S.length;v<b;v++){var B=S[v].call(this,C&&C[v]);B!=null&&(g[v]=B)}}return this._components=g,this._properties=t[this._type],this._alpha=O,y&&(this.__read=P),this},set:"#initialize",_serialize:function(f,d){var p=this.getComponents();return T.serialize(/^(gray|rgb)$/.test(this._type)?p:[this._type].concat(p),f,!0,d)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(f){var d;return this._type===f?this._components.slice():(d=c[this._type+"-"+f])?d.apply(this,this._components):c["rgb-"+f].apply(this,c[this._type+"-rgb"].apply(this,this._components))},convert:function(f){return new $t(f,this._convert(f),this._alpha)},getType:function(){return this._type},setType:function(f){this._components=this._convert(f),this._properties=t[f],this._type=f},getComponents:function(){var f=this._components.slice();return this._alpha!=null&&f.push(this._alpha),f},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(f){this._alpha=f==null?null:Math.min(Math.max(f,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(f){var d=T.isPlainValue(f,!0)?$t.read(arguments):f;return d===this||d&&this._class===d._class&&this._type===d._type&&this.getAlpha()===d.getAlpha()&&T.equals(this._components,d._components)||!1},toString:function(){for(var f=this._properties,d=[],p=this._type==="gradient",y=Ut.instance,P=0,m=f.length;P<m;P++){var g=this._components[P];g!=null&&d.push(f[P]+": "+(p?g:y.number(g)))}return this._alpha!=null&&d.push("alpha: "+y.number(this._alpha)),"{ "+d.join(", ")+" }"},toCSS:function(f){var d=this._convert("rgb"),p=f||this._alpha==null?1:this._alpha;function y(P){return Math.round((P<0?0:P>1?1:P)*255)}return d=[y(d[0]),y(d[1]),y(d[2])],p<1&&d.push(p<0?0:p),f?"#"+((1<<24)+(d[0]<<16)+(d[1]<<8)+d[2]).toString(16).slice(1):(d.length==4?"rgba(":"rgb(")+d.join(",")+")"},toCanvasStyle:function(f,d){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var p=this._components,y=p[0],P=y._stops,m=p[1],g=p[2],O=p[3],C=d&&d.inverted(),L;if(C&&(m=C._transformPoint(m),g=C._transformPoint(g),O&&(O=C._transformPoint(O))),y._radial){var w=g.getDistance(m);if(O){var x=O.subtract(m);x.getLength()>w&&(O=m.add(x.normalize(w-.1)))}var v=O||m;L=f.createRadialGradient(v.x,v.y,0,m.x,m.y,w)}else L=f.createLinearGradient(m.x,m.y,g.x,g.y);for(var b=0,E=P.length;b<E;b++){var M=P[b],S=M._offset;L.addColorStop(S??b/(E-1),M._color.toCanvasStyle())}return this._canvasStyle=L},transform:function(f){if(this._type==="gradient"){for(var d=this._components,p=1,y=d.length;p<y;p++){var P=d[p];f._transformPoint(P,P,!0)}this._changed()}},statics:{_types:t,random:function(){var f=Math.random;return new $t(f(),f(),f())},_setOwner:function(f,d,p){return f&&(f._owner&&d&&f._owner!==d&&(f=f.clone()),!f._owner^!d&&(f._owner=d||null,f._setter=p||null)),f}}})},new function(){var t={add:function(i,n){return i+n},subtract:function(i,n){return i-n},multiply:function(i,n){return i*n},divide:function(i,n){return i/n}};return T.each(t,function(i,n){this[n]=function(a){a=$t.read(arguments);for(var u=this._type,l=this._components,c=a._convert(u),f=0,d=l.length;f<d;f++)c[f]=i(l[f],c[f]);return new $t(u,c,this._alpha!=null?i(this._alpha,a.getAlpha()):null)}},{})}),Ge=T.extend({_class:"Gradient",initialize:function(i,n){this._id=ge.get(),i&&T.isPlainObject(i)&&(this.set(i),i=n=null),this._stops==null&&this.setStops(i||["white","black"]),this._radial==null&&this.setRadial(typeof n=="string"&&n==="radial"||n||!1)},_serialize:function(t,i){return i.add(this,function(){return T.serialize([this._stops,this._radial],t,!0,i)})},_changed:function(){for(var t=0,i=this._owners&&this._owners.length;t<i;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var i=this._owners?this._owners.indexOf(t):-1;i!=-1&&(this._owners.splice(i,1),this._owners.length||(this._owners=A))},clone:function(){for(var t=[],i=0,n=this._stops.length;i<n;i++)t[i]=this._stops[i].clone();return new Ge(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var i=this._stops;if(i)for(var n=0,a=i.length;n<a;n++)i[n]._owner=A;i=this._stops=ii.readList(t,0,{clone:!0});for(var n=0,a=i.length;n<a;n++)i[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var i=this._stops,n=t._stops,a=i.length;if(a===n.length){for(var u=0;u<a;u++)if(!i[u].equals(n[u]))return!1;return!0}}return!1}}),ii=T.extend({_class:"GradientStop",initialize:function(i,n){var a=i,u=n;typeof i=="object"&&n===A&&(Array.isArray(i)&&typeof i[0]!="number"?(a=i[0],u=i[1]):("color"in i||"offset"in i||"rampPoint"in i)&&(a=i.color,u=i.offset||i.rampPoint||0)),this.setColor(a),this.setOffset(u)},clone:function(){return new ii(this._color.clone(),this._offset)},_serialize:function(t,i){var n=this._color,a=this._offset;return T.serialize(a==null?[n]:[n,a],t,!0,i)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){$t._setOwner(this._color,null),this._color=$t._setOwner($t.read(arguments,0),this,"setColor"),this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),ni=T.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new Z,selectedColor:null},i=T.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=T.set({},i,{fillColor:new $t}),a={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},u={beans:!0},l={_class:"Style",beans:!0,initialize:function(f,d,p){this._values={},this._owner=d,this._project=d&&d._project||p||Bt.project,this._defaults=!d||d instanceof Le?i:d instanceof Oe?n:t,f&&this.set(f)}};return T.each(i,function(c,f){var d=/Color$/.test(f),p=f==="shadowOffset",y=T.capitalize(f),P=a[f],m="set"+y,g="get"+y;l[m]=function(O){var C=this._owner,L=C&&C._children,w=L&&L.length>0&&!(C instanceof Te);if(w)for(var x=0,v=L.length;x<v;x++)L[x]._style[m](O);if((f==="selectedColor"||!w)&&f in this._defaults){var b=this._values[f];b!==O&&(d&&(b&&($t._setOwner(b,null),b._canvasStyle=null),O&&O.constructor===$t&&(O=$t._setOwner(O,C,w&&m))),this._values[f]=O,C&&C._changed(P||129))}},l[g]=function(O){var C=this._owner,L=C&&C._children,w=L&&L.length>0&&!(C instanceof Te),x;if(w&&!O)for(var v=0,b=L.length;v<b;v++){var E=L[v]._style[g]();if(!v)x=E;else if(!T.equals(x,E))return A}else if(f in this._defaults){var x=this._values[f];if(x===A)x=this._defaults[f],x&&x.clone&&(x=x.clone());else{var M=d?$t:p?Z:null;M&&!(x&&x.constructor===M)&&(this._values[f]=x=M.read([x],0,{readNull:!0,clone:!0}))}}return x&&d&&(x=$t._setOwner(x,C,w&&m)),x},u[g]=function(O){return this._style[g](O)},u[m]=function(O){this._style[m](O)}}),T.each({Font:"FontFamily",WindingRule:"FillRule"},function(c,f){var d="get"+f,p="set"+f;l[d]=u[d]="#get"+c,l[p]=u[p]="#set"+c}),Nt.inject(u),l},{set:function(t){var i=t instanceof ni,n=i?t._values:t;if(n){for(var a in n)if(a in this._defaults){var u=n[a];this[a]=u&&i&&u.clone?u.clone():u}}},equals:function(t){function i(n,a,u){var l=n._values,c=a._values,f=a._defaults;for(var d in l){var p=l[d],y=c[d];if(!(u&&d in c)&&!T.equals(p,y===A?f[d]:y))return!1}return!0}return t===this||t&&this._class===t._class&&i(this,t)&&i(t,this,!0)||!1},_dispose:function(){var t;t=this.getFillColor(),t&&(t._canvasStyle=null),t=this.getStrokeColor(),t&&(t._canvasStyle=null),t=this.getShadowColor(),t&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var i=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),i??n*1.2}}),Jt=new function(){function t(i,n,a,u){for(var l=["","webkit","moz","Moz","ms","o"],c=n[0].toUpperCase()+n.substring(1),f=0;f<6;f++){var d=l[f],p=d?d+c:n;if(p in i){if(a)i[p]=u;else return i[p];break}}}return{getStyles:function(i){var n=i&&i.nodeType!==9?i.ownerDocument:i,a=n&&n.defaultView;return a&&a.getComputedStyle(i,"")},getBounds:function(i,n){var a=i.ownerDocument,u=a.body,l=a.documentElement,c;try{c=i.getBoundingClientRect()}catch{c={left:0,top:0,width:0,height:0}}var f=c.left-(l.clientLeft||u.clientLeft||0),d=c.top-(l.clientTop||u.clientTop||0);if(!n){var p=a.defaultView;f+=p.pageXOffset||l.scrollLeft||u.scrollLeft,d+=p.pageYOffset||l.scrollTop||u.scrollTop}return new Ct(f,d,c.width,c.height)},getViewportBounds:function(i){var n=i.ownerDocument,a=n.defaultView,u=n.documentElement;return new Ct(0,0,a.innerWidth||u.clientWidth,a.innerHeight||u.clientHeight)},getOffset:function(i,n){return Jt.getBounds(i,n).getPoint()},getSize:function(i){return Jt.getBounds(i,!0).getSize()},isInvisible:function(i){return Jt.getSize(i).equals(new gt(0,0))},isInView:function(i){return!Jt.isInvisible(i)&&Jt.getViewportBounds(i).intersects(Jt.getBounds(i,!0))},isInserted:function(i){return Y.body.contains(i)},getPrefixed:function(i,n){return i&&t(i,n)},setPrefixed:function(i,n,a){if(typeof n=="object")for(var u in n)t(i,u,!0,n[u]);else t(i,n,!0,a)}}},Ht={add:function(t,i){if(t)for(var n in i)for(var a=i[n],u=n.split(/[\s,]+/g),l=0,c=u.length;l<c;l++){var f=u[l],d=t===Y&&(f==="touchstart"||f==="touchmove")?{passive:!1}:!1;t.addEventListener(f,a,d)}},remove:function(t,i){if(t)for(var n in i)for(var a=i[n],u=n.split(/[\s,]+/g),l=0,c=u.length;l<c;l++)t.removeEventListener(u[l],a,!1)},getPoint:function(t){var i=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new Z(i.pageX||i.clientX+Y.documentElement.scrollLeft,i.pageY||i.clientY+Y.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,i){return Ht.getPoint(t).subtract(Jt.getOffset(i||Ht.getTarget(t)))}};Ht.requestAnimationFrame=new function(){var t=Jt.getPrefixed(R,"requestAnimationFrame"),i=!1,n=[],a;function u(){var l=n;n=[];for(var c=0,f=l.length;c<f;c++)l[c]();i=t&&n.length,i&&t(u)}return function(l){n.push(l),t?i||(t(u),i=!0):a||(a=setInterval(u,1e3/60))}};var Zt=T.extend(ot,{_class:"View",initialize:function t(i,n){function a(P){return n[P]||parseInt(n.getAttribute(P),10)}function u(){var P=Jt.getSize(n);return P.isNaN()||P.isZero()?new gt(a("width"),a("height")):P}var l;if(R&&n){this._id=n.getAttribute("id"),this._id==null&&n.setAttribute("id",this._id="paper-view-"+t._id++),Ht.add(n,this._viewEvents);var c="none";if(Jt.setPrefixed(n.style,{userDrag:c,userSelect:c,touchCallout:c,contentZooming:c,tapHighlightColor:"rgba(0,0,0,0)"}),j.hasAttribute(n,"resize")){var f=this;Ht.add(R,this._windowEvents={resize:function(){f.setViewSize(u())}})}if(l=u(),j.hasAttribute(n,"stats")&&typeof Stats<"u"){this._stats=new Stats;var d=this._stats.domElement,p=d.style,y=Jt.getOffset(n);p.position="absolute",p.left=y.x+"px",p.top=y.y+"px",Y.body.appendChild(d)}}else l=new gt(n),n=null;this._project=i,this._scope=i._scope,this._element=n,this._pixelRatio||(this._pixelRatio=R&&R.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new Wt)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Bt.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Zt._focused===this&&(Zt._focused=null),Zt._views.splice(Zt._views.indexOf(this),1),delete Zt._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Ht.remove(this._element,this._viewEvents),Ht.remove(R,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:T.each(Nt._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Ht.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var i=t._element;(!Jt.getPrefixed(Y,"hidden")||j.getAttribute(i,"keepalive")==="true")&&Jt.isInView(i)&&t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Bt=this._scope;var t=Date.now()/1e3,i=this._last?t-this._last:0;this._last=t,this.emit("frame",new T({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,i){var n=this._frameItems;i?(n[t._id]={item:t,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete n[t._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var i in this._frameItems){var n=this._frameItems[i];n.item.emit("frame",new T(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=A},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var t=this._viewSize;return new ae(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=gt.read(arguments),i=t.subtract(this._viewSize);i.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:i}),this._autoUpdate&&this.update())},_setElementSize:function(t,i){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==i&&(n.height=i))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ct(new Z,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return Jt.isInView(this._element)},isInserted:function(){return Jt.isInserted(this._element)},getPixelSize:function(t){var i=this._element,n;if(i){var a=i.parentNode,u=Y.createElement("div");u.style.fontSize=t,a.appendChild(u),n=parseFloat(Jt.getStyles(u).fontSize),a.removeChild(u)}else n=parseFloat(n);return n},getTextWidth:function(t,i){return 0}},T.each(["rotate","scale","shear","skew"],function(t){var i=t==="rotate";this[t]=function(){var n=arguments,a=(i?T:Z).read(n),u=Z.read(n,0,{readNull:!0});return this.transform(new Wt()[t](a,u||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new Wt;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=Z.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform(new Wt().scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var i=this.getRotation();i!=null&&t!=null&&this.rotate(t-i)},getScaling:function(){var t=this._decompose().scaling;return new we(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),i=Z.read(arguments,0,{clone:!0,readNull:!0});t&&i&&this.scale(i.x/t.x,i.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.set.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(Z.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(Z.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(Z.read(arguments))},getEventPoint:function(t){return this.viewToProject(Ht.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,i){Y&&typeof i=="string"&&(i=Y.getElementById(i));var n=R?Ei:Zt;return new n(t,i)}}},new function(){if(!R)return;var t,i,n=!1,a=!1;function u(k){var V=Ht.getTarget(k);return V.getAttribute&&Zt._viewsById[V.getAttribute("id")]}function l(){var k=Zt._focused;if(!k||!k.isVisible()){for(var V=0,H=Zt._views.length;V<H;V++)if((k=Zt._views[V]).isVisible()){Zt._focused=i=k;break}}}function c(k,V,H){k._handleMouseEvent("mousemove",V,H)}var f=R.navigator,d,p,y;f.pointerEnabled||f.msPointerEnabled?(d="pointerdown MSPointerDown",p="pointermove MSPointerMove",y="pointerup pointercancel MSPointerUp MSPointerCancel"):(d="touchstart",p="touchmove",y="touchend touchcancel","ontouchstart"in R&&f.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(d+=" mousedown",p+=" mousemove",y+=" mouseup"));var P={},m={mouseout:function(k){var V=Zt._focused,H=Ht.getRelatedTarget(k);if(V&&(!H||H.nodeName==="HTML")){var J=Ht.getOffset(k,V._element),G=J.x,Q=Math.abs,st=Q(G),ut=1<<25,ht=st-ut;J.x=Q(ht)<st?ht*(G<0?-1:1):G,c(V,k,V.viewToProject(J))}},scroll:l};P[d]=function(k){var V=Zt._focused=u(k);n||(n=!0,V._handleMouseEvent("mousedown",k))},m[p]=function(k){var V=Zt._focused;if(!a){var H=u(k);H?V!==H&&(V&&c(V,k),t||(t=V),V=Zt._focused=i=H):i&&i===V&&(t&&!t.isInserted()&&(t=null),V=Zt._focused=t,t=null,l())}V&&c(V,k)},m[d]=function(){a=!0},m[y]=function(k){var V=Zt._focused;V&&n&&V._handleMouseEvent("mouseup",k),a=n=!1},Ht.add(Y,m),Ht.add(R,{load:l});var g=!1,O=!1,C={doubleclick:"click",mousedrag:"mousemove"},L=!1,w,x,v,b,E,M,S,B;function D(k,V,H,J,G,Q,st){var ut=!1,ht;function pt(et,nt){if(et.responds(nt)){if(ht||(ht=new Mi(nt,J,G,V||et,Q?G.subtract(Q):null)),et.emit(nt,ht)&&(g=!0,ht.prevented&&(O=!0),ht.stopped))return ut=!0}else{var ft=C[nt];if(ft)return pt(et,ft)}}for(;k&&k!==st&&!pt(k,H);)k=k._parent;return ut}function X(k,V,H,J,G,Q){return k._project.removeOn(H),O=g=!1,E&&D(E,null,H,J,G,Q)||V&&V!==E&&!V.isDescendant(E)&&D(V,null,H==="mousedrag"?"mousemove":H,J,G,Q,E)||D(k,E||V||k,H,J,G,Q)}var W={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:P,_handleMouseEvent:function(k,V,H){var J=this._itemEvents,G=J.native[k],Q=k==="mousemove",st=this._scope.tool,ut=this;function ht(wt){return J.virtual[wt]||ut.responds(wt)||st&&st.responds(wt)}Q&&n&&ht("mousedrag")&&(k="mousedrag"),H||(H=this.getEventPoint(V));var pt=this.getBounds().contains(H),et=G&&pt&&ut._project.hitTest(H,{tolerance:0,fill:!0,stroke:!0}),nt=et&&et.item||null,ft=!1,vt={};if(vt[k.substr(5)]=!0,G&&nt!==b&&(b&&D(b,null,"mouseleave",V,H),nt&&D(nt,null,"mouseenter",V,H),b=nt),L^pt&&(D(this,null,pt?"mouseenter":"mouseleave",V,H),ft=!0),(pt||vt.drag)&&!H.equals(x)&&(X(this,nt,Q?k:"mousemove",V,H,x),ft=!0),L=pt,vt.down&&pt||vt.up&&w){if(X(this,nt,k,V,H,w),vt.down){if(B=nt===M&&Date.now()-S<300,v=M=nt,!O&&nt){for(var _t=nt;_t&&!_t.responds("mousedrag");)_t=_t._parent;_t&&(E=nt)}w=H}else vt.up&&(!O&&nt===v&&(S=Date.now(),X(this,nt,B?"doubleclick":"click",V,H,w),B=!1),v=E=null);L=!1,ft=!0}x=H,ft&&st&&(g=st._handleMouseEvent(k,V,H,vt)||g),V.cancelable!==!1&&(g&&!vt.move||vt.down&&ht("mouseup"))&&V.preventDefault()},_handleKeyEvent:function(k,V,H,J){var G=this._scope,Q=G.tool,st;function ut(ht){ht.responds(k)&&(Bt=G,ht.emit(k,st=st||new Ai(k,V,H,J)))}this.isVisible()&&(ut(this),Q&&Q.responds(k)&&ut(Q))},_countItemEvent:function(k,V){var H=this._itemEvents,J=H.native,G=H.virtual;for(var Q in W)J[Q]=(J[Q]||0)+(W[Q][k]||0)*V;G[k]=(G[k]||0)+V},statics:{updateFocus:l,_resetState:function(){n=a=g=L=!1,t=i=w=x=v=b=E=M=S=B=null}}}}),Ei=Zt.extend({_class:"CanvasView",initialize:function(i,n){if(!(n instanceof R.HTMLCanvasElement)){var a=gt.read(arguments,1);if(a.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+T.slice(arguments,1));n=te.getCanvas(a)}var u=this._context=n.getContext("2d");if(u.save(),this._pixelRatio=1,!/^off|false$/.test(j.getAttribute(n,"hidpi"))){var l=R.devicePixelRatio||1,c=Jt.getPrefixed(u,"backingStorePixelRatio")||1;this._pixelRatio=l/c}Zt.call(this,i,n),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(i,n){var a=this._pixelRatio;if(t.base.call(this,i*a,n*a),a!==1){var u=this._element,l=this._context;if(!j.hasAttribute(u,"resize")){var c=u.style;c.width=i+"px",c.height=n+"px"}l.restore(),l.save(),l.scale(a,a)}},getContext:function(){return this._context},getPixelSize:function t(i){var n=Bt.agent,a;if(n&&n.firefox)a=t.base.call(this,i);else{var u=this._context,l=u.font;u.font=i+" serif",a=parseFloat(u.font),u.font=l}return a},getTextWidth:function(t,i){var n=this._context,a=n.font,u=0;n.font=t;for(var l=0,c=i.length;l<c;l++)u=Math.max(u,n.measureText(i[l]).width);return n.font=a,u},update:function(){if(!this._needsUpdate)return!1;var t=this._project,i=this._context,n=this._viewSize;return i.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(i,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),je=T.extend({_class:"Event",initialize:function(i){this.event=i,this.type=i&&i.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return _i.modifiers}}),Ai=je.extend({_class:"KeyEvent",initialize:function(i,n,a,u){this.type=i,this.event=n,this.key=a,this.character=u},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),_i=new function(){var t={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},i={tab:"	",space:" ",enter:"\r"},n={},a={},u,l,c=new T({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var p=Bt&&Bt.agent;return p&&p.mac?this.meta:this.control}}});function f(p){var y=p.key||p.keyIdentifier;return y=/^U\+/.test(y)?String.fromCharCode(parseInt(y.substr(2),16)):/^Arrow[A-Z]/.test(y)?y.substr(5):y==="Unidentified"||y===A?String.fromCharCode(p.keyCode):y,t[y]||(y.length>1?T.hyphenate(y):y.toLowerCase())}function d(p,y,P,m){var g=Zt._focused,O;if(n[y]=p,p?a[y]=P:delete a[y],y.length>1&&(O=T.camelize(y))in c){c[O]=p;var C=Bt&&Bt.agent;if(O==="meta"&&C&&C.mac)if(p)u={};else{for(var L in u)L in a&&d(!1,L,u[L],m);u=null}}else p&&u&&(u[y]=P);g&&g._handleKeyEvent(p?"keydown":"keyup",m,y,P)}return Ht.add(Y,{keydown:function(p){var y=f(p),P=Bt&&Bt.agent;y.length>1||P&&P.chrome&&(p.altKey||P.mac&&p.metaKey||!P.mac&&p.ctrlKey)?d(!0,y,i[y]||(y.length>1?"":y),p):l=y},keypress:function(p){if(l){var y=f(p),P=p.charCode,m=P>=32?String.fromCharCode(P):y.length>1?"":y;y!==l&&(y=m.toLowerCase()),d(!0,y,m,p),l=null}},keyup:function(p){var y=f(p);y in a&&d(!1,y,a[y],p)}}),Ht.add(R,{blur:function(p){for(var y in a)d(!1,y,a[y],p)}}),{modifiers:c,isDown:function(p){return!!n[p]}}},Mi=je.extend({_class:"MouseEvent",initialize:function(i,n,a,u,l){this.type=i,this.event=n,this.point=a,this.target=u,this.delta=l},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Ni=je.extend({_class:"ToolEvent",_item:null,initialize:function(i,n,a){this.tool=i,this.type=n,this.event=a},_choosePoint:function(t,i){return t||(i?i.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var i=t.item,n=i._parent;/^(Group|CompoundPath)$/.test(n._class);)i=n,n=n._parent;this._item=i}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Bi=dt.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(i){dt.call(this),this._moveCount=-1,this._downCount=-1,this.set(i)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,t!=null&&this._maxDistance!=null&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,this._minDistance!=null&&t!=null&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,i,n,a){Bt=this._scope,a.drag&&!this.responds(t)&&(t="mousemove");var u=a.move||a.drag,l=this.responds(t),c=!1,f=this;function d(y,P){var m=n,g=u?f._point:f._downPoint||m;if(u){if(f._moveCount>=0&&m.equals(g))return!1;if(g&&(y!=null||P!=null)){var O=m.subtract(g),C=O.getLength();if(C<(y||0))return!1;P&&(m=g.add(O.normalize(Math.min(C,P))))}f._moveCount++}return f._point=m,f._lastPoint=g||m,a.down&&(f._moveCount=-1,f._downPoint=m,f._downCount++),!0}function p(){l&&(c=f.emit(t,new Ni(f,t,i))||c)}if(a.down)d(),p();else if(a.up)d(null,this._maxDistance),p();else if(l)for(;d(this._minDistance,this._maxDistance);)p();return c}}),ki=T.extend(ot,{_class:"Tween",statics:{easings:new T({linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+2*(2-t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}})},initialize:function t(i,n,a,u,l,c){this.object=i;var f=typeof l,d=f==="function";this.type=d?f:f==="string"?l:"linear",this.easing=d?l:t.easings[this.type],this.duration=u,this.running=!1,this._then=null,this._startTime=null;var p=n||a;this._keys=p?Object.keys(p):[],this._parsedKeys=this._parseKeys(this._keys),this._from=p&&this._getState(n),this._to=p&&this._getState(a),c!==!1&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>=1&&(t=1,this.running=!1);for(var i=this.easing(t),n=this._keys,a=function(y){return typeof y=="function"?y(i,t):y},u=0,l=n&&n.length;u<l;u++){var c=n[u],f=a(this._from[c]),d=a(this._to[c]),p=f&&d&&f.__add&&d.__add?d.__subtract(f).__multiply(i).__add(f):(d-f)*i+f;this._setProperty(this._parsedKeys[c],p)}this.responds("update")&&this.emit("update",new T({progress:t,factor:i})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(t){var i=this._startTime,n=i?(t-i)/this.duration:0;i||(this._startTime=t),this.update(n)},_getState:function(t){for(var i=this._keys,n={},a=0,u=i.length;a<u;a++){var l=i[a],c=this._parsedKeys[l],f=this._getProperty(c),d;if(t){var p=this._resolveValue(f,t[l]);this._setProperty(c,p),d=this._getProperty(c),d=d&&d.clone?d.clone():d,this._setProperty(c,f)}else d=f&&f.clone?f.clone():f;n[l]=d}return n},_resolveValue:function(t,i){if(i){if(Array.isArray(i)&&i.length===2){var n=i[0];return n&&n.match&&n.match(/^[+\-\*\/]=/)?this._calculate(t,n[0],i[1]):i}else if(typeof i=="string"){var a=i.match(/^[+\-*/]=(.*)/);if(a){var u=JSON.parse(a[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,i[0],u)}}}return i},_calculate:function(t,i,n){return Bt.PaperScript.calculateBinary(t,i,n)},_parseKeys:function(t){for(var i={},n=0,a=t.length;n<a;n++){var u=t[n],l=u.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");i[u]=l.split("/")}return i},_getProperty:function(t,i){for(var n=this.object,a=0,u=t.length-(i||0);a<u&&n;a++)n=n[t[a]];return n},_setProperty:function(t,i){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=i)}}),vi={request:function(t){var i=new s.XMLHttpRequest;return i.open((t.method||"get").toUpperCase(),t.url,T.pick(t.async,!0)),t.mimeType&&i.overrideMimeType(t.mimeType),i.onload=function(){var n=i.status;n===0||n===200?t.onLoad&&t.onLoad.call(i,i.responseText):i.onerror()},i.onerror=function(){var n=i.status,a='Could not load "'+t.url+'" (Status: '+n+")";if(t.onError)t.onError(a,n);else throw new Error(a)},i.send(null)}},te=T.exports.CanvasProvider={canvases:[],getCanvas:function(t,i,n){if(!R)return null;var a,u=!0;typeof t=="object"&&(i=t.height,t=t.width),this.canvases.length?a=this.canvases.pop():(a=Y.createElement("canvas"),u=!1);var l=a.getContext("2d",n||{});if(!l)throw new Error("Canvas "+a+" is unable to provide a 2D context.");return a.width===t&&a.height===i?u&&l.clearRect(0,0,t+1,i+1):(a.width=t,a.height=i),l.save(),a},getContext:function(t,i,n){var a=this.getCanvas(t,i,n);return a?a.getContext("2d",n||{}):null},release:function(t){var i=t&&t.canvas?t.canvas:t;i&&i.getContext&&(i.getContext("2d").restore(),this.canvases.push(i))}},ri=new function(){var t=Math.min,i=Math.max,n=Math.abs,a,u,l,c,f,d,p,y,P,m,g;function O(E,M,S){return .2989*E+.587*M+.114*S}function C(E,M,S,X){var D=X-O(E,M,S);P=E+D,m=M+D,g=S+D;var X=O(P,m,g),W=t(P,m,g),k=i(P,m,g);if(W<0){var V=X-W;P=X+(P-X)*X/V,m=X+(m-X)*X/V,g=X+(g-X)*X/V}if(k>255){var H=255-X,J=k-X;P=X+(P-X)*H/J,m=X+(m-X)*H/J,g=X+(g-X)*H/J}}function L(E,M,S){return i(E,M,S)-t(E,M,S)}function w(E,M,S,B){var D=[E,M,S],X=i(E,M,S),W=t(E,M,S),k;W=W===E?0:W===M?1:2,X=X===E?0:X===M?1:2,k=t(W,X)===0?i(W,X)===1?2:1:0,D[X]>D[W]?(D[k]=(D[k]-D[W])*B/(D[X]-D[W]),D[X]=B):D[k]=D[X]=0,D[W]=0,P=D[0],m=D[1],g=D[2]}var x={multiply:function(){P=f*a/255,m=d*u/255,g=p*l/255},screen:function(){P=f+a-f*a/255,m=d+u-d*u/255,g=p+l-p*l/255},overlay:function(){P=f<128?2*f*a/255:255-2*(255-f)*(255-a)/255,m=d<128?2*d*u/255:255-2*(255-d)*(255-u)/255,g=p<128?2*p*l/255:255-2*(255-p)*(255-l)/255},"soft-light":function(){var E=a*f/255;P=E+f*(255-(255-f)*(255-a)/255-E)/255,E=u*d/255,m=E+d*(255-(255-d)*(255-u)/255-E)/255,E=l*p/255,g=E+p*(255-(255-p)*(255-l)/255-E)/255},"hard-light":function(){P=a<128?2*a*f/255:255-2*(255-a)*(255-f)/255,m=u<128?2*u*d/255:255-2*(255-u)*(255-d)/255,g=l<128?2*l*p/255:255-2*(255-l)*(255-p)/255},"color-dodge":function(){P=f===0?0:a===255?255:t(255,255*f/(255-a)),m=d===0?0:u===255?255:t(255,255*d/(255-u)),g=p===0?0:l===255?255:t(255,255*p/(255-l))},"color-burn":function(){P=f===255?255:a===0?0:i(0,255-(255-f)*255/a),m=d===255?255:u===0?0:i(0,255-(255-d)*255/u),g=p===255?255:l===0?0:i(0,255-(255-p)*255/l)},darken:function(){P=f<a?f:a,m=d<u?d:u,g=p<l?p:l},lighten:function(){P=f>a?f:a,m=d>u?d:u,g=p>l?p:l},difference:function(){P=f-a,P<0&&(P=-P),m=d-u,m<0&&(m=-m),g=p-l,g<0&&(g=-g)},exclusion:function(){P=f+a*(255-f-f)/255,m=d+u*(255-d-d)/255,g=p+l*(255-p-p)/255},hue:function(){w(a,u,l,L(f,d,p)),C(P,m,g,O(f,d,p))},saturation:function(){w(f,d,p,L(a,u,l)),C(P,m,g,O(f,d,p))},luminosity:function(){C(f,d,p,O(a,u,l))},color:function(){C(a,u,l,O(f,d,p))},add:function(){P=t(f+a,255),m=t(d+u,255),g=t(p+l,255)},subtract:function(){P=i(f-a,0),m=i(d-u,0),g=i(p-l,0)},average:function(){P=(f+a)/2,m=(d+u)/2,g=(p+l)/2},negation:function(){P=255-n(255-a-f),m=255-n(255-u-d),g=255-n(255-l-p)}},v=this.nativeModes=T.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(E){this[E]=!0},{}),b=te.getContext(1,1,{willReadFrequently:!0});b&&(T.each(x,function(E,M){var S=M==="darken",B=!1;b.save();try{b.fillStyle=S?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=M,b.globalCompositeOperation===M&&(b.fillStyle=S?"#a00":"#300",b.fillRect(0,0,1,1),B=b.getImageData(0,0,1,1).data[0]!==S?170:51)}catch{}b.restore(),v[M]=B}),te.release(b)),this.process=function(E,M,S,B,D){var X=M.canvas,W=E==="normal";if(W||v[E])S.save(),S.setTransform(1,0,0,1,0,0),S.globalAlpha=B,W||(S.globalCompositeOperation=E),S.drawImage(X,D.x,D.y),S.restore();else{var k=x[E];if(!k)return;for(var V=S.getImageData(D.x,D.y,X.width,X.height),H=V.data,J=M.getImageData(0,0,X.width,X.height).data,G=0,Q=H.length;G<Q;G+=4){a=J[G],f=H[G],u=J[G+1],d=H[G+1],l=J[G+2],p=H[G+2],c=J[G+3],y=H[G+3],k();var st=c*B/255,ut=1-st;H[G]=st*P+ut*f,H[G+1]=st*m+ut*d,H[G+2]=st*g+ut*p,H[G+3]=c*B+ut*y}S.putImageData(V,D.x,D.y)}}},Gt=new function(){var t="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",a={href:n,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};function u(f,d,p){return c(Y.createElementNS(t,f),d,p)}function l(f,d){var p=a[d],y=p?f.getAttributeNS(p,d):f.getAttribute(d);return y==="null"?null:y}function c(f,d,p){for(var y in d){var P=d[y],m=a[y];typeof P=="number"&&p&&(P=p.number(P)),m?f.setAttributeNS(m,y,P):f.setAttribute(y,P)}return f}return{svg:t,xmlns:i,xlink:n,create:u,get:l,set:c}},gi=T.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,i){return!i&&(t instanceof Ye||t instanceof pe||t instanceof Oe)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,i){var n=T.capitalize(i),a=t[2];this[i]={type:t[1],property:i,attribute:t[0],toSVG:a,fromSVG:a&&T.each(a,function(u,l){this[u]=l},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});new function(){var t;function i(x,v,b){var E=new T,M=x.getTranslation();if(v){var S;x.isInvertible()?(x=x._shiftless(),S=x._inverseTransform(M),M=null):S=new Z,E[b?"cx":"x"]=S.x,E[b?"cy":"y"]=S.y}if(!x.isIdentity()){var B=x.decompose();if(B){var D=[],X=B.rotation,W=B.scaling,k=B.skewing;M&&!M.isZero()&&D.push("translate("+t.point(M)+")"),X&&D.push("rotate("+t.number(X)+")"),(!Et.isZero(W.x-1)||!Et.isZero(W.y-1))&&D.push("scale("+t.point(W)+")"),k.x&&D.push("skewX("+t.number(k.x)+")"),k.y&&D.push("skewY("+t.number(k.y)+")"),E.transform=D.join(" ")}else E.transform="matrix("+x.getValues().join(",")+")"}return E}function n(x,v){for(var b=i(x._matrix),E=x._children,M=Gt.create("g",b,t),S=0,B=E.length;S<B;S++){var D=E[S],X=L(D,v);if(X)if(D.isClipMask()){var W=Gt.create("clipPath");W.appendChild(X),O(D,W,"clip"),Gt.set(M,{"clip-path":"url(#"+W.id+")"})}else M.appendChild(X)}return M}function a(x,v){var b=i(x._matrix,!0),E=x.getSize(),M=x.getImage();return b.x-=E.width/2,b.y-=E.height/2,b.width=E.width,b.height=E.height,b.href=v.embedImages==!1&&M&&M.src||x.toDataURL(),Gt.create("image",b,t)}function u(x,v){var b=v.matchShapes;if(b){var E=x.toShape(!1);if(E)return l(E)}var M=x._segments,S=M.length,B,D=i(x._matrix);if(b&&S>=2&&!x.hasHandles())if(S>2){B=x._closed?"polygon":"polyline";for(var X=[],W=0;W<S;W++)X.push(t.point(M[W]._point));D.points=X.join(" ")}else{B="line";var k=M[0]._point,V=M[1]._point;D.set({x1:k.x,y1:k.y,x2:V.x,y2:V.y})}else B="path",D.d=x.getPathData(null,v.precision);return Gt.create(B,D,t)}function l(x){var v=x._type,b=x._radius,E=i(x._matrix,!0,v!=="rectangle");if(v==="rectangle"){v="rect";var M=x._size,S=M.width,B=M.height;E.x-=S/2,E.y-=B/2,E.width=S,E.height=B,b.isZero()&&(b=null)}return b&&(v==="circle"?E.r=b:(E.rx=b.width,E.ry=b.height)),Gt.create(v,E,t)}function c(x,v){var b=i(x._matrix),E=x.getPathData(null,v.precision);return E&&(b.d=E),Gt.create("path",b,t)}function f(x,v){var b=i(x._matrix,!0),E=x._definition,M=g(E,"symbol"),S=E._item,B=S.getStrokeBounds();return M||(M=Gt.create("symbol",{viewBox:t.rectangle(B)}),M.appendChild(L(S,v)),O(E,M,"symbol")),b.href="#"+M.id,b.x+=B.x,b.y+=B.y,b.width=B.width,b.height=B.height,b.overflow="visible",Gt.create("use",b,t)}function d(x){var v=g(x,"color");if(!v){var b=x.getGradient(),E=b._radial,M=x.getOrigin(),S=x.getDestination(),B;if(E){B={cx:M.x,cy:M.y,r:M.getDistance(S)};var D=x.getHighlight();D&&(B.fx=D.x,B.fy=D.y)}else B={x1:M.x,y1:M.y,x2:S.x,y2:S.y};B.gradientUnits="userSpaceOnUse",v=Gt.create((E?"radial":"linear")+"Gradient",B,t);for(var X=b._stops,W=0,k=X.length;W<k;W++){var V=X[W],H=V._color,J=H.getAlpha(),G=V._offset;B={offset:G??W/(k-1)},H&&(B["stop-color"]=H.toCSS(!0)),J<1&&(B["stop-opacity"]=J),v.appendChild(Gt.create("stop",B,t))}O(x,v,"color")}return"url(#"+v.id+")"}function p(x){var v=Gt.create("text",i(x._matrix,!0),t);return v.textContent=x._content,v}var y={Group:n,Layer:n,Raster:a,Path:u,Shape:l,CompoundPath:c,SymbolItem:f,PointText:p};function P(x,v,b,E){var M={},S=!E&&x.getParent(),B=[];return x._name!=null&&(M.id=x._name),T.each(gi,function(D){var X=D.get,W=D.type,k=x[X]();if(D.exportFilter?D.exportFilter(x,k):b.reduceAttributes==!1||!S||!T.equals(S[X](),k)){if(W==="color"&&k!=null){var V=k.getAlpha();V<1&&(M[D.attribute+"-opacity"]=V)}W==="style"?B.push(D.attribute+": "+k):M[D.attribute]=k==null?"none":W==="color"?k.gradient?d(k):k.toCSS(!0):W==="array"?k.join(","):W==="lookup"?D.toSVG[k]:k}}),B.length&&(M.style=B.join(";")),M.opacity===1&&delete M.opacity,x._visible||(M.visibility="hidden"),Gt.set(v,M,t)}var m;function g(x,v){return m||(m={ids:{},svgs:{}}),x&&m.svgs[v+"-"+(x._id||x.__id||(x.__id=ge.get("svg")))]}function O(x,v,b){m||g();var E=m.ids[b]=(m.ids[b]||0)+1;v.id=b+"-"+E,m.svgs[b+"-"+(x._id||x.__id)]=v}function C(x,v){var b=x,E=null;if(m){b=x.nodeName.toLowerCase()==="svg"&&x;for(var M in m.svgs)E||(b||(b=Gt.create("svg"),b.appendChild(x)),E=b.insertBefore(Gt.create("defs"),b.firstChild)),E.appendChild(m.svgs[M]);m=null}return v.asString?new s.XMLSerializer().serializeToString(b):b}function L(x,v,b){var E=y[x._class],M=E&&E(x,v);if(M){var S=v.onExport;S&&(M=S(x,M,v)||M);var B=JSON.stringify(x._data);B&&B!=="{}"&&B!=="null"&&M.setAttribute("data-paper-data",B)}return M&&P(x,M,v,b)}function w(x){return x||(x={}),t=new Ut(x.precision),x}Nt.inject({exportSVG:function(x){return x=w(x),C(L(this,x,!0),x)}}),Ce.inject({exportSVG:function(x){x=w(x);var v=this._children,b=this.getView(),E=T.pick(x.bounds,"view"),M=x.matrix||E==="view"&&b._matrix,S=M&&Wt.read([M]),B=E==="view"?new Ct([0,0],b.getViewSize()):E==="content"?Nt._getBounds(v,S,{stroke:!0}).rect:Ct.read([E],0,{readNull:!0}),D={version:"1.1",xmlns:Gt.svg,"xmlns:xlink":Gt.xlink};B&&(D.width=B.width,D.height=B.height,(B.x||B.x===0||B.y||B.y===0)&&(D.viewBox=t.rectangle(B)));var X=Gt.create("svg",D,t),W=X;S&&!S.isIdentity()&&(W=X.appendChild(Gt.create("g",i(S),t)));for(var k=0,V=v.length;k<V;k++)W.appendChild(L(v[k],x,!0));return C(X,x)}})},new function(){var t={},i;function n(v,b,E,M,S,B){var D=Gt.get(v,b)||B,X=D==null?M?null:E?"":0:E?D:parseFloat(D);return/%\s*$/.test(D)?X/100*(S?1:i[/x|^width/.test(b)?"width":"height"]):X}function a(v,b,E,M,S,B,D){return b=n(v,b||"x",!1,M,S,B),E=n(v,E||"y",!1,M,S,D),M&&(b==null||E==null)?null:new Z(b,E)}function u(v,b,E,M,S){return b=n(v,b||"width",!1,M,S),E=n(v,E||"height",!1,M,S),M&&(b==null||E==null)?null:new gt(b,E)}function l(v,b,E){return v==="none"?null:b==="number"?parseFloat(v):b==="array"?v?v.split(/[\s,]+/g).map(parseFloat):[]:b==="color"?L(v)||v:b==="lookup"?E[v]:v}function c(v,b,E,M){var S=v.childNodes,B=b==="clippath",D=b==="defs",X=new Le,W=X._project,k=W._currentStyle,V=[];if(!B&&!D&&(X=C(X,v,M),W._currentStyle=X._style.clone()),M)for(var H=v.querySelectorAll("defs"),J=0,G=H.length;J<G;J++)w(H[J],E,!1);for(var J=0,G=S.length;J<G;J++){var Q=S[J],st;Q.nodeType===1&&!/^defs$/i.test(Q.nodeName)&&(st=w(Q,E,!1))&&!(st instanceof be)&&V.push(st)}return X.addChildren(V),B&&(X=C(X.reduce(),v,M)),W._currentStyle=k,(B||D)&&(X.remove(),X=null),X}function f(v,b){for(var E=v.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),M=[],S=0,B=E.length;S<B;S+=2)M.push(new Z(parseFloat(E[S]),parseFloat(E[S+1])));var D=new Xt(M);return b==="polygon"&&D.closePath(),D}function d(v){return Ye.create(v.getAttribute("d"))}function p(v,b){var E=(n(v,"href",!0)||"").substring(1),M=b==="radialgradient",S;if(E)S=t[E].getGradient(),S._radial^M&&(S=S.clone(),S._radial=M);else{for(var B=v.childNodes,D=[],X=0,W=B.length;X<W;X++){var k=B[X];k.nodeType===1&&D.push(C(new ii,k))}S=new Ge(D,M)}var V,H,J,G=n(v,"gradientUnits",!0)!=="userSpaceOnUse";M?(V=a(v,"cx","cy",!1,G,"50%","50%"),H=V.add(n(v,"r",!1,!1,G,"50%"),0),J=a(v,"fx","fy",!0,G)):(V=a(v,"x1","y1",!1,G,"0%","0%"),H=a(v,"x2","y2",!1,G,"100%","0%"));var Q=C(new $t(S,V,H,J),v);return Q._scaleToBounds=G,null}var y={"#document":function(v,b,E,M){for(var S=v.childNodes,B=0,D=S.length;B<D;B++){var X=S[B];if(X.nodeType===1)return w(X,E,M)}},g:c,svg:c,clippath:c,polygon:f,polyline:f,path:d,lineargradient:p,radialgradient:p,image:function(v){var b=new We(n(v,"href",!0));return b.on("load",function(){var E=u(v);this.setSize(E);var M=a(v).add(E.divide(2));this._matrix.append(new Wt().translate(M))}),b},symbol:function(v,b,E,M){return new be(c(v,b,E,M),!0)},defs:c,use:function(v){var b=(n(v,"href",!0)||"").substring(1),E=t[b],M=a(v);return E?E instanceof be?E.place(M):E.clone().translate(M):null},circle:function(v){return new pe.Circle(a(v,"cx","cy"),n(v,"r"))},ellipse:function(v){return new pe.Ellipse({center:a(v,"cx","cy"),radius:u(v,"rx","ry")})},rect:function(v){return new pe.Rectangle(new Ct(a(v),u(v)),u(v,"rx","ry"))},line:function(v){return new Xt.Line(a(v,"x1","y1"),a(v,"x2","y2"))},text:function(v){var b=new Li(a(v).add(a(v,"dx","dy")));return b.setContent(v.textContent.trim()||""),b},switch:c};function P(v,b,E,M){if(v.transform){for(var S=(M.getAttribute(E)||"").split(/\)\s*/g),B=new Wt,D=0,X=S.length;D<X;D++){var W=S[D];if(!W)break;for(var k=W.split(/\(\s*/),V=k[0].trim(),H=k[1].split(/[\s,]+/g),J=0,G=H.length;J<G;J++)H[J]=parseFloat(H[J]);switch(V){case"matrix":B.append(new Wt(H[0],H[1],H[2],H[3],H[4],H[5]));break;case"rotate":B.rotate(H[0],H[1]||0,H[2]||0);break;case"translate":B.translate(H[0],H[1]||0);break;case"scale":B.scale(H);break;case"skewX":B.skew(H[0],0);break;case"skewY":B.skew(0,H[0]);break}}v.transform(B)}}function m(v,b,E){var M=E==="fill-opacity"?"getFillColor":"getStrokeColor",S=v[M]&&v[M]();S&&S.setAlpha(parseFloat(b))}var g=T.set(T.each(gi,function(v){this[v.attribute]=function(b,E){if(b[v.set]&&(b[v.set](l(E,v.type,v.fromSVG)),v.type==="color")){var M=b[v.get]();if(M&&M._scaleToBounds){var S=b.getBounds();M.transform(new Wt().translate(S.getPoint()).scale(S.getSize()))}}}},{}),{id:function(v,b){t[b]=v,v.setName&&v.setName(b)},"clip-path":function(v,b){var E=L(b);if(E)if(E=E.clone(),E.setClipMask(!0),v instanceof Le)v.insertChild(0,E);else return new Le(E,v)},gradientTransform:P,transform:P,"fill-opacity":m,"stroke-opacity":m,visibility:function(v,b){v.setVisible&&v.setVisible(b==="visible")},display:function(v,b){v.setVisible&&v.setVisible(b!==null)},"stop-color":function(v,b){v.setColor&&v.setColor(b)},"stop-opacity":function(v,b){v._color&&v._color.setAlpha(parseFloat(b))},offset:function(v,b){if(v.setOffset){var E=b.match(/(.*)%$/);v.setOffset(E?E[1]/100:parseFloat(b))}},viewBox:function(v,b,E,M,S){var B=new Ct(l(b,"array")),D=u(M,null,null,!0),X,W;if(v instanceof Le){var k=D?D.divide(B.getSize()):1,W=new Wt().scale(k).translate(B.getPoint().negate());X=v}else v instanceof be&&(D&&B.setSize(D),X=v._item);if(X){if(O(M,"overflow",S)!=="visible"){var V=new pe.Rectangle(B);V.setClipMask(!0),X.addChild(V)}W&&X.transform(W)}}});function O(v,b,E){var M=v.attributes[b],S=M&&M.value;if(!S&&v.style){var B=T.camelize(b);S=v.style[B],!S&&E.node[B]!==E.parent[B]&&(S=E.node[B])}return S?S==="none"?null:S:A}function C(v,b,E){var M=b.parentNode,S={node:Jt.getStyles(b)||{},parent:!E&&!/^defs$/i.test(M.tagName)&&Jt.getStyles(M)||{}};return T.each(g,function(B,D){var X=O(b,D,S);v=X!==A&&B(v,X,D,b,S)||v}),v}function L(v){var b=v&&v.match(/\((?:["'#]*)([^"')]+)/),E=b&&b[1],M=E&&t[R?E.replace(R.location.href.split("#")[0]+"#",""):E];return M&&M._scaleToBounds&&(M=M.clone(),M._scaleToBounds=!0),M}function w(v,b,E){var M=v.nodeName.toLowerCase(),S=M!=="#document",B=Y.body,D,X,W;E&&S&&(i=Bt.getView().getSize(),i=u(v,null,null,!0)||i,D=Gt.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),X=v.parentNode,W=v.nextSibling,D.appendChild(v),B.appendChild(D));var k=Bt.settings,V=k.applyMatrix,H=k.insertItems;k.applyMatrix=!1,k.insertItems=!1;var J=y[M],G=J&&J(v,M,b,E)||null;if(k.insertItems=H,k.applyMatrix=V,G){S&&!(G instanceof Le)&&(G=C(G,v,E));var Q=b.onImport,st=S&&v.getAttribute("data-paper-data");Q&&(G=Q(v,G,b)||G),b.expandShapes&&G instanceof pe&&(G.remove(),G=G.toPath()),st&&(G._data=JSON.parse(st))}return D&&(B.removeChild(D),X&&(W?X.insertBefore(v,W):X.appendChild(v))),E&&(t={},G&&T.pick(b.applyMatrix,V)&&G.matrix.apply(!0,!0)),G}function x(v,b,E){if(!v)return null;b=typeof b=="function"?{onLoad:b}:b||{};var M=Bt,S=null;function B(k){try{var V=typeof k=="object"?k:new s.DOMParser().parseFromString(k.trim(),"image/svg+xml");if(!V.nodeName)throw V=null,new Error("Unsupported SVG source: "+v);Bt=M,S=w(V,b,!0),(!b||b.insert!==!1)&&E._insertItem(A,S);var H=b.onLoad;H&&H(S,k)}catch(J){D(J)}}function D(k,V){var H=b.onError;if(H)H(k,V);else throw new Error(k)}if(typeof v=="string"&&!/^[\s\S]*</.test(v)){var X=Y.getElementById(v);X?B(X):vi.request({url:v,async:!0,onLoad:B,onError:D})}else if(typeof File<"u"&&v instanceof File){var W=new FileReader;return W.onload=function(){B(W.result)},W.onerror=function(){D(W.error)},W.readAsText(v)}else B(v);return S}Nt.inject({importSVG:function(v,b){return x(v,b,this)}}),Ce.inject({importSVG:function(v,b){return this.activate(),x(v,b,this)}})},T.exports.PaperScript=(function(){var t=this,i=t.acorn;if(!i&&typeof Kr<"u")try{i=require("acorn")}catch{}if(!i){var n,a;i=n=a={},(function(C,L){if(typeof n=="object"&&typeof a=="object")return L(n);if(typeof A=="function"&&A.amd)return A(["exports"],L);L(C.acorn||(C.acorn={}))})(this,function(C){C.version="0.5.0";var L,w,x,v;C.parse=function(F,U){return w=String(F),x=w.length,E(U),hn(),vr(L.program)};var b=C.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function E(F){L=F||{};for(var U in b)Object.prototype.hasOwnProperty.call(L,U)||(L[U]=b[U]);v=L.sourceFile||null}var M=C.getLineInfo=function(F,U){for(var tt=1,rt=0;;){Ke.lastIndex=rt;var xt=Ke.exec(F);if(xt&&xt.index<U)++tt,rt=xt.index+xt[0].length;else break}return{line:tt,column:U-rt}};C.tokenize=function(F,U){w=String(F),x=w.length,E(U),hn();var tt={};function rt(xt){return st=D,Ue(xt),tt.start=B,tt.end=D,tt.startLoc=X,tt.endLoc=W,tt.type=k,tt.value=V,tt}return rt.jumpTo=function(xt,Lt){if(S=xt,L.locations){J=1,G=Ke.lastIndex=0;for(var At;(At=Ke.exec(w))&&At.index<xt;)++J,G=At.index+At[0].length}H=Lt,Qe()},rt};var S,B,D,X,W,k,V,H,J,G,Q,st,ut,ht,pt,et;function nt(F,U){var tt=M(w,F);U+=" ("+tt.line+":"+tt.column+")";var rt=new SyntaxError(U);throw rt.pos=F,rt.loc=tt,rt.raisedAt=S,rt}var ft=[],vt={type:"num"},_t={type:"regexp"},wt={type:"string"},yt={type:"name"},St={type:"eof"},Mt={keyword:"break"},It={keyword:"case",beforeExpr:!0},ee={keyword:"catch"},ie={keyword:"continue"},se={keyword:"debugger"},jt={keyword:"default"},zt={keyword:"do",isLoop:!0},Kt={keyword:"else",beforeExpr:!0},Vt={keyword:"finally"},ne={keyword:"for",isLoop:!0},me={keyword:"function"},Ne={keyword:"if"},bt={keyword:"return",beforeExpr:!0},ye={keyword:"switch"},ce={keyword:"throw",beforeExpr:!0},_e={keyword:"try"},Be={keyword:"var"},xe={keyword:"while",isLoop:!0},e={keyword:"with"},r={keyword:"new",beforeExpr:!0},o={keyword:"this"},h={keyword:"null",atomValue:null},_={keyword:"true",atomValue:!0},I={keyword:"false",atomValue:!1},N={keyword:"in",binop:7,beforeExpr:!0},z={break:Mt,case:It,catch:ee,continue:ie,debugger:se,default:jt,do:zt,else:Kt,finally:Vt,for:ne,function:me,if:Ne,return:bt,switch:ye,throw:ce,try:_e,var:Be,while:xe,with:e,null:h,true:_,false:I,new:r,in:N,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:o,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},q={type:"[",beforeExpr:!0},$={type:"]"},at={type:"{",beforeExpr:!0},it={type:"}"},lt={type:"(",beforeExpr:!0},mt={type:")"},Tt={type:",",beforeExpr:!0},Ot={type:";",beforeExpr:!0},Yt={type:":",beforeExpr:!0},ue={type:"."},Pe={type:"?",beforeExpr:!0},ke={binop:10,beforeExpr:!0},si={isAssign:!0,beforeExpr:!0},De={isAssign:!0,beforeExpr:!0},Fe={postfix:!0,prefix:!0,isUpdate:!0},en={prefix:!0,beforeExpr:!0},nn={binop:1,beforeExpr:!0},rn={binop:2,beforeExpr:!0},Wn={binop:3,beforeExpr:!0},Hn={binop:4,beforeExpr:!0},Un={binop:5,beforeExpr:!0},Zn={binop:6,beforeExpr:!0},Jn={binop:7,beforeExpr:!0},Gn={binop:8,beforeExpr:!0},jn={binop:9,prefix:!0,beforeExpr:!0},Kn={binop:10,beforeExpr:!0};C.tokTypes={bracketL:q,bracketR:$,braceL:at,braceR:it,parenL:lt,parenR:mt,comma:Tt,semi:Ot,colon:Yt,dot:ue,question:Pe,slash:ke,eq:si,name:yt,eof:St,num:vt,regexp:_t,string:wt};for(var sn in z)C.tokTypes["_"+sn]=z[sn];function ai(F){F=F.split(" ");var U="",tt=[];t:for(var rt=0;rt<F.length;++rt){for(var xt=0;xt<tt.length;++xt)if(tt[xt][0].length==F[rt].length){tt[xt].push(F[rt]);continue t}tt.push([F[rt]])}function Lt(qt){if(qt.length==1)return U+="return str === "+JSON.stringify(qt[0])+";";U+="switch(str){";for(var Me=0;Me<qt.length;++Me)U+="case "+JSON.stringify(qt[Me])+":";U+="return true}return false;"}if(tt.length>3){tt.sort(function(qt,Me){return Me.length-qt.length}),U+="switch(str.length){";for(var rt=0;rt<tt.length;++rt){var At=tt[rt];U+="case "+At[0].length+":",Lt(At)}U+="}"}else Lt(F);return new Function("str",U)}var Qn=ai("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),$n=ai("class enum extends super const export import"),an=ai("implements interface let package private protected public static yield"),mi=ai("eval arguments"),tr=ai("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),er=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,on="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",ir="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",un=new RegExp("["+on+"]"),nr=new RegExp("["+on+ir+"]"),yi=/[\n\r\u2028\u2029]/,Ke=/\r\n|[\n\r\u2028\u2029]/g,Pi=C.isIdentifierStart=function(F){return F<65?F===36:F<91?!0:F<97?F===95:F<123?!0:F>=170&&un.test(String.fromCharCode(F))},ln=C.isIdentifierChar=function(F){return F<48?F===36:F<58?!0:F<65?!1:F<91?!0:F<97?F===95:F<123?!0:F>=170&&nr.test(String.fromCharCode(F))};function He(){this.line=J,this.column=S-G}function hn(){J=1,S=G=0,H=!0,Qe()}function le(F,U){D=S,L.locations&&(W=new He),k=F,Qe(),V=U,H=F.beforeExpr}function rr(){var F=L.onComment&&L.locations&&new He,U=S,tt=w.indexOf("*/",S+=2);if(tt===-1&&nt(S-2,"Unterminated comment"),S=tt+2,L.locations){Ke.lastIndex=U;for(var rt;(rt=Ke.exec(w))&&rt.index<S;)++J,G=rt.index+rt[0].length}L.onComment&&L.onComment(!0,w.slice(U+2,tt),U,S,F,L.locations&&new He)}function Di(){for(var F=S,U=L.onComment&&L.locations&&new He,tt=w.charCodeAt(S+=2);S<x&&tt!==10&&tt!==13&&tt!==8232&&tt!==8233;)++S,tt=w.charCodeAt(S);L.onComment&&L.onComment(!1,w.slice(F+2,S),F,S,U,L.locations&&new He)}function Qe(){for(;S<x;){var F=w.charCodeAt(S);if(F===32)++S;else if(F===13){++S;var U=w.charCodeAt(S);U===10&&++S,L.locations&&(++J,G=S)}else if(F===10||F===8232||F===8233)++S,L.locations&&(++J,G=S);else if(F>8&&F<14)++S;else if(F===47){var U=w.charCodeAt(S+1);if(U===42)rr();else if(U===47)Di();else break}else if(F===160)++S;else if(F>=5760&&er.test(String.fromCharCode(F)))++S;else break}}function sr(){var F=w.charCodeAt(S+1);return F>=48&&F<=57?cn(!0):(++S,le(ue))}function ar(){var F=w.charCodeAt(S+1);return H?(++S,fn()):F===61?he(De,2):he(ke,1)}function or(){var F=w.charCodeAt(S+1);return F===61?he(De,2):he(Kn,1)}function ur(F){var U=w.charCodeAt(S+1);return U===F?he(F===124?nn:rn,2):U===61?he(De,2):he(F===124?Wn:Un,1)}function lr(){var F=w.charCodeAt(S+1);return F===61?he(De,2):he(Hn,1)}function hr(F){var U=w.charCodeAt(S+1);return U===F?U==45&&w.charCodeAt(S+2)==62&&yi.test(w.slice(st,S))?(S+=3,Di(),Qe(),Ue()):he(Fe,2):U===61?he(De,2):he(jn,1)}function fr(F){var U=w.charCodeAt(S+1),tt=1;return U===F?(tt=F===62&&w.charCodeAt(S+2)===62?3:2,w.charCodeAt(S+tt)===61?he(De,tt+1):he(Gn,tt)):U==33&&F==60&&w.charCodeAt(S+2)==45&&w.charCodeAt(S+3)==45?(S+=4,Di(),Qe(),Ue()):(U===61&&(tt=w.charCodeAt(S+2)===61?3:2),he(Jn,tt))}function cr(F){var U=w.charCodeAt(S+1);return U===61?he(Zn,w.charCodeAt(S+2)===61?3:2):he(F===61?si:en,1)}function dr(F){switch(F){case 46:return sr();case 40:return++S,le(lt);case 41:return++S,le(mt);case 59:return++S,le(Ot);case 44:return++S,le(Tt);case 91:return++S,le(q);case 93:return++S,le($);case 123:return++S,le(at);case 125:return++S,le(it);case 58:return++S,le(Yt);case 63:return++S,le(Pe);case 48:var U=w.charCodeAt(S+1);if(U===120||U===88)return pr();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return cn(!1);case 34:case 39:return _r(F);case 47:return ar();case 37:case 42:return or();case 124:case 38:return ur(F);case 94:return lr();case 43:case 45:return hr(F);case 60:case 62:return fr(F);case 61:case 33:return cr(F);case 126:return he(en,1)}return!1}function Ue(F){if(F?S=B+1:B=S,L.locations&&(X=new He),F)return fn();if(S>=x)return le(St);var U=w.charCodeAt(S);if(Pi(U)||U===92)return pn();var tt=dr(U);if(tt===!1){var rt=String.fromCharCode(U);if(rt==="\\"||un.test(rt))return pn();nt(S,"Unexpected character '"+rt+"'")}return tt}function he(F,U){var tt=w.slice(S,S+U);S+=U,le(F,tt)}function fn(){for(var xt="",F,U,tt=S;;){S>=x&&nt(tt,"Unterminated regular expression");var rt=w.charAt(S);if(yi.test(rt)&&nt(tt,"Unterminated regular expression"),F)F=!1;else{if(rt==="[")U=!0;else if(rt==="]"&&U)U=!1;else if(rt==="/"&&!U)break;F=rt==="\\"}++S}var xt=w.slice(tt,S);++S;var Lt=dn();Lt&&!/^[gmsiy]*$/.test(Lt)&&nt(tt,"Invalid regexp flag");try{var At=new RegExp(xt,Lt)}catch(qt){qt instanceof SyntaxError&&nt(tt,qt.message),nt(qt)}return le(_t,At)}function oi(F,U){for(var tt=S,rt=0,xt=0,Lt=U??1/0;xt<Lt;++xt){var At=w.charCodeAt(S),qt;if(At>=97?qt=At-97+10:At>=65?qt=At-65+10:At>=48&&At<=57?qt=At-48:qt=1/0,qt>=F)break;++S,rt=rt*F+qt}return S===tt||U!=null&&S-tt!==U?null:rt}function pr(){S+=2;var F=oi(16);return F==null&&nt(B+2,"Expected hexadecimal number"),Pi(w.charCodeAt(S))&&nt(S,"Identifier directly after number"),le(vt,F)}function cn(F){var U=S,tt=!1,rt=w.charCodeAt(S)===48;!F&&oi(10)===null&&nt(U,"Invalid number"),w.charCodeAt(S)===46&&(++S,oi(10),tt=!0);var xt=w.charCodeAt(S);(xt===69||xt===101)&&(xt=w.charCodeAt(++S),(xt===43||xt===45)&&++S,oi(10)===null&&nt(U,"Invalid number"),tt=!0),Pi(w.charCodeAt(S))&&nt(S,"Identifier directly after number");var Lt=w.slice(U,S),At;return tt?At=parseFloat(Lt):!rt||Lt.length===1?At=parseInt(Lt,10):/[89]/.test(Lt)||et?nt(U,"Invalid number"):At=parseInt(Lt,8),le(vt,At)}function _r(F){S++;for(var U="";;){S>=x&&nt(B,"Unterminated string constant");var tt=w.charCodeAt(S);if(tt===F)return++S,le(wt,U);if(tt===92){tt=w.charCodeAt(++S);var rt=/^[0-7]+/.exec(w.slice(S,S+3));for(rt&&(rt=rt[0]);rt&&parseInt(rt,8)>255;)rt=rt.slice(0,-1);if(rt==="0"&&(rt=null),++S,rt)et&&nt(S-2,"Octal literal in strict mode"),U+=String.fromCharCode(parseInt(rt,8)),S+=rt.length-1;else switch(tt){case 110:U+=`
`;break;case 114:U+="\r";break;case 120:U+=String.fromCharCode(wi(2));break;case 117:U+=String.fromCharCode(wi(4));break;case 85:U+=String.fromCharCode(wi(8));break;case 116:U+="	";break;case 98:U+="\b";break;case 118:U+="\v";break;case 102:U+="\f";break;case 48:U+="\0";break;case 13:w.charCodeAt(S)===10&&++S;case 10:L.locations&&(G=S,++J);break;default:U+=String.fromCharCode(tt);break}}else(tt===13||tt===10||tt===8232||tt===8233)&&nt(B,"Unterminated string constant"),U+=String.fromCharCode(tt),++S}}function wi(F){var U=oi(16,F);return U===null&&nt(B,"Bad character escape sequence"),U}var $e;function dn(){$e=!1;for(var F,U=!0,tt=S;;){var rt=w.charCodeAt(S);if(ln(rt))$e&&(F+=w.charAt(S)),++S;else if(rt===92){$e||(F=w.slice(tt,S)),$e=!0,w.charCodeAt(++S)!=117&&nt(S,"Expecting Unicode escape sequence \\uXXXX"),++S;var xt=wi(4),Lt=String.fromCharCode(xt);Lt||nt(S-1,"Invalid Unicode escape"),(U?Pi(xt):ln(xt))||nt(S-4,"Invalid Unicode escape"),F+=Lt}else break;U=!1}return $e?F:w.slice(tt,S)}function pn(){var F=dn(),U=yt;return!$e&&tr(F)&&(U=z[F]),le(U,F)}function Rt(){Q=B,st=D,ut=W,Ue()}function Xi(F){if(et=F,S=B,L.locations)for(;S<G;)G=w.lastIndexOf(`
`,G-2)+1,--J;Qe(),Ue()}function _n(){this.type=null,this.start=B,this.end=null}function vn(){this.start=X,this.end=null,v!==null&&(this.source=v)}function fe(){var F=new _n;return L.locations&&(F.loc=new vn),L.directSourceFile&&(F.sourceFile=L.directSourceFile),L.ranges&&(F.range=[B,0]),F}function Re(F){var U=new _n;return U.start=F.start,L.locations&&(U.loc=new vn,U.loc.start=F.loc.start),L.ranges&&(U.range=[F.range[0],0]),U}function kt(F,U){return F.type=U,F.end=st,L.locations&&(F.loc.end=ut),L.ranges&&(F.range[1]=st),F}function Yi(F){return L.ecmaVersion>=5&&F.type==="ExpressionStatement"&&F.expression.type==="Literal"&&F.expression.value==="use strict"}function Qt(F){if(k===F)return Rt(),!0}function Ci(){return!L.strictSemicolons&&(k===St||k===it||yi.test(w.slice(st,B)))}function Ze(){!Qt(Ot)&&!Ci()&&Xe()}function re(F){k===F?Rt():Xe()}function Xe(){nt(B,"Unexpected token")}function bi(F){F.type!=="Identifier"&&F.type!=="MemberExpression"&&nt(F.start,"Assigning to rvalue"),et&&F.type==="Identifier"&&mi(F.name)&&nt(F.start,"Assigning to "+F.name+" in strict mode")}function vr(F){Q=st=S,L.locations&&(ut=new He),ht=et=null,pt=[],Ue();var U=F||fe(),tt=!0;for(F||(U.body=[]);k!==St;){var rt=Ae();U.body.push(rt),tt&&Yi(rt)&&Xi(!0),tt=!1}return kt(U,"Program")}var Fi={kind:"loop"},gr={kind:"switch"};function Ae(){(k===ke||k===De&&V=="/=")&&Ue(!0);var F=k,U=fe();switch(F){case Mt:case ie:Rt();var tt=F===Mt;Qt(Ot)||Ci()?U.label=null:k!==yt?Xe():(U.label=ze(),Ze());for(var rt=0;rt<pt.length;++rt){var xt=pt[rt];if((U.label==null||xt.name===U.label.name)&&(xt.kind!=null&&(tt||xt.kind==="loop")||U.label&&tt))break}return rt===pt.length&&nt(U.start,"Unsyntactic "+F.keyword),kt(U,tt?"BreakStatement":"ContinueStatement");case se:return Rt(),Ze(),kt(U,"DebuggerStatement");case zt:return Rt(),pt.push(Fi),U.body=Ae(),pt.pop(),re(xe),U.test=ui(),Ze(),kt(U,"DoWhileStatement");case ne:if(Rt(),pt.push(Fi),re(lt),k===Ot)return Ri(U,null);if(k===Be){var Lt=fe();return Rt(),mn(Lt,!0),kt(Lt,"VariableDeclaration"),Lt.declarations.length===1&&Qt(N)?gn(U,Lt):Ri(U,Lt)}var Lt=de(!1,!0);return Qt(N)?(bi(Lt),gn(U,Lt)):Ri(U,Lt);case me:return Rt(),Hi(U,!0);case Ne:return Rt(),U.test=ui(),U.consequent=Ae(),U.alternate=Qt(Kt)?Ae():null,kt(U,"IfStatement");case bt:return!ht&&!L.allowReturnOutsideFunction&&nt(B,"'return' outside of function"),Rt(),Qt(Ot)||Ci()?U.argument=null:(U.argument=de(),Ze()),kt(U,"ReturnStatement");case ye:Rt(),U.discriminant=ui(),U.cases=[],re(at),pt.push(gr);for(var At,qt;k!=it;)if(k===It||k===jt){var Me=k===It;At&&kt(At,"SwitchCase"),U.cases.push(At=fe()),At.consequent=[],Rt(),Me?At.test=de():(qt&&nt(Q,"Multiple default clauses"),qt=!0,At.test=null),re(Yt)}else At||Xe(),At.consequent.push(Ae());return At&&kt(At,"SwitchCase"),Rt(),pt.pop(),kt(U,"SwitchStatement");case ce:return Rt(),yi.test(w.slice(st,B))&&nt(st,"Illegal newline after throw"),U.argument=de(),Ze(),kt(U,"ThrowStatement");case _e:if(Rt(),U.block=li(),U.handler=null,k===ee){var Je=fe();Rt(),re(lt),Je.param=ze(),et&&mi(Je.param.name)&&nt(Je.param.start,"Binding "+Je.param.name+" in strict mode"),re(mt),Je.guard=null,Je.body=li(),U.handler=kt(Je,"CatchClause")}return U.guardedHandlers=ft,U.finalizer=Qt(Vt)?li():null,!U.handler&&!U.finalizer&&nt(U.start,"Missing catch or finally clause"),kt(U,"TryStatement");case Be:return Rt(),mn(U),Ze(),kt(U,"VariableDeclaration");case xe:return Rt(),U.test=ui(),pt.push(Fi),U.body=Ae(),pt.pop(),kt(U,"WhileStatement");case e:return et&&nt(B,"'with' in strict mode"),Rt(),U.object=ui(),U.body=Ae(),kt(U,"WithStatement");case at:return li();case Ot:return Rt(),kt(U,"EmptyStatement");default:var Zi=V,xi=de();if(F===yt&&xi.type==="Identifier"&&Qt(Yt)){for(var rt=0;rt<pt.length;++rt)pt[rt].name===Zi&&nt(xi.start,"Label '"+Zi+"' is already declared");var br=k.isLoop?"loop":k===ye?"switch":null;return pt.push({name:Zi,kind:br}),U.body=Ae(),pt.pop(),U.label=xi,kt(U,"LabeledStatement")}else return U.expression=xi,Ze(),kt(U,"ExpressionStatement")}}function ui(){re(lt);var F=de();return re(mt),F}function li(F){var U=fe(),tt=!0,rt=!1,xt;for(U.body=[],re(at);!Qt(it);){var Lt=Ae();U.body.push(Lt),tt&&F&&Yi(Lt)&&(xt=rt,Xi(rt=!0)),tt=!1}return rt&&!xt&&Xi(!1),kt(U,"BlockStatement")}function Ri(F,U){return F.init=U,re(Ot),F.test=k===Ot?null:de(),re(Ot),F.update=k===mt?null:de(),re(mt),F.body=Ae(),pt.pop(),kt(F,"ForStatement")}function gn(F,U){return F.left=U,F.right=de(),re(mt),F.body=Ae(),pt.pop(),kt(F,"ForInStatement")}function mn(F,U){for(F.declarations=[],F.kind="var";;){var tt=fe();if(tt.id=ze(),et&&mi(tt.id.name)&&nt(tt.id.start,"Binding "+tt.id.name+" in strict mode"),tt.init=Qt(si)?de(!0,U):null,F.declarations.push(kt(tt,"VariableDeclarator")),!Qt(Tt))break}return F}function de(F,U){var tt=zi(U);if(!F&&k===Tt){var rt=Re(tt);for(rt.expressions=[tt];Qt(Tt);)rt.expressions.push(zi(U));return kt(rt,"SequenceExpression")}return tt}function zi(F){var U=mr(F);if(k.isAssign){var tt=Re(U);return tt.operator=V,tt.left=U,Rt(),tt.right=zi(F),bi(U),kt(tt,"AssignmentExpression")}return U}function mr(F){var U=yr(F);if(Qt(Pe)){var tt=Re(U);return tt.test=U,tt.consequent=de(!0),re(Yt),tt.alternate=de(!0,F),kt(tt,"ConditionalExpression")}return U}function yr(F){return qi(Vi(),-1,F)}function qi(F,U,tt){var rt=k.binop;if(rt!=null&&(!tt||k!==N)&&rt>U){var xt=Re(F);xt.left=F,xt.operator=V;var Lt=k;Rt(),xt.right=qi(Vi(),rt,tt);var At=kt(xt,Lt===nn||Lt===rn?"LogicalExpression":"BinaryExpression");return qi(At,U,tt)}return F}function Vi(){if(k.prefix){var F=fe(),U=k.isUpdate;return F.operator=V,F.prefix=!0,H=!0,Rt(),F.argument=Vi(),U?bi(F.argument):et&&F.operator==="delete"&&F.argument.type==="Identifier"&&nt(F.start,"Deleting local variable in strict mode"),kt(F,U?"UpdateExpression":"UnaryExpression")}for(var tt=Pr();k.postfix&&!Ci();){var F=Re(tt);F.operator=V,F.prefix=!1,F.argument=tt,bi(tt),Rt(),tt=kt(F,"UpdateExpression")}return tt}function Pr(){return hi(Wi())}function hi(F,U){if(Qt(ue)){var tt=Re(F);return tt.object=F,tt.property=ze(!0),tt.computed=!1,hi(kt(tt,"MemberExpression"),U)}else if(Qt(q)){var tt=Re(F);return tt.object=F,tt.property=de(),tt.computed=!0,re($),hi(kt(tt,"MemberExpression"),U)}else if(!U&&Qt(lt)){var tt=Re(F);return tt.callee=F,tt.arguments=Ui(mt,!1),hi(kt(tt,"CallExpression"),U)}else return F}function Wi(){switch(k){case o:var rt=fe();return Rt(),kt(rt,"ThisExpression");case yt:return ze();case vt:case wt:case _t:var rt=fe();return rt.value=V,rt.raw=w.slice(B,D),Rt(),kt(rt,"Literal");case h:case _:case I:var rt=fe();return rt.value=k.atomValue,rt.raw=k.keyword,Rt(),kt(rt,"Literal");case lt:var F=X,U=B;Rt();var tt=de();return tt.start=U,tt.end=D,L.locations&&(tt.loc.start=F,tt.loc.end=W),L.ranges&&(tt.range=[U,D]),re(mt),tt;case q:var rt=fe();return Rt(),rt.elements=Ui($,!0,!0),kt(rt,"ArrayExpression");case at:return Cr();case me:var rt=fe();return Rt(),Hi(rt,!1);case r:return wr();default:Xe()}}function wr(){var F=fe();return Rt(),F.callee=hi(Wi(),!0),Qt(lt)?F.arguments=Ui(mt,!1):F.arguments=ft,kt(F,"NewExpression")}function Cr(){var F=fe(),U=!0,tt=!1;for(F.properties=[],Rt();!Qt(it);){if(U)U=!1;else if(re(Tt),L.allowTrailingCommas&&Qt(it))break;var rt={key:yn()},xt=!1,Lt;if(Qt(Yt)?(rt.value=de(!0),Lt=rt.kind="init"):L.ecmaVersion>=5&&rt.key.type==="Identifier"&&(rt.key.name==="get"||rt.key.name==="set")?(xt=tt=!0,Lt=rt.kind=rt.key.name,rt.key=yn(),k!==lt&&Xe(),rt.value=Hi(fe(),!1)):Xe(),rt.key.type==="Identifier"&&(et||tt))for(var At=0;At<F.properties.length;++At){var qt=F.properties[At];if(qt.key.name===rt.key.name){var Me=Lt==qt.kind||xt&&qt.kind==="init"||Lt==="init"&&(qt.kind==="get"||qt.kind==="set");Me&&!et&&Lt==="init"&&qt.kind==="init"&&(Me=!1),Me&&nt(rt.key.start,"Redefinition of property")}}F.properties.push(rt)}return kt(F,"ObjectExpression")}function yn(){return k===vt||k===wt?Wi():ze(!0)}function Hi(F,U){k===yt?F.id=ze():U?Xe():F.id=null,F.params=[];var tt=!0;for(re(lt);!Qt(mt);)tt?tt=!1:re(Tt),F.params.push(ze());var rt=ht,xt=pt;if(ht=!0,pt=[],F.body=li(!0),ht=rt,pt=xt,et||F.body.body.length&&Yi(F.body.body[0]))for(var Lt=F.id?-1:0;Lt<F.params.length;++Lt){var At=Lt<0?F.id:F.params[Lt];if((an(At.name)||mi(At.name))&&nt(At.start,"Defining '"+At.name+"' in strict mode"),Lt>=0)for(var qt=0;qt<Lt;++qt)At.name===F.params[qt].name&&nt(At.start,"Argument name clash in strict mode")}return kt(F,U?"FunctionDeclaration":"FunctionExpression")}function Ui(F,U,tt){for(var rt=[],xt=!0;!Qt(F);){if(xt)xt=!1;else if(re(Tt),U&&L.allowTrailingCommas&&Qt(F))break;tt&&k===Tt?rt.push(null):rt.push(de(!0))}return rt}function ze(F){var U=fe();return F&&L.forbidReserved=="everywhere"&&(F=!1),k===yt?(!F&&(L.forbidReserved&&(L.ecmaVersion===3?Qn:$n)(V)||et&&an(V))&&w.slice(B,D).indexOf("\\")==-1&&nt(B,"The keyword '"+V+"' is reserved"),U.name=V):F&&k.keyword?U.name=k.keyword:Xe(),H=!1,Rt(),kt(U,"Identifier")}}),i.version||(i=null)}function u(C,L){return(t.acorn||i).parse(C,L)}var l={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},c={"-":"__negate","+":"__self"},f=T.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(C){this["__"+C]="#"+C},{__self:function(){return this}});Z.inject(f),gt.inject(f),$t.inject(f);function d(C,L,w){var x=l[L];if(C&&C[x]){var v=C[x](w);return L==="!="?!v:v}switch(L){case"+":return C+w;case"-":return C-w;case"*":return C*w;case"/":return C/w;case"%":return C%w;case"==":return C==w;case"!=":return C!=w}}function p(C,L){var w=c[C];if(L&&L[w])return L[w]();switch(C){case"+":return+L;case"-":return-L}}function y(C,L){if(!C)return"";L=L||{};var w=[];function x(et){for(var nt=0,ft=w.length;nt<ft;nt++){var vt=w[nt];if(vt[0]>=et)break;et+=vt[1]}return et}function v(et){return C.substring(x(et.range[0]),x(et.range[1]))}function b(et,nt){return C.substring(x(et.range[1]),x(nt.range[0]))}function E(et,nt){for(var ft=x(et.range[0]),vt=x(et.range[1]),_t=0,wt=w.length-1;wt>=0;wt--)if(ft>w[wt][0]){_t=wt+1;break}w.splice(_t,0,[ft,nt.length-vt+ft]),C=C.substring(0,ft)+nt+C.substring(vt)}function M(et,nt){switch(et.type){case"UnaryExpression":if(et.operator in c&&et.argument.type!=="Literal"){var ft=v(et.argument);E(et,'$__("'+et.operator+'", '+ft+")")}break;case"BinaryExpression":if(et.operator in l&&et.left.type!=="Literal"){var vt=v(et.left),_t=v(et.right),wt=b(et.left,et.right),yt=et.operator;E(et,"__$__("+vt+","+wt.replace(new RegExp("\\"+yt),'"'+yt+'"')+", "+_t+")")}break;case"UpdateExpression":case"AssignmentExpression":var St=nt&&nt.type;if(!(St==="ForStatement"||St==="BinaryExpression"&&/^[=!<>]/.test(nt.operator)||St==="MemberExpression"&&nt.computed)){if(et.type==="UpdateExpression"){var ft=v(et.argument),Mt="__$__("+ft+', "'+et.operator[0]+'", 1)',It=ft+" = "+Mt;et.prefix?It="("+It+")":(St==="AssignmentExpression"||St==="VariableDeclarator"||St==="BinaryExpression")&&(v(nt.left||nt.id)===ft&&(It=Mt),It=ft+"; "+It),E(et,It)}else if(/^.=$/.test(et.operator)&&et.left.type!=="Literal"){var vt=v(et.left),_t=v(et.right),Mt=vt+" = __$__("+vt+', "'+et.operator[0]+'", '+_t+")";E(et,/^\(.*\)$/.test(v(et))?"("+Mt+")":Mt)}}break}}function S(et){switch(et.type){case"ExportDefaultDeclaration":E({range:[et.start,et.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var nt=et.declaration,ft=et.specifiers;if(nt){var vt=nt.declarations;vt&&(vt.forEach(function(wt){E(wt,"module.exports."+v(wt))}),E({range:[et.start,nt.start+nt.kind.length]},""))}else if(ft){var _t=ft.map(function(wt){var yt=v(wt);return"module.exports."+yt+" = "+yt+"; "}).join("");_t&&E(et,_t)}break}}function B(et,nt,ft){if(et){for(var vt in et)if(vt!=="range"&&vt!=="loc"){var _t=et[vt];if(Array.isArray(_t))for(var wt=0,yt=_t.length;wt<yt;wt++)B(_t[wt],et,ft);else _t&&typeof _t=="object"&&B(_t,et,ft)}ft.operatorOverloading!==!1&&M(et,nt),ft.moduleExports!==!1&&S(et)}}function D(et){var nt="",ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(et=(Math.abs(et)<<1)+(et<0?1:0);et||!nt;){var vt=et&31;et>>=5,et&&(vt|=32),nt+=ft[vt]}return nt}var X=L.url||"",W=L.sourceMaps,k=L.paperFeatures||{},V=L.source||C,H=L.offset||0,J=Bt.agent,G=J.versionNumber,Q=!1,st=/\r\n|\n|\r/mg,ut;if(W&&(J.chrome&&G>=30||J.webkit&&G>=537.76||J.firefox&&G>=23||J.node)){if(J.node)H-=2;else if(R&&X&&!R.location.href.indexOf(X)){var ht=Y.getElementsByTagName("html")[0].innerHTML;H=ht.substr(0,ht.indexOf(C)+1).match(st).length+1}Q=H>0&&!(J.chrome&&G>=36||J.safari&&G>=600||J.firefox&&G>=40||J.node);var pt=["AA"+D(Q?0:H)+"A"];pt.length=(C.match(st)||[]).length+1+(Q?H:0),ut={version:3,file:X,names:[],mappings:pt.join(";AACA"),sourceRoot:"",sources:[X],sourcesContent:[V]}}return(k.operatorOverloading!==!1||k.moduleExports!==!1)&&B(u(C,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,k),ut&&(Q&&(C=new Array(H+1).join(`
`)+C),/^(inline|both)$/.test(W)&&(C+=`
//# sourceMappingURL=data:application/json;base64,`+s.btoa(unescape(encodeURIComponent(JSON.stringify(ut))))),C+=`
//# sourceURL=`+(X||"paperscript")),{url:X,source:V,code:C,map:ut}}function P(C,L,w){Bt=L;var x=L.getView(),v=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(C)&&!/\bnew\s+Tool\b/.test(C)?new Bi:null,b=v?v._events:[],E=["onFrame","onResize"].concat(b),M=[],S=[],B,D=typeof C=="object"?C:y(C,w);C=D.code;function X(G,Q){for(var st in G)(Q||!/^_/.test(st))&&new RegExp("([\\b\\s\\W]|^)"+st.replace(/\$/g,"\\$")+"\\b").test(C)&&(M.push(st),S.push(G[st]))}X({__$__:d,$__:p,paper:L,tool:v},!0),X(L),C="var module = { exports: {} }; "+C;var H=T.each(E,function(G){new RegExp("\\s+"+G+"\\b").test(C)&&(M.push(G),this.push("module.exports."+G+" = "+G+";"))},[]).join(`
`);H&&(C+=`
`+H),C+=`
return module.exports;`;var W=Bt.agent;if(Y&&(W.chrome||W.firefox&&W.versionNumber<40)){var k=Y.createElement("script"),V=Y.head||Y.getElementsByTagName("head")[0];W.firefox&&(C=`
`+C),k.appendChild(Y.createTextNode("document.__paperscript__ = function("+M+") {"+C+`
}`)),V.appendChild(k),B=Y.__paperscript__,delete Y.__paperscript__,V.removeChild(k)}else B=Function(M,C);var H=B&&B.apply(L,S),J=H||{};return T.each(b,function(G){var Q=J[G];Q&&(v[G]=Q)}),x&&(J.onResize&&x.setOnResize(J.onResize),x.emit("resize",{size:x.size,delta:new Z}),J.onFrame&&x.setOnFrame(J.onFrame),x.requestUpdate()),H}function m(C){if(/^text\/(?:x-|)paperscript$/.test(C.type)&&j.getAttribute(C,"ignore")!=="true"){var L=j.getAttribute(C,"canvas"),w=Y.getElementById(L),x=C.src||C.getAttribute("data-src"),v=j.hasAttribute(C,"async"),b="data-paper-scope";if(!w)throw new Error('Unable to find canvas with id "'+L+'"');var E=j.get(w.getAttribute(b))||new j().setup(w);return w.setAttribute(b,E._id),x?vi.request({url:x,async:v,mimeType:"text/plain",onLoad:function(M){P(M,E,x)}}):P(C.innerHTML,E,C.baseURI),C.setAttribute("data-paper-ignore","true"),E}}function g(){T.each(Y&&Y.getElementsByTagName("script"),m)}function O(C){return C?m(C):g()}return R&&(Y.readyState==="complete"?setTimeout(g):Ht.add(R,{load:g})),{compile:y,execute:P,load:O,parse:u,calculateBinary:d,calculateUnary:p}}).call(this);var Bt=new(j.inject(T.exports,{Base:T,Numerical:Et,Key:_i,DomEvent:Ht,DomElement:Jt,document:Y,window:R,Symbol:be,PlacedSymbol:ti}));return Bt.agent.node&&Nn(Bt),typeof A=="function"&&A.amd?A("paper",Bt):K&&(K.exports=Bt),Bt}).call(ts,typeof self=="object"?self:null)})(Ti)),Ti.exports}var is=es();const Dt=Rn(is);var ji={exports:{}},kn;function ns(){return kn||(kn=1,(function(K){(function(){var s={};s.version="6.4.2.2",s.use_lines=!0,s.use_xyz=!1;var A=!1;K.exports?(K.exports=s,A=!0):typeof document<"u"?window.ClipperLib=s:self.ClipperLib=s;var R;if(A){var Y="chrome";R="Netscape"}else{var Y=navigator.userAgent.toString().toLowerCase();R=navigator.appName}var T={};Y.indexOf("chrome")!=-1&&Y.indexOf("chromium")==-1?T.chrome=1:T.chrome=0,Y.indexOf("chromium")!=-1?T.chromium=1:T.chromium=0,Y.indexOf("safari")!=-1&&Y.indexOf("chrome")==-1&&Y.indexOf("chromium")==-1?T.safari=1:T.safari=0,Y.indexOf("firefox")!=-1?T.firefox=1:T.firefox=0,Y.indexOf("firefox/17")!=-1?T.firefox17=1:T.firefox17=0,Y.indexOf("firefox/15")!=-1?T.firefox15=1:T.firefox15=0,Y.indexOf("firefox/3")!=-1?T.firefox3=1:T.firefox3=0,Y.indexOf("opera")!=-1?T.opera=1:T.opera=0,Y.indexOf("msie 10")!=-1?T.msie10=1:T.msie10=0,Y.indexOf("msie 9")!=-1?T.msie9=1:T.msie9=0,Y.indexOf("msie 8")!=-1?T.msie8=1:T.msie8=0,Y.indexOf("msie 7")!=-1?T.msie7=1:T.msie7=0,Y.indexOf("msie ")!=-1?T.msie=1:T.msie=0,s.biginteger_used=null;var ot;function j(e,r,o){s.biginteger_used=1,e!=null&&(typeof e=="number"&&typeof r>"u"?this.fromInt(e):typeof e=="number"?this.fromNumber(e,r,o):r==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,r))}function dt(){return new j(null,void 0,void 0)}function Ft(e,r,o,h,_,I){for(;--I>=0;){var N=r*this[e++]+o[h]+_;_=Math.floor(N/67108864),o[h++]=N&67108863}return _}function Ut(e,r,o,h,_,I){for(var N=r&32767,z=r>>15;--I>=0;){var q=this[e]&32767,$=this[e++]>>15,at=z*q+$*N;q=N*q+((at&32767)<<15)+o[h]+(_&1073741823),_=(q>>>30)+(at>>>15)+z*$+(_>>>30),o[h++]=q&1073741823}return _}function Et(e,r,o,h,_,I){for(var N=r&16383,z=r>>14;--I>=0;){var q=this[e]&16383,$=this[e++]>>14,at=z*q+$*N;q=N*q+((at&16383)<<14)+o[h]+_,_=(q>>28)+(at>>14)+z*$,o[h++]=q&268435455}return _}R=="Microsoft Internet Explorer"?(j.prototype.am=Ut,ot=30):R!="Netscape"?(j.prototype.am=Ft,ot=26):(j.prototype.am=Et,ot=28),j.prototype.DB=ot,j.prototype.DM=(1<<ot)-1,j.prototype.DV=1<<ot;var ge=52;j.prototype.FV=Math.pow(2,ge),j.prototype.F1=ge-ot,j.prototype.F2=2*ot-ge;var Z="0123456789abcdefghijklmnopqrstuvwxyz",we=new Array,gt,ae;for(gt=48,ae=0;ae<=9;++ae)we[gt++]=ae;for(gt=97,ae=10;ae<36;++ae)we[gt++]=ae;for(gt=65,ae=10;ae<36;++ae)we[gt++]=ae;function Ct(e){return Z.charAt(e)}function di(e,r){var o=we[e.charCodeAt(r)];return o??-1}function Wt(e){for(var r=this.t-1;r>=0;--r)e[r]=this[r];e.t=this.t,e.s=this.s}function oe(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Ce(e){var r=dt();return r.fromInt(e),r}function Nt(e,r){var o;if(r==16)o=4;else if(r==8)o=3;else if(r==256)o=8;else if(r==2)o=1;else if(r==32)o=5;else if(r==4)o=2;else{this.fromRadix(e,r);return}this.t=0,this.s=0;for(var h=e.length,_=!1,I=0;--h>=0;){var N=o==8?e[h]&255:di(e,h);if(N<0){e.charAt(h)=="-"&&(_=!0);continue}_=!1,I==0?this[this.t++]=N:I+o>this.DB?(this[this.t-1]|=(N&(1<<this.DB-I)-1)<<I,this[this.t++]=N>>this.DB-I):this[this.t-1]|=N<<I,I+=o,I>=this.DB&&(I-=this.DB)}o==8&&(e[0]&128)!=0&&(this.s=-1,I>0&&(this[this.t-1]|=(1<<this.DB-I)-1<<I)),this.clamp(),_&&j.ZERO.subTo(this,this)}function Le(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function Ve(e){if(this.s<0)return"-"+this.negate().toString(e);var r;if(e==16)r=4;else if(e==8)r=3;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else return this.toRadix(e);var o=(1<<r)-1,h,_=!1,I="",N=this.t,z=this.DB-N*this.DB%r;if(N-- >0)for(z<this.DB&&(h=this[N]>>z)>0&&(_=!0,I=Ct(h));N>=0;)z<r?(h=(this[N]&(1<<z)-1)<<r-z,h|=this[--N]>>(z+=this.DB-r)):(h=this[N]>>(z-=r)&o,z<=0&&(z+=this.DB,--N)),h>0&&(_=!0),_&&(I+=Ct(h));return _?I:"0"}function pe(){var e=dt();return j.ZERO.subTo(this,e),e}function We(){return this.s<0?this.negate():this}function ti(e){var r=this.s-e.s;if(r!=0)return r;var o=this.t;if(r=o-e.t,r!=0)return this.s<0?-r:r;for(;--o>=0;)if((r=this[o]-e[o])!=0)return r;return 0}function be(e){var r=1,o;return(o=e>>>16)!=0&&(e=o,r+=16),(o=e>>8)!=0&&(e=o,r+=8),(o=e>>4)!=0&&(e=o,r+=4),(o=e>>2)!=0&&(e=o,r+=2),(o=e>>1)!=0&&(e=o,r+=1),r}function Ee(){return this.t<=0?0:this.DB*(this.t-1)+be(this[this.t-1]^this.s&this.DM)}function Pt(e,r){var o;for(o=this.t-1;o>=0;--o)r[o+e]=this[o];for(o=e-1;o>=0;--o)r[o]=0;r.t=this.t+e,r.s=this.s}function ei(e,r){for(var o=e;o<this.t;++o)r[o-e]=this[o];r.t=Math.max(this.t-e,0),r.s=this.s}function ct(e,r){var o=e%this.DB,h=this.DB-o,_=(1<<h)-1,I=Math.floor(e/this.DB),N=this.s<<o&this.DM,z;for(z=this.t-1;z>=0;--z)r[z+I+1]=this[z]>>h|N,N=(this[z]&_)<<o;for(z=I-1;z>=0;--z)r[z]=0;r[I]=N,r.t=this.t+I+1,r.s=this.s,r.clamp()}function Se(e,r){r.s=this.s;var o=Math.floor(e/this.DB);if(o>=this.t){r.t=0;return}var h=e%this.DB,_=this.DB-h,I=(1<<h)-1;r[0]=this[o]>>h;for(var N=o+1;N<this.t;++N)r[N-o-1]|=(this[N]&I)<<_,r[N-o]=this[N]>>h;h>0&&(r[this.t-o-1]|=(this.s&I)<<_),r.t=this.t-o,r.clamp()}function Ye(e,r){for(var o=0,h=0,_=Math.min(e.t,this.t);o<_;)h+=this[o]-e[o],r[o++]=h&this.DM,h>>=this.DB;if(e.t<this.t){for(h-=e.s;o<this.t;)h+=this[o],r[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<e.t;)h-=e[o],r[o++]=h&this.DM,h>>=this.DB;h-=e.s}r.s=h<0?-1:0,h<-1?r[o++]=this.DV+h:h>0&&(r[o++]=h),r.t=o,r.clamp()}function Xt(e,r){var o=this.abs(),h=e.abs(),_=o.t;for(r.t=_+h.t;--_>=0;)r[_]=0;for(_=0;_<h.t;++_)r[_+o.t]=o.am(0,h[_],r,_,0,o.t);r.s=0,r.clamp(),this.s!=e.s&&j.ZERO.subTo(r,r)}function Te(e){for(var r=this.abs(),o=e.t=2*r.t;--o>=0;)e[o]=0;for(o=0;o<r.t-1;++o){var h=r.am(o,r[o],e,2*o,0,1);(e[o+r.t]+=r.am(o+1,2*r[o],e,2*o+1,h,r.t-o-1))>=r.DV&&(e[o+r.t]-=r.DV,e[o+r.t+1]=1)}e.t>0&&(e[e.t-1]+=r.am(o,r[o],e,2*o,0,1)),e.s=0,e.clamp()}function pi(e,r,o){var h=e.abs();if(!(h.t<=0)){var _=this.abs();if(_.t<h.t){r?.fromInt(0),o!=null&&this.copyTo(o);return}o==null&&(o=dt());var I=dt(),N=this.s,z=e.s,q=this.DB-be(h[h.t-1]);q>0?(h.lShiftTo(q,I),_.lShiftTo(q,o)):(h.copyTo(I),_.copyTo(o));var $=I.t,at=I[$-1];if(at!=0){var it=at*(1<<this.F1)+($>1?I[$-2]>>this.F2:0),lt=this.FV/it,mt=(1<<this.F1)/it,Tt=1<<this.F2,Ot=o.t,Yt=Ot-$,ue=r??dt();for(I.dlShiftTo(Yt,ue),o.compareTo(ue)>=0&&(o[o.t++]=1,o.subTo(ue,o)),j.ONE.dlShiftTo($,ue),ue.subTo(I,I);I.t<$;)I[I.t++]=0;for(;--Yt>=0;){var Pe=o[--Ot]==at?this.DM:Math.floor(o[Ot]*lt+(o[Ot-1]+Tt)*mt);if((o[Ot]+=I.am(0,Pe,o,Yt,0,$))<Pe)for(I.dlShiftTo(Yt,ue),o.subTo(ue,o);o[Ot]<--Pe;)o.subTo(ue,o)}r!=null&&(o.drShiftTo($,r),N!=z&&j.ZERO.subTo(r,r)),o.t=$,o.clamp(),q>0&&o.rShiftTo(q,o),N<0&&j.ZERO.subTo(o,o)}}}function Oi(e){var r=dt();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(j.ZERO)>0&&e.subTo(r,r),r}function Oe(e){this.m=e}function Li(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function $t(e){return e}function Ge(e){e.divRemTo(this.m,null,e)}function ii(e,r,o){e.multiplyTo(r,o),this.reduce(o)}function ni(e,r){e.squareTo(r),this.reduce(r)}Oe.prototype.convert=Li,Oe.prototype.revert=$t,Oe.prototype.reduce=Ge,Oe.prototype.mulTo=ii,Oe.prototype.sqrTo=ni;function Jt(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var r=e&3;return r=r*(2-(e&15)*r)&15,r=r*(2-(e&255)*r)&255,r=r*(2-((e&65535)*r&65535))&65535,r=r*(2-e*r%this.DV)%this.DV,r>0?this.DV-r:-r}function Ht(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Zt(e){var r=dt();return e.abs().dlShiftTo(this.m.t,r),r.divRemTo(this.m,null,r),e.s<0&&r.compareTo(j.ZERO)>0&&this.m.subTo(r,r),r}function Ei(e){var r=dt();return e.copyTo(r),this.reduce(r),r}function je(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var r=0;r<this.m.t;++r){var o=e[r]&32767,h=o*this.mpl+((o*this.mph+(e[r]>>15)*this.mpl&this.um)<<15)&e.DM;for(o=r+this.m.t,e[o]+=this.m.am(0,h,e,r,0,this.m.t);e[o]>=e.DV;)e[o]-=e.DV,e[++o]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Ai(e,r){e.squareTo(r),this.reduce(r)}function _i(e,r,o){e.multiplyTo(r,o),this.reduce(o)}Ht.prototype.convert=Zt,Ht.prototype.revert=Ei,Ht.prototype.reduce=je,Ht.prototype.mulTo=_i,Ht.prototype.sqrTo=Ai;function Mi(){return(this.t>0?this[0]&1:this.s)==0}function Ni(e,r){if(e>4294967295||e<1)return j.ONE;var o=dt(),h=dt(),_=r.convert(this),I=be(e)-1;for(_.copyTo(o);--I>=0;)if(r.sqrTo(o,h),(e&1<<I)>0)r.mulTo(h,_,o);else{var N=o;o=h,h=N}return r.revert(o)}function Bi(e,r){var o;return e<256||r.isEven()?o=new Oe(r):o=new Ht(r),this.exp(e,o)}j.prototype.copyTo=Wt,j.prototype.fromInt=oe,j.prototype.fromString=Nt,j.prototype.clamp=Le,j.prototype.dlShiftTo=Pt,j.prototype.drShiftTo=ei,j.prototype.lShiftTo=ct,j.prototype.rShiftTo=Se,j.prototype.subTo=Ye,j.prototype.multiplyTo=Xt,j.prototype.squareTo=Te,j.prototype.divRemTo=pi,j.prototype.invDigit=Jt,j.prototype.isEven=Mi,j.prototype.exp=Ni,j.prototype.toString=Ve,j.prototype.negate=pe,j.prototype.abs=We,j.prototype.compareTo=ti,j.prototype.bitLength=Ee,j.prototype.mod=Oi,j.prototype.modPowInt=Bi,j.ZERO=Ce(0),j.ONE=Ce(1);function ki(){var e=dt();return this.copyTo(e),e}function vi(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function te(){return this.t==0?this.s:this[0]<<24>>24}function ri(){return this.t==0?this.s:this[0]<<16>>16}function Gt(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function gi(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Bt(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var r=this.chunkSize(e),o=Math.pow(e,r),h=Ce(o),_=dt(),I=dt(),N="";for(this.divRemTo(h,_,I);_.signum()>0;)N=(o+I.intValue()).toString(e).substr(1)+N,_.divRemTo(h,_,I);return I.intValue().toString(e)+N}function t(e,r){this.fromInt(0),r==null&&(r=10);for(var o=this.chunkSize(r),h=Math.pow(r,o),_=!1,I=0,N=0,z=0;z<e.length;++z){var q=di(e,z);if(q<0){e.charAt(z)=="-"&&this.signum()==0&&(_=!0);continue}N=r*N+q,++I>=o&&(this.dMultiply(h),this.dAddOffset(N,0),I=0,N=0)}I>0&&(this.dMultiply(Math.pow(r,I)),this.dAddOffset(N,0)),_&&j.ZERO.subTo(this,this)}function i(e,r,o){if(typeof r=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,o),this.testBit(e-1)||this.bitwiseTo(j.ONE.shiftLeft(e-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(j.ONE.shiftLeft(e-1),this);else{var h=new Array,_=e&7;h.length=(e>>3)+1,r.nextBytes(h),_>0?h[0]&=(1<<_)-1:h[0]=0,this.fromString(h,256)}}function n(){var e=this.t,r=new Array;r[0]=this.s;var o=this.DB-e*this.DB%8,h,_=0;if(e-- >0)for(o<this.DB&&(h=this[e]>>o)!=(this.s&this.DM)>>o&&(r[_++]=h|this.s<<this.DB-o);e>=0;)o<8?(h=(this[e]&(1<<o)-1)<<8-o,h|=this[--e]>>(o+=this.DB-8)):(h=this[e]>>(o-=8)&255,o<=0&&(o+=this.DB,--e)),(h&128)!=0&&(h|=-256),_==0&&(this.s&128)!=(h&128)&&++_,(_>0||h!=this.s)&&(r[_++]=h);return r}function a(e){return this.compareTo(e)==0}function u(e){return this.compareTo(e)<0?this:e}function l(e){return this.compareTo(e)>0?this:e}function c(e,r,o){var h,_,I=Math.min(e.t,this.t);for(h=0;h<I;++h)o[h]=r(this[h],e[h]);if(e.t<this.t){for(_=e.s&this.DM,h=I;h<this.t;++h)o[h]=r(this[h],_);o.t=this.t}else{for(_=this.s&this.DM,h=I;h<e.t;++h)o[h]=r(_,e[h]);o.t=e.t}o.s=r(this.s,e.s),o.clamp()}function f(e,r){return e&r}function d(e){var r=dt();return this.bitwiseTo(e,f,r),r}function p(e,r){return e|r}function y(e){var r=dt();return this.bitwiseTo(e,p,r),r}function P(e,r){return e^r}function m(e){var r=dt();return this.bitwiseTo(e,P,r),r}function g(e,r){return e&~r}function O(e){var r=dt();return this.bitwiseTo(e,g,r),r}function C(){for(var e=dt(),r=0;r<this.t;++r)e[r]=this.DM&~this[r];return e.t=this.t,e.s=~this.s,e}function L(e){var r=dt();return e<0?this.rShiftTo(-e,r):this.lShiftTo(e,r),r}function w(e){var r=dt();return e<0?this.lShiftTo(-e,r):this.rShiftTo(e,r),r}function x(e){if(e==0)return-1;var r=0;return(e&65535)==0&&(e>>=16,r+=16),(e&255)==0&&(e>>=8,r+=8),(e&15)==0&&(e>>=4,r+=4),(e&3)==0&&(e>>=2,r+=2),(e&1)==0&&++r,r}function v(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+x(this[e]);return this.s<0?this.t*this.DB:-1}function b(e){for(var r=0;e!=0;)e&=e-1,++r;return r}function E(){for(var e=0,r=this.s&this.DM,o=0;o<this.t;++o)e+=b(this[o]^r);return e}function M(e){var r=Math.floor(e/this.DB);return r>=this.t?this.s!=0:(this[r]&1<<e%this.DB)!=0}function S(e,r){var o=j.ONE.shiftLeft(e);return this.bitwiseTo(o,r,o),o}function B(e){return this.changeBit(e,p)}function D(e){return this.changeBit(e,g)}function X(e){return this.changeBit(e,P)}function W(e,r){for(var o=0,h=0,_=Math.min(e.t,this.t);o<_;)h+=this[o]+e[o],r[o++]=h&this.DM,h>>=this.DB;if(e.t<this.t){for(h+=e.s;o<this.t;)h+=this[o],r[o++]=h&this.DM,h>>=this.DB;h+=this.s}else{for(h+=this.s;o<e.t;)h+=e[o],r[o++]=h&this.DM,h>>=this.DB;h+=e.s}r.s=h<0?-1:0,h>0?r[o++]=h:h<-1&&(r[o++]=this.DV+h),r.t=o,r.clamp()}function k(e){var r=dt();return this.addTo(e,r),r}function V(e){var r=dt();return this.subTo(e,r),r}function H(e){var r=dt();return this.multiplyTo(e,r),r}function J(){var e=dt();return this.squareTo(e),e}function G(e){var r=dt();return this.divRemTo(e,r,null),r}function Q(e){var r=dt();return this.divRemTo(e,null,r),r}function st(e){var r=dt(),o=dt();return this.divRemTo(e,r,o),new Array(r,o)}function ut(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function ht(e,r){if(e!=0){for(;this.t<=r;)this[this.t++]=0;for(this[r]+=e;this[r]>=this.DV;)this[r]-=this.DV,++r>=this.t&&(this[this.t++]=0),++this[r]}}function pt(){}function et(e){return e}function nt(e,r,o){e.multiplyTo(r,o)}function ft(e,r){e.squareTo(r)}pt.prototype.convert=et,pt.prototype.revert=et,pt.prototype.mulTo=nt,pt.prototype.sqrTo=ft;function vt(e){return this.exp(e,new pt)}function _t(e,r,o){var h=Math.min(this.t+e.t,r);for(o.s=0,o.t=h;h>0;)o[--h]=0;var _;for(_=o.t-this.t;h<_;++h)o[h+this.t]=this.am(0,e[h],o,h,0,this.t);for(_=Math.min(e.t,r);h<_;++h)this.am(0,e[h],o,h,0,r-h);o.clamp()}function wt(e,r,o){--r;var h=o.t=this.t+e.t-r;for(o.s=0;--h>=0;)o[h]=0;for(h=Math.max(r-this.t,0);h<e.t;++h)o[this.t+h-r]=this.am(r-h,e[h],o,0,0,this.t+h-r);o.clamp(),o.drShiftTo(1,o)}function yt(e){this.r2=dt(),this.q3=dt(),j.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function St(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var r=dt();return e.copyTo(r),this.reduce(r),r}function Mt(e){return e}function It(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function ee(e,r){e.squareTo(r),this.reduce(r)}function ie(e,r,o){e.multiplyTo(r,o),this.reduce(o)}yt.prototype.convert=St,yt.prototype.revert=Mt,yt.prototype.reduce=It,yt.prototype.mulTo=ie,yt.prototype.sqrTo=ee;function se(e,r){var o=e.bitLength(),h,_=Ce(1),I;if(o<=0)return _;o<18?h=1:o<48?h=3:o<144?h=4:o<768?h=5:h=6,o<8?I=new Oe(r):r.isEven()?I=new yt(r):I=new Ht(r);var N=new Array,z=3,q=h-1,$=(1<<h)-1;if(N[1]=I.convert(this),h>1){var at=dt();for(I.sqrTo(N[1],at);z<=$;)N[z]=dt(),I.mulTo(at,N[z-2],N[z]),z+=2}var it=e.t-1,lt,mt=!0,Tt=dt(),Ot;for(o=be(e[it])-1;it>=0;){for(o>=q?lt=e[it]>>o-q&$:(lt=(e[it]&(1<<o+1)-1)<<q-o,it>0&&(lt|=e[it-1]>>this.DB+o-q)),z=h;(lt&1)==0;)lt>>=1,--z;if((o-=z)<0&&(o+=this.DB,--it),mt)N[lt].copyTo(_),mt=!1;else{for(;z>1;)I.sqrTo(_,Tt),I.sqrTo(Tt,_),z-=2;z>0?I.sqrTo(_,Tt):(Ot=_,_=Tt,Tt=Ot),I.mulTo(Tt,N[lt],_)}for(;it>=0&&(e[it]&1<<o)==0;)I.sqrTo(_,Tt),Ot=_,_=Tt,Tt=Ot,--o<0&&(o=this.DB-1,--it)}return I.revert(_)}function jt(e){var r=this.s<0?this.negate():this.clone(),o=e.s<0?e.negate():e.clone();if(r.compareTo(o)<0){var h=r;r=o,o=h}var _=r.getLowestSetBit(),I=o.getLowestSetBit();if(I<0)return r;for(_<I&&(I=_),I>0&&(r.rShiftTo(I,r),o.rShiftTo(I,o));r.signum()>0;)(_=r.getLowestSetBit())>0&&r.rShiftTo(_,r),(_=o.getLowestSetBit())>0&&o.rShiftTo(_,o),r.compareTo(o)>=0?(r.subTo(o,r),r.rShiftTo(1,r)):(o.subTo(r,o),o.rShiftTo(1,o));return I>0&&o.lShiftTo(I,o),o}function zt(e){if(e<=0)return 0;var r=this.DV%e,o=this.s<0?e-1:0;if(this.t>0)if(r==0)o=this[0]%e;else for(var h=this.t-1;h>=0;--h)o=(r*o+this[h])%e;return o}function Kt(e){var r=e.isEven();if(this.isEven()&&r||e.signum()==0)return j.ZERO;for(var o=e.clone(),h=this.clone(),_=Ce(1),I=Ce(0),N=Ce(0),z=Ce(1);o.signum()!=0;){for(;o.isEven();)o.rShiftTo(1,o),r?((!_.isEven()||!I.isEven())&&(_.addTo(this,_),I.subTo(e,I)),_.rShiftTo(1,_)):I.isEven()||I.subTo(e,I),I.rShiftTo(1,I);for(;h.isEven();)h.rShiftTo(1,h),r?((!N.isEven()||!z.isEven())&&(N.addTo(this,N),z.subTo(e,z)),N.rShiftTo(1,N)):z.isEven()||z.subTo(e,z),z.rShiftTo(1,z);o.compareTo(h)>=0?(o.subTo(h,o),r&&_.subTo(N,_),I.subTo(z,I)):(h.subTo(o,h),r&&N.subTo(_,N),z.subTo(I,z))}if(h.compareTo(j.ONE)!=0)return j.ZERO;if(z.compareTo(e)>=0)return z.subtract(e);if(z.signum()<0)z.addTo(e,z);else return z;return z.signum()<0?z.add(e):z}var Vt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ne=(1<<26)/Vt[Vt.length-1];function me(e){var r,o=this.abs();if(o.t==1&&o[0]<=Vt[Vt.length-1]){for(r=0;r<Vt.length;++r)if(o[0]==Vt[r])return!0;return!1}if(o.isEven())return!1;for(r=1;r<Vt.length;){for(var h=Vt[r],_=r+1;_<Vt.length&&h<ne;)h*=Vt[_++];for(h=o.modInt(h);r<_;)if(h%Vt[r++]==0)return!1}return o.millerRabin(e)}function Ne(e){var r=this.subtract(j.ONE),o=r.getLowestSetBit();if(o<=0)return!1;var h=r.shiftRight(o);e=e+1>>1,e>Vt.length&&(e=Vt.length);for(var _=dt(),I=0;I<e;++I){_.fromInt(Vt[Math.floor(Math.random()*Vt.length)]);var N=_.modPow(h,this);if(N.compareTo(j.ONE)!=0&&N.compareTo(r)!=0){for(var z=1;z++<o&&N.compareTo(r)!=0;)if(N=N.modPowInt(2,this),N.compareTo(j.ONE)==0)return!1;if(N.compareTo(r)!=0)return!1}}return!0}j.prototype.chunkSize=Gt,j.prototype.toRadix=Bt,j.prototype.fromRadix=t,j.prototype.fromNumber=i,j.prototype.bitwiseTo=c,j.prototype.changeBit=S,j.prototype.addTo=W,j.prototype.dMultiply=ut,j.prototype.dAddOffset=ht,j.prototype.multiplyLowerTo=_t,j.prototype.multiplyUpperTo=wt,j.prototype.modInt=zt,j.prototype.millerRabin=Ne,j.prototype.clone=ki,j.prototype.intValue=vi,j.prototype.byteValue=te,j.prototype.shortValue=ri,j.prototype.signum=gi,j.prototype.toByteArray=n,j.prototype.equals=a,j.prototype.min=u,j.prototype.max=l,j.prototype.and=d,j.prototype.or=y,j.prototype.xor=m,j.prototype.andNot=O,j.prototype.not=C,j.prototype.shiftLeft=L,j.prototype.shiftRight=w,j.prototype.getLowestSetBit=v,j.prototype.bitCount=E,j.prototype.testBit=M,j.prototype.setBit=B,j.prototype.clearBit=D,j.prototype.flipBit=X,j.prototype.add=k,j.prototype.subtract=V,j.prototype.multiply=H,j.prototype.divide=G,j.prototype.remainder=Q,j.prototype.divideAndRemainder=st,j.prototype.modPow=se,j.prototype.modInverse=Kt,j.prototype.pow=vt,j.prototype.gcd=jt,j.prototype.isProbablePrime=me,j.prototype.square=J;var bt=j;bt.prototype.IsNegative=function(){return this.compareTo(bt.ZERO)==-1},bt.op_Equality=function(e,r){return e.compareTo(r)==0},bt.op_Inequality=function(e,r){return e.compareTo(r)!=0},bt.op_GreaterThan=function(e,r){return e.compareTo(r)>0},bt.op_LessThan=function(e,r){return e.compareTo(r)<0},bt.op_Addition=function(e,r){return new bt(e,void 0,void 0).add(new bt(r,void 0,void 0))},bt.op_Subtraction=function(e,r){return new bt(e,void 0,void 0).subtract(new bt(r,void 0,void 0))},bt.Int128Mul=function(e,r){return new bt(e,void 0,void 0).multiply(new bt(r,void 0,void 0))},bt.op_Division=function(e,r){return e.divide(r)},bt.prototype.ToDouble=function(){return parseFloat(this.toString())};var ye=function(e,r){var o;if(typeof Object.getOwnPropertyNames>"u"){for(o in r.prototype)(typeof e.prototype[o]>"u"||e.prototype[o]===Object.prototype[o])&&(e.prototype[o]=r.prototype[o]);for(o in r)typeof e[o]>"u"&&(e[o]=r[o]);e.$baseCtor=r}else{for(var h=Object.getOwnPropertyNames(r.prototype),_=0;_<h.length;_++)typeof Object.getOwnPropertyDescriptor(e.prototype,h[_])>"u"&&Object.defineProperty(e.prototype,h[_],Object.getOwnPropertyDescriptor(r.prototype,h[_]));for(o in r)typeof e[o]>"u"&&(e[o]=r[o]);e.$baseCtor=r}};s.Path=function(){return[]},s.Path.prototype.push=Array.prototype.push,s.Paths=function(){return[]},s.Paths.prototype.push=Array.prototype.push,s.DoublePoint=function(){var e=arguments;this.X=0,this.Y=0,e.length===1?(this.X=e[0].X,this.Y=e[0].Y):e.length===2&&(this.X=e[0],this.Y=e[1])},s.DoublePoint0=function(){this.X=0,this.Y=0},s.DoublePoint0.prototype=s.DoublePoint.prototype,s.DoublePoint1=function(e){this.X=e.X,this.Y=e.Y},s.DoublePoint1.prototype=s.DoublePoint.prototype,s.DoublePoint2=function(e,r){this.X=e,this.Y=r},s.DoublePoint2.prototype=s.DoublePoint.prototype,s.PolyNode=function(){this.m_Parent=null,this.m_polygon=new s.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},s.PolyNode.prototype.IsHoleNode=function(){for(var e=!0,r=this.m_Parent;r!==null;)e=!e,r=r.m_Parent;return e},s.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},s.PolyNode.prototype.Contour=function(){return this.m_polygon},s.PolyNode.prototype.AddChild=function(e){var r=this.m_Childs.length;this.m_Childs.push(e),e.m_Parent=this,e.m_Index=r},s.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},s.PolyNode.prototype.GetNextSiblingUp=function(){return this.m_Parent===null?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},s.PolyNode.prototype.Childs=function(){return this.m_Childs},s.PolyNode.prototype.Parent=function(){return this.m_Parent},s.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},s.PolyTree=function(){this.m_AllPolys=[],s.PolyNode.call(this)},s.PolyTree.prototype.Clear=function(){for(var e=0,r=this.m_AllPolys.length;e<r;e++)this.m_AllPolys[e]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},s.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},s.PolyTree.prototype.Total=function(){var e=this.m_AllPolys.length;return e>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&e--,e},ye(s.PolyTree,s.PolyNode),s.Math_Abs_Int64=s.Math_Abs_Int32=s.Math_Abs_Double=function(e){return Math.abs(e)},s.Math_Max_Int32_Int32=function(e,r){return Math.max(e,r)},T.msie||T.opera||T.safari?s.Cast_Int32=function(e){return e|0}:s.Cast_Int32=function(e){return~~e},typeof Number.toInteger>"u"&&(Number.toInteger=null),T.chrome?s.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):~~e}:T.firefox&&typeof Number.toInteger=="function"?s.Cast_Int64=function(e){return Number.toInteger(e)}:T.msie7||T.msie8?s.Cast_Int64=function(e){return parseInt(e,10)}:T.msie?s.Cast_Int64=function(e){return e<-2147483648||e>2147483647?e<0?Math.ceil(e):Math.floor(e):e|0}:s.Cast_Int64=function(e){return e<0?Math.ceil(e):Math.floor(e)},s.Clear=function(e){e.length=0},s.PI=3.141592653589793,s.PI2=2*3.141592653589793,s.IntPoint=function(){var e=arguments,r=e.length;if(this.X=0,this.Y=0,s.use_xyz)if(this.Z=0,r===3)this.X=e[0],this.Y=e[1],this.Z=e[2];else if(r===2)this.X=e[0],this.Y=e[1],this.Z=0;else if(r===1)if(e[0]instanceof s.DoublePoint){var o=e[0];this.X=s.Clipper.Round(o.X),this.Y=s.Clipper.Round(o.Y),this.Z=0}else{var h=e[0];typeof h.Z>"u"&&(h.Z=0),this.X=h.X,this.Y=h.Y,this.Z=h.Z}else this.X=0,this.Y=0,this.Z=0;else if(r===2)this.X=e[0],this.Y=e[1];else if(r===1)if(e[0]instanceof s.DoublePoint){var o=e[0];this.X=s.Clipper.Round(o.X),this.Y=s.Clipper.Round(o.Y)}else{var h=e[0];this.X=h.X,this.Y=h.Y}else this.X=0,this.Y=0},s.IntPoint.op_Equality=function(e,r){return e.X===r.X&&e.Y===r.Y},s.IntPoint.op_Inequality=function(e,r){return e.X!==r.X||e.Y!==r.Y},s.IntPoint0=function(){this.X=0,this.Y=0,s.use_xyz&&(this.Z=0)},s.IntPoint0.prototype=s.IntPoint.prototype,s.IntPoint1=function(e){this.X=e.X,this.Y=e.Y,s.use_xyz&&(typeof e.Z>"u"?this.Z=0:this.Z=e.Z)},s.IntPoint1.prototype=s.IntPoint.prototype,s.IntPoint1dp=function(e){this.X=s.Clipper.Round(e.X),this.Y=s.Clipper.Round(e.Y),s.use_xyz&&(this.Z=0)},s.IntPoint1dp.prototype=s.IntPoint.prototype,s.IntPoint2=function(e,r,o){this.X=e,this.Y=r,s.use_xyz&&(typeof o>"u"?this.Z=0:this.Z=o)},s.IntPoint2.prototype=s.IntPoint.prototype,s.IntRect=function(){var e=arguments,r=e.length;if(r===4)this.left=e[0],this.top=e[1],this.right=e[2],this.bottom=e[3];else if(r===1){var o=e[0];this.left=o.left,this.top=o.top,this.right=o.right,this.bottom=o.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},s.IntRect0.prototype=s.IntRect.prototype,s.IntRect1=function(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom},s.IntRect1.prototype=s.IntRect.prototype,s.IntRect4=function(e,r,o,h){this.left=e,this.top=r,this.right=o,this.bottom=h},s.IntRect4.prototype=s.IntRect.prototype,s.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},s.PolyType={ptSubject:0,ptClip:1},s.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},s.JoinType={jtSquare:0,jtRound:1,jtMiter:2},s.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},s.EdgeSide={esLeft:0,esRight:1},s.Direction={dRightToLeft:0,dLeftToRight:1},s.TEdge=function(){this.Bot=new s.IntPoint0,this.Curr=new s.IntPoint0,this.Top=new s.IntPoint0,this.Delta=new s.IntPoint0,this.Dx=0,this.PolyTyp=s.PolyType.ptSubject,this.Side=s.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},s.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new s.IntPoint0},s.MyIntersectNodeSort=function(){},s.MyIntersectNodeSort.Compare=function(e,r){var o=r.Pt.Y-e.Pt.Y;return o>0?1:o<0?-1:0},s.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},s.Scanbeam=function(){this.Y=0,this.Next=null},s.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},s.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},s.OutPt=function(){this.Idx=0,this.Pt=new s.IntPoint0,this.Next=null,this.Prev=null},s.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new s.IntPoint0},s.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},s.ClipperBase.horizontal=-9007199254740992,s.ClipperBase.Skip=-2,s.ClipperBase.Unassigned=-1,s.ClipperBase.tolerance=1e-20,s.ClipperBase.loRange=47453132,s.ClipperBase.hiRange=0xfffffffffffff,s.ClipperBase.near_zero=function(e){return e>-s.ClipperBase.tolerance&&e<s.ClipperBase.tolerance},s.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0},s.ClipperBase.prototype.PointIsVertex=function(e,r){var o=r;do{if(s.IntPoint.op_Equality(o.Pt,e))return!0;o=o.Next}while(o!==r);return!1},s.ClipperBase.prototype.PointOnLineSegment=function(e,r,o,h){return h?e.X===r.X&&e.Y===r.Y||e.X===o.X&&e.Y===o.Y||e.X>r.X==e.X<o.X&&e.Y>r.Y==e.Y<o.Y&&bt.op_Equality(bt.Int128Mul(e.X-r.X,o.Y-r.Y),bt.Int128Mul(o.X-r.X,e.Y-r.Y)):e.X===r.X&&e.Y===r.Y||e.X===o.X&&e.Y===o.Y||e.X>r.X==e.X<o.X&&e.Y>r.Y==e.Y<o.Y&&(e.X-r.X)*(o.Y-r.Y)===(o.X-r.X)*(e.Y-r.Y)},s.ClipperBase.prototype.PointOnPolygon=function(e,r,o){for(var h=r;;){if(this.PointOnLineSegment(e,h.Pt,h.Next.Pt,o))return!0;if(h=h.Next,h===r)break}return!1},s.ClipperBase.prototype.SlopesEqual=s.ClipperBase.SlopesEqual=function(){var e=arguments,r=e.length,o,h,_,I,N,z,q;return r===3?(o=e[0],h=e[1],q=e[2],q?bt.op_Equality(bt.Int128Mul(o.Delta.Y,h.Delta.X),bt.Int128Mul(o.Delta.X,h.Delta.Y)):s.Cast_Int64(o.Delta.Y*h.Delta.X)===s.Cast_Int64(o.Delta.X*h.Delta.Y)):r===4?(_=e[0],I=e[1],N=e[2],q=e[3],q?bt.op_Equality(bt.Int128Mul(_.Y-I.Y,I.X-N.X),bt.Int128Mul(_.X-I.X,I.Y-N.Y)):s.Cast_Int64((_.Y-I.Y)*(I.X-N.X))-s.Cast_Int64((_.X-I.X)*(I.Y-N.Y))===0):(_=e[0],I=e[1],N=e[2],z=e[3],q=e[4],q?bt.op_Equality(bt.Int128Mul(_.Y-I.Y,N.X-z.X),bt.Int128Mul(_.X-I.X,N.Y-z.Y)):s.Cast_Int64((_.Y-I.Y)*(N.X-z.X))-s.Cast_Int64((_.X-I.X)*(N.Y-z.Y))===0)},s.ClipperBase.SlopesEqual3=function(e,r,o){return o?bt.op_Equality(bt.Int128Mul(e.Delta.Y,r.Delta.X),bt.Int128Mul(e.Delta.X,r.Delta.Y)):s.Cast_Int64(e.Delta.Y*r.Delta.X)===s.Cast_Int64(e.Delta.X*r.Delta.Y)},s.ClipperBase.SlopesEqual4=function(e,r,o,h){return h?bt.op_Equality(bt.Int128Mul(e.Y-r.Y,r.X-o.X),bt.Int128Mul(e.X-r.X,r.Y-o.Y)):s.Cast_Int64((e.Y-r.Y)*(r.X-o.X))-s.Cast_Int64((e.X-r.X)*(r.Y-o.Y))===0},s.ClipperBase.SlopesEqual5=function(e,r,o,h,_){return _?bt.op_Equality(bt.Int128Mul(e.Y-r.Y,o.X-h.X),bt.Int128Mul(e.X-r.X,o.Y-h.Y)):s.Cast_Int64((e.Y-r.Y)*(o.X-h.X))-s.Cast_Int64((e.X-r.X)*(o.Y-h.Y))===0},s.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var e=0,r=this.m_edges.length;e<r;++e){for(var o=0,h=this.m_edges[e].length;o<h;++o)this.m_edges[e][o]=null;s.Clear(this.m_edges[e])}s.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},s.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;this.m_MinimaList!==null;){var e=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=e}this.m_CurrentLM=null},s.ClipperBase.prototype.RangeTest=function(e,r){r.Value?(e.X>s.ClipperBase.hiRange||e.Y>s.ClipperBase.hiRange||-e.X>s.ClipperBase.hiRange||-e.Y>s.ClipperBase.hiRange)&&s.Error("Coordinate outside allowed range in RangeTest()."):(e.X>s.ClipperBase.loRange||e.Y>s.ClipperBase.loRange||-e.X>s.ClipperBase.loRange||-e.Y>s.ClipperBase.loRange)&&(r.Value=!0,this.RangeTest(e,r))},s.ClipperBase.prototype.InitEdge=function(e,r,o,h){e.Next=r,e.Prev=o,e.Curr.X=h.X,e.Curr.Y=h.Y,s.use_xyz&&(e.Curr.Z=h.Z),e.OutIdx=-1},s.ClipperBase.prototype.InitEdge2=function(e,r){e.Curr.Y>=e.Next.Curr.Y?(e.Bot.X=e.Curr.X,e.Bot.Y=e.Curr.Y,s.use_xyz&&(e.Bot.Z=e.Curr.Z),e.Top.X=e.Next.Curr.X,e.Top.Y=e.Next.Curr.Y,s.use_xyz&&(e.Top.Z=e.Next.Curr.Z)):(e.Top.X=e.Curr.X,e.Top.Y=e.Curr.Y,s.use_xyz&&(e.Top.Z=e.Curr.Z),e.Bot.X=e.Next.Curr.X,e.Bot.Y=e.Next.Curr.Y,s.use_xyz&&(e.Bot.Z=e.Next.Curr.Z)),this.SetDx(e),e.PolyTyp=r},s.ClipperBase.prototype.FindNextLocMin=function(e){for(var r;;){for(;s.IntPoint.op_Inequality(e.Bot,e.Prev.Bot)||s.IntPoint.op_Equality(e.Curr,e.Top);)e=e.Next;if(e.Dx!==s.ClipperBase.horizontal&&e.Prev.Dx!==s.ClipperBase.horizontal)break;for(;e.Prev.Dx===s.ClipperBase.horizontal;)e=e.Prev;for(r=e;e.Dx===s.ClipperBase.horizontal;)e=e.Next;if(e.Top.Y!==e.Prev.Bot.Y){r.Prev.Bot.X<e.Bot.X&&(e=r);break}}return e},s.ClipperBase.prototype.ProcessBound=function(e,r){var o,h=e,_;if(h.OutIdx===s.ClipperBase.Skip){if(e=h,r){for(;e.Top.Y===e.Next.Bot.Y;)e=e.Next;for(;e!==h&&e.Dx===s.ClipperBase.horizontal;)e=e.Prev}else{for(;e.Top.Y===e.Prev.Bot.Y;)e=e.Prev;for(;e!==h&&e.Dx===s.ClipperBase.horizontal;)e=e.Next}if(e===h)r?h=e.Next:h=e.Prev;else{r?e=h.Next:e=h.Prev;var I=new s.LocalMinima;I.Next=null,I.Y=e.Bot.Y,I.LeftBound=null,I.RightBound=e,e.WindDelta=0,h=this.ProcessBound(e,r),this.InsertLocalMinima(I)}return h}if(e.Dx===s.ClipperBase.horizontal&&(r?o=e.Prev:o=e.Next,o.Dx===s.ClipperBase.horizontal?o.Bot.X!==e.Bot.X&&o.Top.X!==e.Bot.X&&this.ReverseHorizontal(e):o.Bot.X!==e.Bot.X&&this.ReverseHorizontal(e)),o=e,r){for(;h.Top.Y===h.Next.Bot.Y&&h.Next.OutIdx!==s.ClipperBase.Skip;)h=h.Next;if(h.Dx===s.ClipperBase.horizontal&&h.Next.OutIdx!==s.ClipperBase.Skip){for(_=h;_.Prev.Dx===s.ClipperBase.horizontal;)_=_.Prev;_.Prev.Top.X>h.Next.Top.X&&(h=_.Prev)}for(;e!==h;)e.NextInLML=e.Next,e.Dx===s.ClipperBase.horizontal&&e!==o&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),e=e.Next;e.Dx===s.ClipperBase.horizontal&&e!==o&&e.Bot.X!==e.Prev.Top.X&&this.ReverseHorizontal(e),h=h.Next}else{for(;h.Top.Y===h.Prev.Bot.Y&&h.Prev.OutIdx!==s.ClipperBase.Skip;)h=h.Prev;if(h.Dx===s.ClipperBase.horizontal&&h.Prev.OutIdx!==s.ClipperBase.Skip){for(_=h;_.Next.Dx===s.ClipperBase.horizontal;)_=_.Next;(_.Next.Top.X===h.Prev.Top.X||_.Next.Top.X>h.Prev.Top.X)&&(h=_.Next)}for(;e!==h;)e.NextInLML=e.Prev,e.Dx===s.ClipperBase.horizontal&&e!==o&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),e=e.Prev;e.Dx===s.ClipperBase.horizontal&&e!==o&&e.Bot.X!==e.Next.Top.X&&this.ReverseHorizontal(e),h=h.Prev}return h},s.ClipperBase.prototype.AddPath=function(e,r,o){s.use_lines?!o&&r===s.PolyType.ptClip&&s.Error("AddPath: Open paths must be subject."):o||s.Error("AddPath: Open paths have been disabled.");var h=e.length-1;if(o)for(;h>0&&s.IntPoint.op_Equality(e[h],e[0]);)--h;for(;h>0&&s.IntPoint.op_Equality(e[h],e[h-1]);)--h;if(o&&h<2||!o&&h<1)return!1;for(var _=new Array,I=0;I<=h;I++)_.push(new s.TEdge);var N=!0;_[1].Curr.X=e[1].X,_[1].Curr.Y=e[1].Y,s.use_xyz&&(_[1].Curr.Z=e[1].Z);var z={Value:this.m_UseFullRange};this.RangeTest(e[0],z),this.m_UseFullRange=z.Value,z.Value=this.m_UseFullRange,this.RangeTest(e[h],z),this.m_UseFullRange=z.Value,this.InitEdge(_[0],_[1],_[h],e[0]),this.InitEdge(_[h],_[0],_[h-1],e[h]);for(var I=h-1;I>=1;--I)z.Value=this.m_UseFullRange,this.RangeTest(e[I],z),this.m_UseFullRange=z.Value,this.InitEdge(_[I],_[I+1],_[I-1],e[I]);for(var q=_[0],$=q,at=q;;){if($.Curr===$.Next.Curr&&(o||$.Next!==q)){if($===$.Next)break;$===q&&(q=$.Next),$=this.RemoveEdge($),at=$;continue}if($.Prev===$.Next)break;if(o&&s.ClipperBase.SlopesEqual4($.Prev.Curr,$.Curr,$.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3($.Prev.Curr,$.Curr,$.Next.Curr))){$===q&&(q=$.Next),$=this.RemoveEdge($),$=$.Prev,at=$;continue}if($=$.Next,$===at||!o&&$.Next===q)break}if(!o&&$===$.Next||o&&$.Prev===$.Next)return!1;o||(this.m_HasOpenPaths=!0,q.Prev.OutIdx=s.ClipperBase.Skip),$=q;do this.InitEdge2($,r),$=$.Next,N&&$.Curr.Y!==q.Curr.Y&&(N=!1);while($!==q);if(N){if(o)return!1;$.Prev.OutIdx=s.ClipperBase.Skip;var it=new s.LocalMinima;for(it.Next=null,it.Y=$.Bot.Y,it.LeftBound=null,it.RightBound=$,it.RightBound.Side=s.EdgeSide.esRight,it.RightBound.WindDelta=0;$.Bot.X!==$.Prev.Top.X&&this.ReverseHorizontal($),$.Next.OutIdx!==s.ClipperBase.Skip;)$.NextInLML=$.Next,$=$.Next;return this.InsertLocalMinima(it),this.m_edges.push(_),!0}this.m_edges.push(_);var lt,mt=null;for(s.IntPoint.op_Equality($.Prev.Bot,$.Prev.Top)&&($=$.Next);$=this.FindNextLocMin($),$!==mt;){mt===null&&(mt=$);var it=new s.LocalMinima;it.Next=null,it.Y=$.Bot.Y,$.Dx<$.Prev.Dx?(it.LeftBound=$.Prev,it.RightBound=$,lt=!1):(it.LeftBound=$,it.RightBound=$.Prev,lt=!0),it.LeftBound.Side=s.EdgeSide.esLeft,it.RightBound.Side=s.EdgeSide.esRight,o?it.LeftBound.Next===it.RightBound?it.LeftBound.WindDelta=-1:it.LeftBound.WindDelta=1:it.LeftBound.WindDelta=0,it.RightBound.WindDelta=-it.LeftBound.WindDelta,$=this.ProcessBound(it.LeftBound,lt),$.OutIdx===s.ClipperBase.Skip&&($=this.ProcessBound($,lt));var Tt=this.ProcessBound(it.RightBound,!lt);Tt.OutIdx===s.ClipperBase.Skip&&(Tt=this.ProcessBound(Tt,!lt)),it.LeftBound.OutIdx===s.ClipperBase.Skip?it.LeftBound=null:it.RightBound.OutIdx===s.ClipperBase.Skip&&(it.RightBound=null),this.InsertLocalMinima(it),lt||($=Tt)}return!0},s.ClipperBase.prototype.AddPaths=function(e,r,o){for(var h=!1,_=0,I=e.length;_<I;++_)this.AddPath(e[_],r,o)&&(h=!0);return h},s.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(e,r,o){return s.IntPoint.op_Equality(e,o)||s.IntPoint.op_Equality(e,r)||s.IntPoint.op_Equality(o,r)?!1:e.X!==o.X?r.X>e.X==r.X<o.X:r.Y>e.Y==r.Y<o.Y},s.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next,e.Next.Prev=e.Prev;var r=e.Next;return e.Prev=null,r},s.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X,e.Delta.Y=e.Top.Y-e.Bot.Y,e.Delta.Y===0?e.Dx=s.ClipperBase.horizontal:e.Dx=e.Delta.X/e.Delta.Y},s.ClipperBase.prototype.InsertLocalMinima=function(e){if(this.m_MinimaList===null)this.m_MinimaList=e;else if(e.Y>=this.m_MinimaList.Y)e.Next=this.m_MinimaList,this.m_MinimaList=e;else{for(var r=this.m_MinimaList;r.Next!==null&&e.Y<r.Next.Y;)r=r.Next;e.Next=r.Next,r.Next=e}},s.ClipperBase.prototype.PopLocalMinima=function(e,r){return r.v=this.m_CurrentLM,this.m_CurrentLM!==null&&this.m_CurrentLM.Y===e?(this.m_CurrentLM=this.m_CurrentLM.Next,!0):!1},s.ClipperBase.prototype.ReverseHorizontal=function(e){var r=e.Top.X;e.Top.X=e.Bot.X,e.Bot.X=r,s.use_xyz&&(r=e.Top.Z,e.Top.Z=e.Bot.Z,e.Bot.Z=r)},s.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,this.m_CurrentLM!==null){this.m_Scanbeam=null;for(var e=this.m_MinimaList;e!==null;){this.InsertScanbeam(e.Y);var r=e.LeftBound;r!==null&&(r.Curr.X=r.Bot.X,r.Curr.Y=r.Bot.Y,s.use_xyz&&(r.Curr.Z=r.Bot.Z),r.OutIdx=s.ClipperBase.Unassigned),r=e.RightBound,r!==null&&(r.Curr.X=r.Bot.X,r.Curr.Y=r.Bot.Y,s.use_xyz&&(r.Curr.Z=r.Bot.Z),r.OutIdx=s.ClipperBase.Unassigned),e=e.Next}this.m_ActiveEdges=null}},s.ClipperBase.prototype.InsertScanbeam=function(e){if(this.m_Scanbeam===null)this.m_Scanbeam=new s.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=e;else if(e>this.m_Scanbeam.Y){var r=new s.Scanbeam;r.Y=e,r.Next=this.m_Scanbeam,this.m_Scanbeam=r}else{for(var o=this.m_Scanbeam;o.Next!==null&&e<=o.Next.Y;)o=o.Next;if(e===o.Y)return;var h=new s.Scanbeam;h.Y=e,h.Next=o.Next,o.Next=h}},s.ClipperBase.prototype.PopScanbeam=function(e){return this.m_Scanbeam===null?(e.v=0,!1):(e.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},s.ClipperBase.prototype.LocalMinimaPending=function(){return this.m_CurrentLM!==null},s.ClipperBase.prototype.CreateOutRec=function(){var e=new s.OutRec;return e.Idx=s.ClipperBase.Unassigned,e.IsHole=!1,e.IsOpen=!1,e.FirstLeft=null,e.Pts=null,e.BottomPt=null,e.PolyNode=null,this.m_PolyOuts.push(e),e.Idx=this.m_PolyOuts.length-1,e},s.ClipperBase.prototype.DisposeOutRec=function(e){var r=this.m_PolyOuts[e];r.Pts=null,r=null,this.m_PolyOuts[e]=null},s.ClipperBase.prototype.UpdateEdgeIntoAEL=function(e){e.NextInLML===null&&s.Error("UpdateEdgeIntoAEL: invalid call");var r=e.PrevInAEL,o=e.NextInAEL;return e.NextInLML.OutIdx=e.OutIdx,r!==null?r.NextInAEL=e.NextInLML:this.m_ActiveEdges=e.NextInLML,o!==null&&(o.PrevInAEL=e.NextInLML),e.NextInLML.Side=e.Side,e.NextInLML.WindDelta=e.WindDelta,e.NextInLML.WindCnt=e.WindCnt,e.NextInLML.WindCnt2=e.WindCnt2,e=e.NextInLML,e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.PrevInAEL=r,e.NextInAEL=o,s.ClipperBase.IsHorizontal(e)||this.InsertScanbeam(e.Top.Y),e},s.ClipperBase.prototype.SwapPositionsInAEL=function(e,r){if(!(e.NextInAEL===e.PrevInAEL||r.NextInAEL===r.PrevInAEL)){if(e.NextInAEL===r){var o=r.NextInAEL;o!==null&&(o.PrevInAEL=e);var h=e.PrevInAEL;h!==null&&(h.NextInAEL=r),r.PrevInAEL=h,r.NextInAEL=e,e.PrevInAEL=r,e.NextInAEL=o}else if(r.NextInAEL===e){var _=e.NextInAEL;_!==null&&(_.PrevInAEL=r);var I=r.PrevInAEL;I!==null&&(I.NextInAEL=e),e.PrevInAEL=I,e.NextInAEL=r,r.PrevInAEL=e,r.NextInAEL=_}else{var N=e.NextInAEL,z=e.PrevInAEL;e.NextInAEL=r.NextInAEL,e.NextInAEL!==null&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=r.PrevInAEL,e.PrevInAEL!==null&&(e.PrevInAEL.NextInAEL=e),r.NextInAEL=N,r.NextInAEL!==null&&(r.NextInAEL.PrevInAEL=r),r.PrevInAEL=z,r.PrevInAEL!==null&&(r.PrevInAEL.NextInAEL=r)}e.PrevInAEL===null?this.m_ActiveEdges=e:r.PrevInAEL===null&&(this.m_ActiveEdges=r)}},s.ClipperBase.prototype.DeleteFromAEL=function(e){var r=e.PrevInAEL,o=e.NextInAEL;r===null&&o===null&&e!==this.m_ActiveEdges||(r!==null?r.NextInAEL=o:this.m_ActiveEdges=o,o!==null&&(o.PrevInAEL=r),e.NextInAEL=null,e.PrevInAEL=null)},s.Clipper=function(e){typeof e>"u"&&(e=0),this.m_PolyOuts=null,this.m_ClipType=s.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=s.PolyFillType.pftEvenOdd,this.m_SubjFillType=s.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,s.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=s.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=(1&e)!==0,this.StrictlySimple=(2&e)!==0,this.PreserveCollinear=(4&e)!==0,s.use_xyz&&(this.ZFillFunction=null)},s.Clipper.ioReverseSolution=1,s.Clipper.ioStrictlySimple=2,s.Clipper.ioPreserveCollinear=4,s.Clipper.prototype.Clear=function(){this.m_edges.length!==0&&(this.DisposeAllPolyPts(),s.ClipperBase.prototype.Clear.call(this))},s.Clipper.prototype.InsertMaxima=function(e){var r=new s.Maxima;if(r.X=e,this.m_Maxima===null)this.m_Maxima=r,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(e<this.m_Maxima.X)r.Next=this.m_Maxima,r.Prev=null,this.m_Maxima=r;else{for(var o=this.m_Maxima;o.Next!==null&&e>=o.Next.X;)o=o.Next;if(e===o.X)return;r.Next=o.Next,r.Prev=o,o.Next!==null&&(o.Next.Prev=r),o.Next=r}},s.Clipper.prototype.Execute=function(){var e=arguments,r=e.length,o=e[1]instanceof s.PolyTree;if(r===4&&!o){var h=e[0],_=e[1],I=e[2],N=e[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&s.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,s.Clear(_),this.m_SubjFillType=I,this.m_ClipFillType=N,this.m_ClipType=h,this.m_UsingPolyTree=!1;try{var z=this.ExecuteInternal();z&&this.BuildResult(_)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return z}else if(r===4&&o){var h=e[0],q=e[1],I=e[2],N=e[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=I,this.m_ClipFillType=N,this.m_ClipType=h,this.m_UsingPolyTree=!0;try{var z=this.ExecuteInternal();z&&this.BuildResult2(q)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return z}else if(r===2&&!o){var h=e[0],_=e[1];return this.Execute(h,_,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}else if(r===2&&o){var h=e[0],q=e[1];return this.Execute(h,q,s.PolyFillType.pftEvenOdd,s.PolyFillType.pftEvenOdd)}},s.Clipper.prototype.FixHoleLinkage=function(e){if(!(e.FirstLeft===null||e.IsHole!==e.FirstLeft.IsHole&&e.FirstLeft.Pts!==null)){for(var r=e.FirstLeft;r!==null&&(r.IsHole===e.IsHole||r.Pts===null);)r=r.FirstLeft;e.FirstLeft=r}},s.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var e={},r={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(r)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(r.v))return!1;this.ProcessEdgesAtTopOfScanbeam(r.v),e.v=r.v,this.InsertLocalMinimaIntoAEL(e.v)}var o,h,_;for(h=0,_=this.m_PolyOuts.length;h<_;h++)o=this.m_PolyOuts[h],!(o.Pts===null||o.IsOpen)&&(o.IsHole^this.ReverseSolution)==this.Area$1(o)>0&&this.ReversePolyPtLinks(o.Pts);for(this.JoinCommonEdges(),h=0,_=this.m_PolyOuts.length;h<_;h++)o=this.m_PolyOuts[h],o.Pts!==null&&(o.IsOpen?this.FixupOutPolyline(o):this.FixupOutPolygon(o));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},s.Clipper.prototype.DisposeAllPolyPts=function(){for(var e=0,r=this.m_PolyOuts.length;e<r;++e)this.DisposeOutRec(e);s.Clear(this.m_PolyOuts)},s.Clipper.prototype.AddJoin=function(e,r,o){var h=new s.Join;h.OutPt1=e,h.OutPt2=r,h.OffPt.X=o.X,h.OffPt.Y=o.Y,s.use_xyz&&(h.OffPt.Z=o.Z),this.m_Joins.push(h)},s.Clipper.prototype.AddGhostJoin=function(e,r){var o=new s.Join;o.OutPt1=e,o.OffPt.X=r.X,o.OffPt.Y=r.Y,s.use_xyz&&(o.OffPt.Z=r.Z),this.m_GhostJoins.push(o)},s.Clipper.prototype.SetZ=function(e,r,o){if(this.ZFillFunction!==null){if(e.Z!==0||this.ZFillFunction===null)return;s.IntPoint.op_Equality(e,r.Bot)?e.Z=r.Bot.Z:s.IntPoint.op_Equality(e,r.Top)?e.Z=r.Top.Z:s.IntPoint.op_Equality(e,o.Bot)?e.Z=o.Bot.Z:s.IntPoint.op_Equality(e,o.Top)?e.Z=o.Top.Z:this.ZFillFunction(r.Bot,r.Top,o.Bot,o.Top,e)}},s.Clipper.prototype.InsertLocalMinimaIntoAEL=function(e){for(var r={},o,h;this.PopLocalMinima(e,r);){o=r.v.LeftBound,h=r.v.RightBound;var _=null;if(o===null?(this.InsertEdgeIntoAEL(h,null),this.SetWindingCount(h),this.IsContributing(h)&&(_=this.AddOutPt(h,h.Bot))):h===null?(this.InsertEdgeIntoAEL(o,null),this.SetWindingCount(o),this.IsContributing(o)&&(_=this.AddOutPt(o,o.Bot)),this.InsertScanbeam(o.Top.Y)):(this.InsertEdgeIntoAEL(o,null),this.InsertEdgeIntoAEL(h,o),this.SetWindingCount(o),h.WindCnt=o.WindCnt,h.WindCnt2=o.WindCnt2,this.IsContributing(o)&&(_=this.AddLocalMinPoly(o,h,o.Bot)),this.InsertScanbeam(o.Top.Y)),h!==null&&(s.ClipperBase.IsHorizontal(h)?(h.NextInLML!==null&&this.InsertScanbeam(h.NextInLML.Top.Y),this.AddEdgeToSEL(h)):this.InsertScanbeam(h.Top.Y)),!(o===null||h===null)){if(_!==null&&s.ClipperBase.IsHorizontal(h)&&this.m_GhostJoins.length>0&&h.WindDelta!==0)for(var I=0,N=this.m_GhostJoins.length;I<N;I++){var z=this.m_GhostJoins[I];this.HorzSegmentsOverlap(z.OutPt1.Pt.X,z.OffPt.X,h.Bot.X,h.Top.X)&&this.AddJoin(z.OutPt1,_,z.OffPt)}if(o.OutIdx>=0&&o.PrevInAEL!==null&&o.PrevInAEL.Curr.X===o.Bot.X&&o.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(o.PrevInAEL.Curr,o.PrevInAEL.Top,o.Curr,o.Top,this.m_UseFullRange)&&o.WindDelta!==0&&o.PrevInAEL.WindDelta!==0){var q=this.AddOutPt(o.PrevInAEL,o.Bot);this.AddJoin(_,q,o.Top)}if(o.NextInAEL!==h){if(h.OutIdx>=0&&h.PrevInAEL.OutIdx>=0&&s.ClipperBase.SlopesEqual5(h.PrevInAEL.Curr,h.PrevInAEL.Top,h.Curr,h.Top,this.m_UseFullRange)&&h.WindDelta!==0&&h.PrevInAEL.WindDelta!==0){var q=this.AddOutPt(h.PrevInAEL,h.Bot);this.AddJoin(_,q,h.Top)}var $=o.NextInAEL;if($!==null)for(;$!==h;)this.IntersectEdges(h,$,o.Curr),$=$.NextInAEL}}}},s.Clipper.prototype.InsertEdgeIntoAEL=function(e,r){if(this.m_ActiveEdges===null)e.PrevInAEL=null,e.NextInAEL=null,this.m_ActiveEdges=e;else if(r===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,e))e.PrevInAEL=null,e.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=e,this.m_ActiveEdges=e;else{for(r===null&&(r=this.m_ActiveEdges);r.NextInAEL!==null&&!this.E2InsertsBeforeE1(r.NextInAEL,e);)r=r.NextInAEL;e.NextInAEL=r.NextInAEL,r.NextInAEL!==null&&(r.NextInAEL.PrevInAEL=e),e.PrevInAEL=r,r.NextInAEL=e}},s.Clipper.prototype.E2InsertsBeforeE1=function(e,r){return r.Curr.X===e.Curr.X?r.Top.Y>e.Top.Y?r.Top.X<s.Clipper.TopX(e,r.Top.Y):e.Top.X>s.Clipper.TopX(r,e.Top.Y):r.Curr.X<e.Curr.X},s.Clipper.prototype.IsEvenOddFillType=function(e){return e.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType===s.PolyFillType.pftEvenOdd:this.m_ClipFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsEvenOddAltFillType=function(e){return e.PolyTyp===s.PolyType.ptSubject?this.m_ClipFillType===s.PolyFillType.pftEvenOdd:this.m_SubjFillType===s.PolyFillType.pftEvenOdd},s.Clipper.prototype.IsContributing=function(e){var r,o;switch(e.PolyTyp===s.PolyType.ptSubject?(r=this.m_SubjFillType,o=this.m_ClipFillType):(r=this.m_ClipFillType,o=this.m_SubjFillType),r){case s.PolyFillType.pftEvenOdd:if(e.WindDelta===0&&e.WindCnt!==1)return!1;break;case s.PolyFillType.pftNonZero:if(Math.abs(e.WindCnt)!==1)return!1;break;case s.PolyFillType.pftPositive:if(e.WindCnt!==1)return!1;break;default:if(e.WindCnt!==-1)return!1;break}switch(this.m_ClipType){case s.ClipType.ctIntersection:switch(o){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return e.WindCnt2!==0;case s.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case s.ClipType.ctUnion:switch(o){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return e.WindCnt2===0;case s.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}case s.ClipType.ctDifference:if(e.PolyTyp===s.PolyType.ptSubject)switch(o){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return e.WindCnt2===0;case s.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else switch(o){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return e.WindCnt2!==0;case s.PolyFillType.pftPositive:return e.WindCnt2>0;default:return e.WindCnt2<0}case s.ClipType.ctXor:if(e.WindDelta===0)switch(o){case s.PolyFillType.pftEvenOdd:case s.PolyFillType.pftNonZero:return e.WindCnt2===0;case s.PolyFillType.pftPositive:return e.WindCnt2<=0;default:return e.WindCnt2>=0}else return!0}return!0},s.Clipper.prototype.SetWindingCount=function(e){for(var r=e.PrevInAEL;r!==null&&(r.PolyTyp!==e.PolyTyp||r.WindDelta===0);)r=r.PrevInAEL;if(r===null){var o=e.PolyTyp===s.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;e.WindDelta===0?e.WindCnt=o===s.PolyFillType.pftNegative?-1:1:e.WindCnt=e.WindDelta,e.WindCnt2=0,r=this.m_ActiveEdges}else if(e.WindDelta===0&&this.m_ClipType!==s.ClipType.ctUnion)e.WindCnt=1,e.WindCnt2=r.WindCnt2,r=r.NextInAEL;else if(this.IsEvenOddFillType(e)){if(e.WindDelta===0){for(var h=!0,_=r.PrevInAEL;_!==null;)_.PolyTyp===r.PolyTyp&&_.WindDelta!==0&&(h=!h),_=_.PrevInAEL;e.WindCnt=h?0:1}else e.WindCnt=e.WindDelta;e.WindCnt2=r.WindCnt2,r=r.NextInAEL}else r.WindCnt*r.WindDelta<0?Math.abs(r.WindCnt)>1?r.WindDelta*e.WindDelta<0?e.WindCnt=r.WindCnt:e.WindCnt=r.WindCnt+e.WindDelta:e.WindCnt=e.WindDelta===0?1:e.WindDelta:e.WindDelta===0?e.WindCnt=r.WindCnt<0?r.WindCnt-1:r.WindCnt+1:r.WindDelta*e.WindDelta<0?e.WindCnt=r.WindCnt:e.WindCnt=r.WindCnt+e.WindDelta,e.WindCnt2=r.WindCnt2,r=r.NextInAEL;if(this.IsEvenOddAltFillType(e))for(;r!==e;)r.WindDelta!==0&&(e.WindCnt2=e.WindCnt2===0?1:0),r=r.NextInAEL;else for(;r!==e;)e.WindCnt2+=r.WindDelta,r=r.NextInAEL},s.Clipper.prototype.AddEdgeToSEL=function(e){this.m_SortedEdges===null?(this.m_SortedEdges=e,e.PrevInSEL=null,e.NextInSEL=null):(e.NextInSEL=this.m_SortedEdges,e.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=e,this.m_SortedEdges=e)},s.Clipper.prototype.PopEdgeFromSEL=function(e){if(e.v=this.m_SortedEdges,e.v===null)return!1;var r=e.v;return this.m_SortedEdges=e.v.NextInSEL,this.m_SortedEdges!==null&&(this.m_SortedEdges.PrevInSEL=null),r.NextInSEL=null,r.PrevInSEL=null,!0},s.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;e!==null;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e=e.NextInAEL},s.Clipper.prototype.SwapPositionsInSEL=function(e,r){if(!(e.NextInSEL===null&&e.PrevInSEL===null)&&!(r.NextInSEL===null&&r.PrevInSEL===null)){if(e.NextInSEL===r){var o=r.NextInSEL;o!==null&&(o.PrevInSEL=e);var h=e.PrevInSEL;h!==null&&(h.NextInSEL=r),r.PrevInSEL=h,r.NextInSEL=e,e.PrevInSEL=r,e.NextInSEL=o}else if(r.NextInSEL===e){var o=e.NextInSEL;o!==null&&(o.PrevInSEL=r);var h=r.PrevInSEL;h!==null&&(h.NextInSEL=e),e.PrevInSEL=h,e.NextInSEL=r,r.PrevInSEL=e,r.NextInSEL=o}else{var o=e.NextInSEL,h=e.PrevInSEL;e.NextInSEL=r.NextInSEL,e.NextInSEL!==null&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=r.PrevInSEL,e.PrevInSEL!==null&&(e.PrevInSEL.NextInSEL=e),r.NextInSEL=o,r.NextInSEL!==null&&(r.NextInSEL.PrevInSEL=r),r.PrevInSEL=h,r.PrevInSEL!==null&&(r.PrevInSEL.NextInSEL=r)}e.PrevInSEL===null?this.m_SortedEdges=e:r.PrevInSEL===null&&(this.m_SortedEdges=r)}},s.Clipper.prototype.AddLocalMaxPoly=function(e,r,o){this.AddOutPt(e,o),r.WindDelta===0&&this.AddOutPt(r,o),e.OutIdx===r.OutIdx?(e.OutIdx=-1,r.OutIdx=-1):e.OutIdx<r.OutIdx?this.AppendPolygon(e,r):this.AppendPolygon(r,e)},s.Clipper.prototype.AddLocalMinPoly=function(e,r,o){var h,_,I;if(s.ClipperBase.IsHorizontal(r)||e.Dx>r.Dx?(h=this.AddOutPt(e,o),r.OutIdx=e.OutIdx,e.Side=s.EdgeSide.esLeft,r.Side=s.EdgeSide.esRight,_=e,_.PrevInAEL===r?I=r.PrevInAEL:I=_.PrevInAEL):(h=this.AddOutPt(r,o),e.OutIdx=r.OutIdx,e.Side=s.EdgeSide.esRight,r.Side=s.EdgeSide.esLeft,_=r,_.PrevInAEL===e?I=e.PrevInAEL:I=_.PrevInAEL),I!==null&&I.OutIdx>=0&&I.Top.Y<o.Y&&_.Top.Y<o.Y){var N=s.Clipper.TopX(I,o.Y),z=s.Clipper.TopX(_,o.Y);if(N===z&&_.WindDelta!==0&&I.WindDelta!==0&&s.ClipperBase.SlopesEqual5(new s.IntPoint2(N,o.Y),I.Top,new s.IntPoint2(z,o.Y),_.Top,this.m_UseFullRange)){var q=this.AddOutPt(I,o);this.AddJoin(h,q,_.Top)}}return h},s.Clipper.prototype.AddOutPt=function(e,r){if(e.OutIdx<0){var o=this.CreateOutRec();o.IsOpen=e.WindDelta===0;var h=new s.OutPt;return o.Pts=h,h.Idx=o.Idx,h.Pt.X=r.X,h.Pt.Y=r.Y,s.use_xyz&&(h.Pt.Z=r.Z),h.Next=h,h.Prev=h,o.IsOpen||this.SetHoleState(e,o),e.OutIdx=o.Idx,h}else{var o=this.m_PolyOuts[e.OutIdx],_=o.Pts,I=e.Side===s.EdgeSide.esLeft;if(I&&s.IntPoint.op_Equality(r,_.Pt))return _;if(!I&&s.IntPoint.op_Equality(r,_.Prev.Pt))return _.Prev;var h=new s.OutPt;return h.Idx=o.Idx,h.Pt.X=r.X,h.Pt.Y=r.Y,s.use_xyz&&(h.Pt.Z=r.Z),h.Next=_,h.Prev=_.Prev,h.Prev.Next=h,_.Prev=h,I&&(o.Pts=h),h}},s.Clipper.prototype.GetLastOutPt=function(e){var r=this.m_PolyOuts[e.OutIdx];return e.Side===s.EdgeSide.esLeft?r.Pts:r.Pts.Prev},s.Clipper.prototype.SwapPoints=function(e,r){var o=new s.IntPoint1(e.Value);e.Value.X=r.Value.X,e.Value.Y=r.Value.Y,s.use_xyz&&(e.Value.Z=r.Value.Z),r.Value.X=o.X,r.Value.Y=o.Y,s.use_xyz&&(r.Value.Z=o.Z)},s.Clipper.prototype.HorzSegmentsOverlap=function(e,r,o,h){var _;return e>r&&(_=e,e=r,r=_),o>h&&(_=o,o=h,h=_),e<h&&o<r},s.Clipper.prototype.SetHoleState=function(e,r){for(var o=e.PrevInAEL,h=null;o!==null;)o.OutIdx>=0&&o.WindDelta!==0&&(h===null?h=o:h.OutIdx===o.OutIdx&&(h=null)),o=o.PrevInAEL;h===null?(r.FirstLeft=null,r.IsHole=!1):(r.FirstLeft=this.m_PolyOuts[h.OutIdx],r.IsHole=!r.FirstLeft.IsHole)},s.Clipper.prototype.GetDx=function(e,r){return e.Y===r.Y?s.ClipperBase.horizontal:(r.X-e.X)/(r.Y-e.Y)},s.Clipper.prototype.FirstIsBottomPt=function(e,r){for(var o=e.Prev;s.IntPoint.op_Equality(o.Pt,e.Pt)&&o!==e;)o=o.Prev;var h=Math.abs(this.GetDx(e.Pt,o.Pt));for(o=e.Next;s.IntPoint.op_Equality(o.Pt,e.Pt)&&o!==e;)o=o.Next;var _=Math.abs(this.GetDx(e.Pt,o.Pt));for(o=r.Prev;s.IntPoint.op_Equality(o.Pt,r.Pt)&&o!==r;)o=o.Prev;var I=Math.abs(this.GetDx(r.Pt,o.Pt));for(o=r.Next;s.IntPoint.op_Equality(o.Pt,r.Pt)&&o!==r;)o=o.Next;var N=Math.abs(this.GetDx(r.Pt,o.Pt));return Math.max(h,_)===Math.max(I,N)&&Math.min(h,_)===Math.min(I,N)?this.Area(e)>0:h>=I&&h>=N||_>=I&&_>=N},s.Clipper.prototype.GetBottomPt=function(e){for(var r=null,o=e.Next;o!==e;)o.Pt.Y>e.Pt.Y?(e=o,r=null):o.Pt.Y===e.Pt.Y&&o.Pt.X<=e.Pt.X&&(o.Pt.X<e.Pt.X?(r=null,e=o):o.Next!==e&&o.Prev!==e&&(r=o)),o=o.Next;if(r!==null)for(;r!==o;)for(this.FirstIsBottomPt(o,r)||(e=r),r=r.Next;s.IntPoint.op_Inequality(r.Pt,e.Pt);)r=r.Next;return e},s.Clipper.prototype.GetLowermostRec=function(e,r){e.BottomPt===null&&(e.BottomPt=this.GetBottomPt(e.Pts)),r.BottomPt===null&&(r.BottomPt=this.GetBottomPt(r.Pts));var o=e.BottomPt,h=r.BottomPt;return o.Pt.Y>h.Pt.Y?e:o.Pt.Y<h.Pt.Y?r:o.Pt.X<h.Pt.X?e:o.Pt.X>h.Pt.X||o.Next===o?r:h.Next===h||this.FirstIsBottomPt(o,h)?e:r},s.Clipper.prototype.OutRec1RightOfOutRec2=function(e,r){do if(e=e.FirstLeft,e===r)return!0;while(e!==null);return!1},s.Clipper.prototype.GetOutRec=function(e){for(var r=this.m_PolyOuts[e];r!==this.m_PolyOuts[r.Idx];)r=this.m_PolyOuts[r.Idx];return r},s.Clipper.prototype.AppendPolygon=function(e,r){var o=this.m_PolyOuts[e.OutIdx],h=this.m_PolyOuts[r.OutIdx],_;this.OutRec1RightOfOutRec2(o,h)?_=h:this.OutRec1RightOfOutRec2(h,o)?_=o:_=this.GetLowermostRec(o,h);var I=o.Pts,N=I.Prev,z=h.Pts,q=z.Prev;e.Side===s.EdgeSide.esLeft?r.Side===s.EdgeSide.esLeft?(this.ReversePolyPtLinks(z),z.Next=I,I.Prev=z,N.Next=q,q.Prev=N,o.Pts=q):(q.Next=I,I.Prev=q,z.Prev=N,N.Next=z,o.Pts=z):r.Side===s.EdgeSide.esRight?(this.ReversePolyPtLinks(z),N.Next=q,q.Prev=N,z.Next=I,I.Prev=z):(N.Next=z,z.Prev=N,I.Prev=q,q.Next=I),o.BottomPt=null,_===h&&(h.FirstLeft!==o&&(o.FirstLeft=h.FirstLeft),o.IsHole=h.IsHole),h.Pts=null,h.BottomPt=null,h.FirstLeft=o;var $=e.OutIdx,at=r.OutIdx;e.OutIdx=-1,r.OutIdx=-1;for(var it=this.m_ActiveEdges;it!==null;){if(it.OutIdx===at){it.OutIdx=$,it.Side=e.Side;break}it=it.NextInAEL}h.Idx=o.Idx},s.Clipper.prototype.ReversePolyPtLinks=function(e){if(e!==null){var r,o;r=e;do o=r.Next,r.Next=r.Prev,r.Prev=o,r=o;while(r!==e)}},s.Clipper.SwapSides=function(e,r){var o=e.Side;e.Side=r.Side,r.Side=o},s.Clipper.SwapPolyIndexes=function(e,r){var o=e.OutIdx;e.OutIdx=r.OutIdx,r.OutIdx=o},s.Clipper.prototype.IntersectEdges=function(e,r,o){var h=e.OutIdx>=0,_=r.OutIdx>=0;if(s.use_xyz&&this.SetZ(o,e,r),s.use_lines&&(e.WindDelta===0||r.WindDelta===0)){if(e.WindDelta===0&&r.WindDelta===0)return;e.PolyTyp===r.PolyTyp&&e.WindDelta!==r.WindDelta&&this.m_ClipType===s.ClipType.ctUnion?e.WindDelta===0?_&&(this.AddOutPt(e,o),h&&(e.OutIdx=-1)):h&&(this.AddOutPt(r,o),_&&(r.OutIdx=-1)):e.PolyTyp!==r.PolyTyp&&(e.WindDelta===0&&Math.abs(r.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||r.WindCnt2===0)?(this.AddOutPt(e,o),h&&(e.OutIdx=-1)):r.WindDelta===0&&Math.abs(e.WindCnt)===1&&(this.m_ClipType!==s.ClipType.ctUnion||e.WindCnt2===0)&&(this.AddOutPt(r,o),_&&(r.OutIdx=-1)));return}if(e.PolyTyp===r.PolyTyp)if(this.IsEvenOddFillType(e)){var I=e.WindCnt;e.WindCnt=r.WindCnt,r.WindCnt=I}else e.WindCnt+r.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt+=r.WindDelta,r.WindCnt-e.WindDelta===0?r.WindCnt=-r.WindCnt:r.WindCnt-=e.WindDelta;else this.IsEvenOddFillType(r)?e.WindCnt2=e.WindCnt2===0?1:0:e.WindCnt2+=r.WindDelta,this.IsEvenOddFillType(e)?r.WindCnt2=r.WindCnt2===0?1:0:r.WindCnt2-=e.WindDelta;var N,z,q,$;e.PolyTyp===s.PolyType.ptSubject?(N=this.m_SubjFillType,q=this.m_ClipFillType):(N=this.m_ClipFillType,q=this.m_SubjFillType),r.PolyTyp===s.PolyType.ptSubject?(z=this.m_SubjFillType,$=this.m_ClipFillType):(z=this.m_ClipFillType,$=this.m_SubjFillType);var at,it;switch(N){case s.PolyFillType.pftPositive:at=e.WindCnt;break;case s.PolyFillType.pftNegative:at=-e.WindCnt;break;default:at=Math.abs(e.WindCnt);break}switch(z){case s.PolyFillType.pftPositive:it=r.WindCnt;break;case s.PolyFillType.pftNegative:it=-r.WindCnt;break;default:it=Math.abs(r.WindCnt);break}if(h&&_)at!==0&&at!==1||it!==0&&it!==1||e.PolyTyp!==r.PolyTyp&&this.m_ClipType!==s.ClipType.ctXor?this.AddLocalMaxPoly(e,r,o):(this.AddOutPt(e,o),this.AddOutPt(r,o),s.Clipper.SwapSides(e,r),s.Clipper.SwapPolyIndexes(e,r));else if(h)(it===0||it===1)&&(this.AddOutPt(e,o),s.Clipper.SwapSides(e,r),s.Clipper.SwapPolyIndexes(e,r));else if(_)(at===0||at===1)&&(this.AddOutPt(r,o),s.Clipper.SwapSides(e,r),s.Clipper.SwapPolyIndexes(e,r));else if((at===0||at===1)&&(it===0||it===1)){var lt,mt;switch(q){case s.PolyFillType.pftPositive:lt=e.WindCnt2;break;case s.PolyFillType.pftNegative:lt=-e.WindCnt2;break;default:lt=Math.abs(e.WindCnt2);break}switch($){case s.PolyFillType.pftPositive:mt=r.WindCnt2;break;case s.PolyFillType.pftNegative:mt=-r.WindCnt2;break;default:mt=Math.abs(r.WindCnt2);break}if(e.PolyTyp!==r.PolyTyp)this.AddLocalMinPoly(e,r,o);else if(at===1&&it===1)switch(this.m_ClipType){case s.ClipType.ctIntersection:lt>0&&mt>0&&this.AddLocalMinPoly(e,r,o);break;case s.ClipType.ctUnion:lt<=0&&mt<=0&&this.AddLocalMinPoly(e,r,o);break;case s.ClipType.ctDifference:(e.PolyTyp===s.PolyType.ptClip&&lt>0&&mt>0||e.PolyTyp===s.PolyType.ptSubject&&lt<=0&&mt<=0)&&this.AddLocalMinPoly(e,r,o);break;case s.ClipType.ctXor:this.AddLocalMinPoly(e,r,o);break}else s.Clipper.SwapSides(e,r)}},s.Clipper.prototype.DeleteFromSEL=function(e){var r=e.PrevInSEL,o=e.NextInSEL;r===null&&o===null&&e!==this.m_SortedEdges||(r!==null?r.NextInSEL=o:this.m_SortedEdges=o,o!==null&&(o.PrevInSEL=r),e.NextInSEL=null,e.PrevInSEL=null)},s.Clipper.prototype.ProcessHorizontals=function(){for(var e={};this.PopEdgeFromSEL(e);)this.ProcessHorizontal(e.v)},s.Clipper.prototype.GetHorzDirection=function(e,r){e.Bot.X<e.Top.X?(r.Left=e.Bot.X,r.Right=e.Top.X,r.Dir=s.Direction.dLeftToRight):(r.Left=e.Top.X,r.Right=e.Bot.X,r.Dir=s.Direction.dRightToLeft)},s.Clipper.prototype.ProcessHorizontal=function(e){var r={Dir:null,Left:null,Right:null};this.GetHorzDirection(e,r);for(var o=r.Dir,h=r.Left,_=r.Right,I=e.WindDelta===0,N=e,z=null;N.NextInLML!==null&&s.ClipperBase.IsHorizontal(N.NextInLML);)N=N.NextInLML;N.NextInLML===null&&(z=this.GetMaximaPair(N));var q=this.m_Maxima;if(q!==null)if(o===s.Direction.dLeftToRight){for(;q!==null&&q.X<=e.Bot.X;)q=q.Next;q!==null&&q.X>=N.Top.X&&(q=null)}else{for(;q.Next!==null&&q.Next.X<e.Bot.X;)q=q.Next;q.X<=N.Top.X&&(q=null)}for(var $=null;;){for(var at=e===N,it=this.GetNextInAEL(e,o);it!==null;){if(q!==null)if(o===s.Direction.dLeftToRight)for(;q!==null&&q.X<it.Curr.X;)e.OutIdx>=0&&!I&&this.AddOutPt(e,new s.IntPoint2(q.X,e.Bot.Y)),q=q.Next;else for(;q!==null&&q.X>it.Curr.X;)e.OutIdx>=0&&!I&&this.AddOutPt(e,new s.IntPoint2(q.X,e.Bot.Y)),q=q.Prev;if(o===s.Direction.dLeftToRight&&it.Curr.X>_||o===s.Direction.dRightToLeft&&it.Curr.X<h||it.Curr.X===e.Top.X&&e.NextInLML!==null&&it.Dx<e.NextInLML.Dx)break;if(e.OutIdx>=0&&!I){s.use_xyz&&(o===s.Direction.dLeftToRight?this.SetZ(it.Curr,e,it):this.SetZ(it.Curr,it,e)),$=this.AddOutPt(e,it.Curr);for(var lt=this.m_SortedEdges;lt!==null;){if(lt.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,lt.Bot.X,lt.Top.X)){var mt=this.GetLastOutPt(lt);this.AddJoin(mt,$,lt.Top)}lt=lt.NextInSEL}this.AddGhostJoin($,e.Bot)}if(it===z&&at){e.OutIdx>=0&&this.AddLocalMaxPoly(e,z,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(z);return}if(o===s.Direction.dLeftToRight){var Tt=new s.IntPoint2(it.Curr.X,e.Curr.Y);this.IntersectEdges(e,it,Tt)}else{var Tt=new s.IntPoint2(it.Curr.X,e.Curr.Y);this.IntersectEdges(it,e,Tt)}var Ot=this.GetNextInAEL(it,o);this.SwapPositionsInAEL(e,it),it=Ot}if(e.NextInLML===null||!s.ClipperBase.IsHorizontal(e.NextInLML))break;e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),r={Dir:o,Left:h,Right:_},this.GetHorzDirection(e,r),o=r.Dir,h=r.Left,_=r.Right}if(e.OutIdx>=0&&$===null){$=this.GetLastOutPt(e);for(var lt=this.m_SortedEdges;lt!==null;){if(lt.OutIdx>=0&&this.HorzSegmentsOverlap(e.Bot.X,e.Top.X,lt.Bot.X,lt.Top.X)){var mt=this.GetLastOutPt(lt);this.AddJoin(mt,$,lt.Top)}lt=lt.NextInSEL}this.AddGhostJoin($,e.Top)}if(e.NextInLML!==null)if(e.OutIdx>=0){if($=this.AddOutPt(e,e.Top),e=this.UpdateEdgeIntoAEL(e),e.WindDelta===0)return;var Yt=e.PrevInAEL,Ot=e.NextInAEL;if(Yt!==null&&Yt.Curr.X===e.Bot.X&&Yt.Curr.Y===e.Bot.Y&&Yt.WindDelta===0&&Yt.OutIdx>=0&&Yt.Curr.Y>Yt.Top.Y&&s.ClipperBase.SlopesEqual3(e,Yt,this.m_UseFullRange)){var mt=this.AddOutPt(Yt,e.Bot);this.AddJoin($,mt,e.Top)}else if(Ot!==null&&Ot.Curr.X===e.Bot.X&&Ot.Curr.Y===e.Bot.Y&&Ot.WindDelta!==0&&Ot.OutIdx>=0&&Ot.Curr.Y>Ot.Top.Y&&s.ClipperBase.SlopesEqual3(e,Ot,this.m_UseFullRange)){var mt=this.AddOutPt(Ot,e.Bot);this.AddJoin($,mt,e.Top)}}else e=this.UpdateEdgeIntoAEL(e);else e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e)},s.Clipper.prototype.GetNextInAEL=function(e,r){return r===s.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL},s.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!==e&&e.Next.NextInLML!==e},s.Clipper.prototype.IsMaxima=function(e,r){return e!==null&&e.Top.Y===r&&e.NextInLML===null},s.Clipper.prototype.IsIntermediate=function(e,r){return e.Top.Y===r&&e.NextInLML!==null},s.Clipper.prototype.GetMaximaPair=function(e){return s.IntPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null?e.Next:s.IntPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null?e.Prev:null},s.Clipper.prototype.GetMaximaPairEx=function(e){var r=this.GetMaximaPair(e);return r===null||r.OutIdx===s.ClipperBase.Skip||r.NextInAEL===r.PrevInAEL&&!s.ClipperBase.IsHorizontal(r)?null:r},s.Clipper.prototype.ProcessIntersections=function(e){if(this.m_ActiveEdges===null)return!0;try{if(this.BuildIntersectList(e),this.m_IntersectList.length===0)return!0;if(this.m_IntersectList.length===1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return!1}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,s.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},s.Clipper.prototype.BuildIntersectList=function(e){if(this.m_ActiveEdges!==null){var r=this.m_ActiveEdges;for(this.m_SortedEdges=r;r!==null;)r.PrevInSEL=r.PrevInAEL,r.NextInSEL=r.NextInAEL,r.Curr.X=s.Clipper.TopX(r,e),r=r.NextInAEL;for(var o=!0;o&&this.m_SortedEdges!==null;){for(o=!1,r=this.m_SortedEdges;r.NextInSEL!==null;){var h=r.NextInSEL,_=new s.IntPoint0;if(r.Curr.X>h.Curr.X){this.IntersectPoint(r,h,_),_.Y<e&&(_=new s.IntPoint2(s.Clipper.TopX(r,e),e));var I=new s.IntersectNode;I.Edge1=r,I.Edge2=h,I.Pt.X=_.X,I.Pt.Y=_.Y,s.use_xyz&&(I.Pt.Z=_.Z),this.m_IntersectList.push(I),this.SwapPositionsInSEL(r,h),o=!0}else r=h}if(r.PrevInSEL!==null)r.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},s.Clipper.prototype.EdgesAdjacent=function(e){return e.Edge1.NextInSEL===e.Edge2||e.Edge1.PrevInSEL===e.Edge2},s.Clipper.IntersectNodeSort=function(e,r){return r.Pt.Y-e.Pt.Y},s.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var e=this.m_IntersectList.length,r=0;r<e;r++){if(!this.EdgesAdjacent(this.m_IntersectList[r])){for(var o=r+1;o<e&&!this.EdgesAdjacent(this.m_IntersectList[o]);)o++;if(o===e)return!1;var h=this.m_IntersectList[r];this.m_IntersectList[r]=this.m_IntersectList[o],this.m_IntersectList[o]=h}this.SwapPositionsInSEL(this.m_IntersectList[r].Edge1,this.m_IntersectList[r].Edge2)}return!0},s.Clipper.prototype.ProcessIntersectList=function(){for(var e=0,r=this.m_IntersectList.length;e<r;e++){var o=this.m_IntersectList[e];this.IntersectEdges(o.Edge1,o.Edge2,o.Pt),this.SwapPositionsInAEL(o.Edge1,o.Edge2)}this.m_IntersectList.length=0};var ce=function(e){return e<0?Math.ceil(e-.5):Math.round(e)},_e=function(e){return e<0?Math.ceil(e-.5):Math.floor(e+.5)},Be=function(e){return e<0?-Math.round(Math.abs(e)):Math.round(e)},xe=function(e){return e<0?(e-=.5,e<-2147483648?Math.ceil(e):e|0):(e+=.5,e>2147483647?Math.floor(e):e|0)};T.msie?s.Clipper.Round=ce:T.chromium?s.Clipper.Round=Be:T.safari?s.Clipper.Round=xe:s.Clipper.Round=_e,s.Clipper.TopX=function(e,r){return r===e.Top.Y?e.Top.X:e.Bot.X+s.Clipper.Round(e.Dx*(r-e.Bot.Y))},s.Clipper.prototype.IntersectPoint=function(e,r,o){o.X=0,o.Y=0;var h,_;if(e.Dx===r.Dx){o.Y=e.Curr.Y,o.X=s.Clipper.TopX(e,o.Y);return}if(e.Delta.X===0)o.X=e.Bot.X,s.ClipperBase.IsHorizontal(r)?o.Y=r.Bot.Y:(_=r.Bot.Y-r.Bot.X/r.Dx,o.Y=s.Clipper.Round(o.X/r.Dx+_));else if(r.Delta.X===0)o.X=r.Bot.X,s.ClipperBase.IsHorizontal(e)?o.Y=e.Bot.Y:(h=e.Bot.Y-e.Bot.X/e.Dx,o.Y=s.Clipper.Round(o.X/e.Dx+h));else{h=e.Bot.X-e.Bot.Y*e.Dx,_=r.Bot.X-r.Bot.Y*r.Dx;var I=(_-h)/(e.Dx-r.Dx);o.Y=s.Clipper.Round(I),Math.abs(e.Dx)<Math.abs(r.Dx)?o.X=s.Clipper.Round(e.Dx*I+h):o.X=s.Clipper.Round(r.Dx*I+_)}if(o.Y<e.Top.Y||o.Y<r.Top.Y){if(e.Top.Y>r.Top.Y)return o.Y=e.Top.Y,o.X=s.Clipper.TopX(r,e.Top.Y),o.X<e.Top.X;o.Y=r.Top.Y,Math.abs(e.Dx)<Math.abs(r.Dx)?o.X=s.Clipper.TopX(e,o.Y):o.X=s.Clipper.TopX(r,o.Y)}o.Y>e.Curr.Y&&(o.Y=e.Curr.Y,Math.abs(e.Dx)>Math.abs(r.Dx)?o.X=s.Clipper.TopX(r,o.Y):o.X=s.Clipper.TopX(e,o.Y))},s.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(e){for(var r=this.m_ActiveEdges;r!==null;){var o=this.IsMaxima(r,e);if(o){var h=this.GetMaximaPairEx(r);o=h===null||!s.ClipperBase.IsHorizontal(h)}if(o){this.StrictlySimple&&this.InsertMaxima(r.Top.X);var _=r.PrevInAEL;this.DoMaxima(r),_===null?r=this.m_ActiveEdges:r=_.NextInAEL}else{if(this.IsIntermediate(r,e)&&s.ClipperBase.IsHorizontal(r.NextInLML)?(r=this.UpdateEdgeIntoAEL(r),r.OutIdx>=0&&this.AddOutPt(r,r.Bot),this.AddEdgeToSEL(r)):(r.Curr.X=s.Clipper.TopX(r,e),r.Curr.Y=e),s.use_xyz&&(r.Top.Y===e?r.Curr.Z=r.Top.Z:r.Bot.Y===e?r.Curr.Z=r.Bot.Z:r.Curr.Z=0),this.StrictlySimple){var _=r.PrevInAEL;if(r.OutIdx>=0&&r.WindDelta!==0&&_!==null&&_.OutIdx>=0&&_.Curr.X===r.Curr.X&&_.WindDelta!==0){var I=new s.IntPoint1(r.Curr);s.use_xyz&&this.SetZ(I,_,r);var N=this.AddOutPt(_,I),z=this.AddOutPt(r,I);this.AddJoin(N,z,I)}}r=r.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,r=this.m_ActiveEdges;r!==null;){if(this.IsIntermediate(r,e)){var N=null;r.OutIdx>=0&&(N=this.AddOutPt(r,r.Top)),r=this.UpdateEdgeIntoAEL(r);var _=r.PrevInAEL,q=r.NextInAEL;if(_!==null&&_.Curr.X===r.Bot.X&&_.Curr.Y===r.Bot.Y&&N!==null&&_.OutIdx>=0&&_.Curr.Y===_.Top.Y&&s.ClipperBase.SlopesEqual5(r.Curr,r.Top,_.Curr,_.Top,this.m_UseFullRange)&&r.WindDelta!==0&&_.WindDelta!==0){var z=this.AddOutPt(ePrev2,r.Bot);this.AddJoin(N,z,r.Top)}else if(q!==null&&q.Curr.X===r.Bot.X&&q.Curr.Y===r.Bot.Y&&N!==null&&q.OutIdx>=0&&q.Curr.Y===q.Top.Y&&s.ClipperBase.SlopesEqual5(r.Curr,r.Top,q.Curr,q.Top,this.m_UseFullRange)&&r.WindDelta!==0&&q.WindDelta!==0){var z=this.AddOutPt(q,r.Bot);this.AddJoin(N,z,r.Top)}}r=r.NextInAEL}},s.Clipper.prototype.DoMaxima=function(e){var r=this.GetMaximaPairEx(e);if(r===null){e.OutIdx>=0&&this.AddOutPt(e,e.Top),this.DeleteFromAEL(e);return}for(var o=e.NextInAEL;o!==null&&o!==r;)this.IntersectEdges(e,o,e.Top),this.SwapPositionsInAEL(e,o),o=e.NextInAEL;e.OutIdx===-1&&r.OutIdx===-1?(this.DeleteFromAEL(e),this.DeleteFromAEL(r)):e.OutIdx>=0&&r.OutIdx>=0?(e.OutIdx>=0&&this.AddLocalMaxPoly(e,r,e.Top),this.DeleteFromAEL(e),this.DeleteFromAEL(r)):s.use_lines&&e.WindDelta===0?(e.OutIdx>=0&&(this.AddOutPt(e,e.Top),e.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(e),r.OutIdx>=0&&(this.AddOutPt(r,e.Top),r.OutIdx=s.ClipperBase.Unassigned),this.DeleteFromAEL(r)):s.Error("DoMaxima error")},s.Clipper.ReversePaths=function(e){for(var r=0,o=e.length;r<o;r++)e[r].reverse()},s.Clipper.Orientation=function(e){return s.Clipper.Area(e)>=0},s.Clipper.prototype.PointCount=function(e){if(e===null)return 0;var r=0,o=e;do r++,o=o.Next;while(o!==e);return r},s.Clipper.prototype.BuildResult=function(e){s.Clear(e);for(var r=0,o=this.m_PolyOuts.length;r<o;r++){var h=this.m_PolyOuts[r];if(h.Pts!==null){var _=h.Pts.Prev,I=this.PointCount(_);if(!(I<2)){for(var N=new Array(I),z=0;z<I;z++)N[z]=_.Pt,_=_.Prev;e.push(N)}}}},s.Clipper.prototype.BuildResult2=function(e){e.Clear();for(var r=0,o=this.m_PolyOuts.length;r<o;r++){var h=this.m_PolyOuts[r],_=this.PointCount(h.Pts);if(!(h.IsOpen&&_<2||!h.IsOpen&&_<3)){this.FixHoleLinkage(h);var I=new s.PolyNode;e.m_AllPolys.push(I),h.PolyNode=I,I.m_polygon.length=_;for(var N=h.Pts.Prev,z=0;z<_;z++)I.m_polygon[z]=N.Pt,N=N.Prev}}for(var r=0,o=this.m_PolyOuts.length;r<o;r++){var h=this.m_PolyOuts[r];h.PolyNode!==null&&(h.IsOpen?(h.PolyNode.IsOpen=!0,e.AddChild(h.PolyNode)):h.FirstLeft!==null&&h.FirstLeft.PolyNode!==null?h.FirstLeft.PolyNode.AddChild(h.PolyNode):e.AddChild(h.PolyNode))}},s.Clipper.prototype.FixupOutPolyline=function(e){for(var r=e.Pts,o=r.Prev;r!==o;)if(r=r.Next,s.IntPoint.op_Equality(r.Pt,r.Prev.Pt)){r===o&&(o=r.Prev);var h=r.Prev;h.Next=r.Next,r.Next.Prev=h,r=h}r===r.Prev&&(e.Pts=null)},s.Clipper.prototype.FixupOutPolygon=function(e){var r=null;e.BottomPt=null;for(var o=e.Pts,h=this.PreserveCollinear||this.StrictlySimple;;){if(o.Prev===o||o.Prev===o.Next){e.Pts=null;return}if(s.IntPoint.op_Equality(o.Pt,o.Next.Pt)||s.IntPoint.op_Equality(o.Pt,o.Prev.Pt)||s.ClipperBase.SlopesEqual4(o.Prev.Pt,o.Pt,o.Next.Pt,this.m_UseFullRange)&&(!h||!this.Pt2IsBetweenPt1AndPt3(o.Prev.Pt,o.Pt,o.Next.Pt)))r=null,o.Prev.Next=o.Next,o.Next.Prev=o.Prev,o=o.Prev;else{if(o===r)break;r===null&&(r=o),o=o.Next}}e.Pts=o},s.Clipper.prototype.DupOutPt=function(e,r){var o=new s.OutPt;return o.Pt.X=e.Pt.X,o.Pt.Y=e.Pt.Y,s.use_xyz&&(o.Pt.Z=e.Pt.Z),o.Idx=e.Idx,r?(o.Next=e.Next,o.Prev=e,e.Next.Prev=o,e.Next=o):(o.Prev=e.Prev,o.Next=e,e.Prev.Next=o,e.Prev=o),o},s.Clipper.prototype.GetOverlap=function(e,r,o,h,_){return e<r?o<h?(_.Left=Math.max(e,o),_.Right=Math.min(r,h)):(_.Left=Math.max(e,h),_.Right=Math.min(r,o)):o<h?(_.Left=Math.max(r,o),_.Right=Math.min(e,h)):(_.Left=Math.max(r,h),_.Right=Math.min(e,o)),_.Left<_.Right},s.Clipper.prototype.JoinHorz=function(e,r,o,h,_,I){var N=e.Pt.X>r.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight,z=o.Pt.X>h.Pt.X?s.Direction.dRightToLeft:s.Direction.dLeftToRight;if(N===z)return!1;if(N===s.Direction.dLeftToRight){for(;e.Next.Pt.X<=_.X&&e.Next.Pt.X>=e.Pt.X&&e.Next.Pt.Y===_.Y;)e=e.Next;I&&e.Pt.X!==_.X&&(e=e.Next),r=this.DupOutPt(e,!I),s.IntPoint.op_Inequality(r.Pt,_)&&(e=r,e.Pt.X=_.X,e.Pt.Y=_.Y,s.use_xyz&&(e.Pt.Z=_.Z),r=this.DupOutPt(e,!I))}else{for(;e.Next.Pt.X>=_.X&&e.Next.Pt.X<=e.Pt.X&&e.Next.Pt.Y===_.Y;)e=e.Next;!I&&e.Pt.X!==_.X&&(e=e.Next),r=this.DupOutPt(e,I),s.IntPoint.op_Inequality(r.Pt,_)&&(e=r,e.Pt.X=_.X,e.Pt.Y=_.Y,s.use_xyz&&(e.Pt.Z=_.Z),r=this.DupOutPt(e,I))}if(z===s.Direction.dLeftToRight){for(;o.Next.Pt.X<=_.X&&o.Next.Pt.X>=o.Pt.X&&o.Next.Pt.Y===_.Y;)o=o.Next;I&&o.Pt.X!==_.X&&(o=o.Next),h=this.DupOutPt(o,!I),s.IntPoint.op_Inequality(h.Pt,_)&&(o=h,o.Pt.X=_.X,o.Pt.Y=_.Y,s.use_xyz&&(o.Pt.Z=_.Z),h=this.DupOutPt(o,!I))}else{for(;o.Next.Pt.X>=_.X&&o.Next.Pt.X<=o.Pt.X&&o.Next.Pt.Y===_.Y;)o=o.Next;!I&&o.Pt.X!==_.X&&(o=o.Next),h=this.DupOutPt(o,I),s.IntPoint.op_Inequality(h.Pt,_)&&(o=h,o.Pt.X=_.X,o.Pt.Y=_.Y,s.use_xyz&&(o.Pt.Z=_.Z),h=this.DupOutPt(o,I))}return N===s.Direction.dLeftToRight===I?(e.Prev=o,o.Next=e,r.Next=h,h.Prev=r):(e.Next=o,o.Prev=e,r.Prev=h,h.Next=r),!0},s.Clipper.prototype.JoinPoints=function(e,r,o){var h=e.OutPt1,_=new s.OutPt,I=e.OutPt2,N=new s.OutPt,z=e.OutPt1.Pt.Y===e.OffPt.Y;if(z&&s.IntPoint.op_Equality(e.OffPt,e.OutPt1.Pt)&&s.IntPoint.op_Equality(e.OffPt,e.OutPt2.Pt)){if(r!==o)return!1;for(_=e.OutPt1.Next;_!==h&&s.IntPoint.op_Equality(_.Pt,e.OffPt);)_=_.Next;var q=_.Pt.Y>e.OffPt.Y;for(N=e.OutPt2.Next;N!==I&&s.IntPoint.op_Equality(N.Pt,e.OffPt);)N=N.Next;var $=N.Pt.Y>e.OffPt.Y;return q===$?!1:q?(_=this.DupOutPt(h,!1),N=this.DupOutPt(I,!0),h.Prev=I,I.Next=h,_.Next=N,N.Prev=_,e.OutPt1=h,e.OutPt2=_,!0):(_=this.DupOutPt(h,!0),N=this.DupOutPt(I,!1),h.Next=I,I.Prev=h,_.Prev=N,N.Next=_,e.OutPt1=h,e.OutPt2=_,!0)}else if(z){for(_=h;h.Prev.Pt.Y===h.Pt.Y&&h.Prev!==_&&h.Prev!==I;)h=h.Prev;for(;_.Next.Pt.Y===_.Pt.Y&&_.Next!==h&&_.Next!==I;)_=_.Next;if(_.Next===h||_.Next===I)return!1;for(N=I;I.Prev.Pt.Y===I.Pt.Y&&I.Prev!==N&&I.Prev!==_;)I=I.Prev;for(;N.Next.Pt.Y===N.Pt.Y&&N.Next!==I&&N.Next!==h;)N=N.Next;if(N.Next===I||N.Next===h)return!1;var at={Left:null,Right:null};if(!this.GetOverlap(h.Pt.X,_.Pt.X,I.Pt.X,N.Pt.X,at))return!1;var it=at.Left,lt=at.Right,mt=new s.IntPoint0,Tt;return h.Pt.X>=it&&h.Pt.X<=lt?(mt.X=h.Pt.X,mt.Y=h.Pt.Y,s.use_xyz&&(mt.Z=h.Pt.Z),Tt=h.Pt.X>_.Pt.X):I.Pt.X>=it&&I.Pt.X<=lt?(mt.X=I.Pt.X,mt.Y=I.Pt.Y,s.use_xyz&&(mt.Z=I.Pt.Z),Tt=I.Pt.X>N.Pt.X):_.Pt.X>=it&&_.Pt.X<=lt?(mt.X=_.Pt.X,mt.Y=_.Pt.Y,s.use_xyz&&(mt.Z=_.Pt.Z),Tt=_.Pt.X>h.Pt.X):(mt.X=N.Pt.X,mt.Y=N.Pt.Y,s.use_xyz&&(mt.Z=N.Pt.Z),Tt=N.Pt.X>I.Pt.X),e.OutPt1=h,e.OutPt2=I,this.JoinHorz(h,_,I,N,mt,Tt)}else{for(_=h.Next;s.IntPoint.op_Equality(_.Pt,h.Pt)&&_!==h;)_=_.Next;var Ot=_.Pt.Y>h.Pt.Y||!s.ClipperBase.SlopesEqual4(h.Pt,_.Pt,e.OffPt,this.m_UseFullRange);if(Ot){for(_=h.Prev;s.IntPoint.op_Equality(_.Pt,h.Pt)&&_!==h;)_=_.Prev;if(_.Pt.Y>h.Pt.Y||!s.ClipperBase.SlopesEqual4(h.Pt,_.Pt,e.OffPt,this.m_UseFullRange))return!1}for(N=I.Next;s.IntPoint.op_Equality(N.Pt,I.Pt)&&N!==I;)N=N.Next;var Yt=N.Pt.Y>I.Pt.Y||!s.ClipperBase.SlopesEqual4(I.Pt,N.Pt,e.OffPt,this.m_UseFullRange);if(Yt){for(N=I.Prev;s.IntPoint.op_Equality(N.Pt,I.Pt)&&N!==I;)N=N.Prev;if(N.Pt.Y>I.Pt.Y||!s.ClipperBase.SlopesEqual4(I.Pt,N.Pt,e.OffPt,this.m_UseFullRange))return!1}return _===h||N===I||_===N||r===o&&Ot===Yt?!1:Ot?(_=this.DupOutPt(h,!1),N=this.DupOutPt(I,!0),h.Prev=I,I.Next=h,_.Next=N,N.Prev=_,e.OutPt1=h,e.OutPt2=_,!0):(_=this.DupOutPt(h,!0),N=this.DupOutPt(I,!1),h.Next=I,I.Prev=h,_.Prev=N,N.Next=_,e.OutPt1=h,e.OutPt2=_,!0)}},s.Clipper.GetBounds=function(e){for(var r=0,o=e.length;r<o&&e[r].length===0;)r++;if(r===o)return new s.IntRect(0,0,0,0);var h=new s.IntRect;for(h.left=e[r][0].X,h.right=h.left,h.top=e[r][0].Y,h.bottom=h.top;r<o;r++)for(var _=0,I=e[r].length;_<I;_++)e[r][_].X<h.left?h.left=e[r][_].X:e[r][_].X>h.right&&(h.right=e[r][_].X),e[r][_].Y<h.top?h.top=e[r][_].Y:e[r][_].Y>h.bottom&&(h.bottom=e[r][_].Y);return h},s.Clipper.prototype.GetBounds2=function(e){var r=e,o=new s.IntRect;for(o.left=e.Pt.X,o.right=e.Pt.X,o.top=e.Pt.Y,o.bottom=e.Pt.Y,e=e.Next;e!==r;)e.Pt.X<o.left&&(o.left=e.Pt.X),e.Pt.X>o.right&&(o.right=e.Pt.X),e.Pt.Y<o.top&&(o.top=e.Pt.Y),e.Pt.Y>o.bottom&&(o.bottom=e.Pt.Y),e=e.Next;return o},s.Clipper.PointInPolygon=function(e,r){var o=0,h=r.length;if(h<3)return 0;for(var _=r[0],I=1;I<=h;++I){var N=I===h?r[0]:r[I];if(N.Y===e.Y&&(N.X===e.X||_.Y===e.Y&&N.X>e.X==_.X<e.X))return-1;if(_.Y<e.Y!=N.Y<e.Y){if(_.X>=e.X)if(N.X>e.X)o=1-o;else{var z=(_.X-e.X)*(N.Y-e.Y)-(N.X-e.X)*(_.Y-e.Y);if(z===0)return-1;z>0==N.Y>_.Y&&(o=1-o)}else if(N.X>e.X){var z=(_.X-e.X)*(N.Y-e.Y)-(N.X-e.X)*(_.Y-e.Y);if(z===0)return-1;z>0==N.Y>_.Y&&(o=1-o)}}_=N}return o},s.Clipper.prototype.PointInPolygon=function(e,r){var o=0,h=r,_=e.X,I=e.Y,N=r.Pt.X,z=r.Pt.Y;do{r=r.Next;var q=r.Pt.X,$=r.Pt.Y;if($===I&&(q===_||z===I&&q>_==N<_))return-1;if(z<I!=$<I){if(N>=_)if(q>_)o=1-o;else{var at=(N-_)*($-I)-(q-_)*(z-I);if(at===0)return-1;at>0==$>z&&(o=1-o)}else if(q>_){var at=(N-_)*($-I)-(q-_)*(z-I);if(at===0)return-1;at>0==$>z&&(o=1-o)}}N=q,z=$}while(h!==r);return o},s.Clipper.prototype.Poly2ContainsPoly1=function(e,r){var o=e;do{var h=this.PointInPolygon(o.Pt,r);if(h>=0)return h>0;o=o.Next}while(o!==e);return!0},s.Clipper.prototype.FixupFirstLefts1=function(e,r){for(var o,h,_=0,I=this.m_PolyOuts.length;_<I;_++)o=this.m_PolyOuts[_],h=s.Clipper.ParseFirstLeft(o.FirstLeft),o.Pts!==null&&h===e&&this.Poly2ContainsPoly1(o.Pts,r.Pts)&&(o.FirstLeft=r)},s.Clipper.prototype.FixupFirstLefts2=function(e,r){for(var o=r.FirstLeft,h,_,I=0,N=this.m_PolyOuts.length;I<N;I++)h=this.m_PolyOuts[I],!(h.Pts===null||h===r||h===e)&&(_=s.Clipper.ParseFirstLeft(h.FirstLeft),!(_!==o&&_!==e&&_!==r)&&(this.Poly2ContainsPoly1(h.Pts,e.Pts)?h.FirstLeft=e:this.Poly2ContainsPoly1(h.Pts,r.Pts)?h.FirstLeft=r:(h.FirstLeft===e||h.FirstLeft===r)&&(h.FirstLeft=o)))},s.Clipper.prototype.FixupFirstLefts3=function(e,r){for(var o,h,_=0,I=this.m_PolyOuts.length;_<I;_++)o=this.m_PolyOuts[_],h=s.Clipper.ParseFirstLeft(o.FirstLeft),o.Pts!==null&&h===e&&(o.FirstLeft=r)},s.Clipper.ParseFirstLeft=function(e){for(;e!==null&&e.Pts===null;)e=e.FirstLeft;return e},s.Clipper.prototype.JoinCommonEdges=function(){for(var e=0,r=this.m_Joins.length;e<r;e++){var o=this.m_Joins[e],h=this.GetOutRec(o.OutPt1.Idx),_=this.GetOutRec(o.OutPt2.Idx);if(!(h.Pts===null||_.Pts===null)&&!(h.IsOpen||_.IsOpen)){var I;h===_?I=h:this.OutRec1RightOfOutRec2(h,_)?I=_:this.OutRec1RightOfOutRec2(_,h)?I=h:I=this.GetLowermostRec(h,_),this.JoinPoints(o,h,_)&&(h===_?(h.Pts=o.OutPt1,h.BottomPt=null,_=this.CreateOutRec(),_.Pts=o.OutPt2,this.UpdateOutPtIdxs(_),this.Poly2ContainsPoly1(_.Pts,h.Pts)?(_.IsHole=!h.IsHole,_.FirstLeft=h,this.m_UsingPolyTree&&this.FixupFirstLefts2(_,h),(_.IsHole^this.ReverseSolution)==this.Area$1(_)>0&&this.ReversePolyPtLinks(_.Pts)):this.Poly2ContainsPoly1(h.Pts,_.Pts)?(_.IsHole=h.IsHole,h.IsHole=!_.IsHole,_.FirstLeft=h.FirstLeft,h.FirstLeft=_,this.m_UsingPolyTree&&this.FixupFirstLefts2(h,_),(h.IsHole^this.ReverseSolution)==this.Area$1(h)>0&&this.ReversePolyPtLinks(h.Pts)):(_.IsHole=h.IsHole,_.FirstLeft=h.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(h,_))):(_.Pts=null,_.BottomPt=null,_.Idx=h.Idx,h.IsHole=I.IsHole,I===_&&(h.FirstLeft=_.FirstLeft),_.FirstLeft=h,this.m_UsingPolyTree&&this.FixupFirstLefts3(_,h)))}}},s.Clipper.prototype.UpdateOutPtIdxs=function(e){var r=e.Pts;do r.Idx=e.Idx,r=r.Prev;while(r!==e.Pts)},s.Clipper.prototype.DoSimplePolygons=function(){for(var e=0;e<this.m_PolyOuts.length;){var r=this.m_PolyOuts[e++],o=r.Pts;if(!(o===null||r.IsOpen))do{for(var h=o.Next;h!==r.Pts;){if(s.IntPoint.op_Equality(o.Pt,h.Pt)&&h.Next!==o&&h.Prev!==o){var _=o.Prev,I=h.Prev;o.Prev=I,I.Next=o,h.Prev=_,_.Next=h,r.Pts=o;var N=this.CreateOutRec();N.Pts=h,this.UpdateOutPtIdxs(N),this.Poly2ContainsPoly1(N.Pts,r.Pts)?(N.IsHole=!r.IsHole,N.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(N,r)):this.Poly2ContainsPoly1(r.Pts,N.Pts)?(N.IsHole=r.IsHole,r.IsHole=!N.IsHole,N.FirstLeft=r.FirstLeft,r.FirstLeft=N,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,N)):(N.IsHole=r.IsHole,N.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,N)),h=o}h=h.Next}o=o.Next}while(o!==r.Pts)}},s.Clipper.Area=function(e){if(!Array.isArray(e))return 0;var r=e.length;if(r<3)return 0;for(var o=0,h=0,_=r-1;h<r;++h)o+=(e[_].X+e[h].X)*(e[_].Y-e[h].Y),_=h;return-o*.5},s.Clipper.prototype.Area=function(e){var r=e;if(e===null)return 0;var o=0;do o=o+(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!==r);return o*.5},s.Clipper.prototype.Area$1=function(e){return this.Area(e.Pts)},s.Clipper.SimplifyPolygon=function(e,r){var o=new Array,h=new s.Clipper(0);return h.StrictlySimple=!0,h.AddPath(e,s.PolyType.ptSubject,!0),h.Execute(s.ClipType.ctUnion,o,r,r),o},s.Clipper.SimplifyPolygons=function(e,r){typeof r>"u"&&(r=s.PolyFillType.pftEvenOdd);var o=new Array,h=new s.Clipper(0);return h.StrictlySimple=!0,h.AddPaths(e,s.PolyType.ptSubject,!0),h.Execute(s.ClipType.ctUnion,o,r,r),o},s.Clipper.DistanceSqrd=function(e,r){var o=e.X-r.X,h=e.Y-r.Y;return o*o+h*h},s.Clipper.DistanceFromLineSqrd=function(e,r,o){var h=r.Y-o.Y,_=o.X-r.X,I=h*r.X+_*r.Y;return I=h*e.X+_*e.Y-I,I*I/(h*h+_*_)},s.Clipper.SlopesNearCollinear=function(e,r,o,h){return Math.abs(e.X-r.X)>Math.abs(e.Y-r.Y)?e.X>r.X==e.X<o.X?s.Clipper.DistanceFromLineSqrd(e,r,o)<h:r.X>e.X==r.X<o.X?s.Clipper.DistanceFromLineSqrd(r,e,o)<h:s.Clipper.DistanceFromLineSqrd(o,e,r)<h:e.Y>r.Y==e.Y<o.Y?s.Clipper.DistanceFromLineSqrd(e,r,o)<h:r.Y>e.Y==r.Y<o.Y?s.Clipper.DistanceFromLineSqrd(r,e,o)<h:s.Clipper.DistanceFromLineSqrd(o,e,r)<h},s.Clipper.PointsAreClose=function(e,r,o){var h=e.X-r.X,_=e.Y-r.Y;return h*h+_*_<=o},s.Clipper.ExcludeOp=function(e){var r=e.Prev;return r.Next=e.Next,e.Next.Prev=r,r.Idx=0,r},s.Clipper.CleanPolygon=function(e,r){typeof r>"u"&&(r=1.415);var o=e.length;if(o===0)return new Array;for(var h=new Array(o),_=0;_<o;++_)h[_]=new s.OutPt;for(var _=0;_<o;++_)h[_].Pt=e[_],h[_].Next=h[(_+1)%o],h[_].Next.Prev=h[_],h[_].Idx=0;for(var I=r*r,N=h[0];N.Idx===0&&N.Next!==N.Prev;)s.Clipper.PointsAreClose(N.Pt,N.Prev.Pt,I)?(N=s.Clipper.ExcludeOp(N),o--):s.Clipper.PointsAreClose(N.Prev.Pt,N.Next.Pt,I)?(s.Clipper.ExcludeOp(N.Next),N=s.Clipper.ExcludeOp(N),o-=2):s.Clipper.SlopesNearCollinear(N.Prev.Pt,N.Pt,N.Next.Pt,I)?(N=s.Clipper.ExcludeOp(N),o--):(N.Idx=1,N=N.Next);o<3&&(o=0);for(var z=new Array(o),_=0;_<o;++_)z[_]=new s.IntPoint1(N.Pt),N=N.Next;return h=null,z},s.Clipper.CleanPolygons=function(e,r){for(var o=new Array(e.length),h=0,_=e.length;h<_;h++)o[h]=s.Clipper.CleanPolygon(e[h],r);return o},s.Clipper.Minkowski=function(e,r,o,h){var _=h?1:0,I=e.length,N=r.length,z=new Array;if(o)for(var q=0;q<N;q++){for(var $=new Array(I),at=0,it=e.length,lt=e[at];at<it;at++,lt=e[at])$[at]=new s.IntPoint2(r[q].X+lt.X,r[q].Y+lt.Y);z.push($)}else for(var q=0;q<N;q++){for(var $=new Array(I),at=0,it=e.length,lt=e[at];at<it;at++,lt=e[at])$[at]=new s.IntPoint2(r[q].X-lt.X,r[q].Y-lt.Y);z.push($)}for(var mt=new Array,q=0;q<N-1+_;q++)for(var at=0;at<I;at++){var Tt=new Array;Tt.push(z[q%N][at%I]),Tt.push(z[(q+1)%N][at%I]),Tt.push(z[(q+1)%N][(at+1)%I]),Tt.push(z[q%N][(at+1)%I]),s.Clipper.Orientation(Tt)||Tt.reverse(),mt.push(Tt)}return mt},s.Clipper.MinkowskiSum=function(e,r,o){if(r[0]instanceof Array){for(var _=r,N=new s.Paths,I=new s.Clipper,z=0;z<_.length;++z){var q=s.Clipper.Minkowski(e,_[z],!0,o);if(I.AddPaths(q,s.PolyType.ptSubject,!0),o){var h=s.Clipper.TranslatePath(_[z],e[0]);I.AddPath(h,s.PolyType.ptClip,!0)}}return I.Execute(s.ClipType.ctUnion,N,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),N}else{var h=r,_=s.Clipper.Minkowski(e,h,!0,o),I=new s.Clipper;return I.AddPaths(_,s.PolyType.ptSubject,!0),I.Execute(s.ClipType.ctUnion,_,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),_}},s.Clipper.TranslatePath=function(e,r){for(var o=new s.Path,h=0;h<e.length;h++)o.push(new s.IntPoint2(e[h].X+r.X,e[h].Y+r.Y));return o},s.Clipper.MinkowskiDiff=function(e,r){var o=s.Clipper.Minkowski(e,r,!1,!0),h=new s.Clipper;return h.AddPaths(o,s.PolyType.ptSubject,!0),h.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftNonZero,s.PolyFillType.pftNonZero),o},s.Clipper.PolyTreeToPaths=function(e){var r=new Array;return s.Clipper.AddPolyNodeToPaths(e,s.Clipper.NodeType.ntAny,r),r},s.Clipper.AddPolyNodeToPaths=function(e,r,o){var h=!0;switch(r){case s.Clipper.NodeType.ntOpen:return;case s.Clipper.NodeType.ntClosed:h=!e.IsOpen;break}e.m_polygon.length>0&&h&&o.push(e.m_polygon);for(var _=0,I=e.Childs(),N=I.length,z=I[_];_<N;_++,z=I[_])s.Clipper.AddPolyNodeToPaths(z,r,o)},s.Clipper.OpenPathsFromPolyTree=function(e){for(var r=new s.Paths,o=0,h=e.ChildCount();o<h;o++)e.Childs()[o].IsOpen&&r.push(e.Childs()[o].m_polygon);return r},s.Clipper.ClosedPathsFromPolyTree=function(e){var r=new s.Paths;return s.Clipper.AddPolyNodeToPaths(e,s.Clipper.NodeType.ntClosed,r),r},ye(s.Clipper,s.ClipperBase),s.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},s.ClipperOffset=function(e,r){typeof e>"u"&&(e=2),typeof r>"u"&&(r=s.ClipperOffset.def_arc_tolerance),this.m_destPolys=new s.Paths,this.m_srcPoly=new s.Path,this.m_destPoly=new s.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new s.IntPoint0,this.m_polyNodes=new s.PolyNode,this.MiterLimit=e,this.ArcTolerance=r,this.m_lowest.X=-1},s.ClipperOffset.two_pi=6.28318530717959,s.ClipperOffset.def_arc_tolerance=.25,s.ClipperOffset.prototype.Clear=function(){s.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},s.ClipperOffset.Round=s.Clipper.Round,s.ClipperOffset.prototype.AddPath=function(e,r,o){var h=e.length-1;if(!(h<0)){var _=new s.PolyNode;if(_.m_jointype=r,_.m_endtype=o,o===s.EndType.etClosedLine||o===s.EndType.etClosedPolygon)for(;h>0&&s.IntPoint.op_Equality(e[0],e[h]);)h--;_.m_polygon.push(e[0]);for(var I=0,N=0,z=1;z<=h;z++)s.IntPoint.op_Inequality(_.m_polygon[I],e[z])&&(I++,_.m_polygon.push(e[z]),(e[z].Y>_.m_polygon[N].Y||e[z].Y===_.m_polygon[N].Y&&e[z].X<_.m_polygon[N].X)&&(N=I));if(!(o===s.EndType.etClosedPolygon&&I<2)&&(this.m_polyNodes.AddChild(_),o===s.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,N);else{var q=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(_.m_polygon[N].Y>q.Y||_.m_polygon[N].Y===q.Y&&_.m_polygon[N].X<q.X)&&(this.m_lowest=new s.IntPoint2(this.m_polyNodes.ChildCount()-1,N))}}},s.ClipperOffset.prototype.AddPaths=function(e,r,o){for(var h=0,_=e.length;h<_;h++)this.AddPath(e[h],r,o)},s.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!s.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var r=this.m_polyNodes.Childs()[e];(r.m_endtype===s.EndType.etClosedPolygon||r.m_endtype===s.EndType.etClosedLine&&s.Clipper.Orientation(r.m_polygon))&&r.m_polygon.reverse()}else for(var e=0;e<this.m_polyNodes.ChildCount();e++){var r=this.m_polyNodes.Childs()[e];r.m_endtype===s.EndType.etClosedLine&&!s.Clipper.Orientation(r.m_polygon)&&r.m_polygon.reverse()}},s.ClipperOffset.GetUnitNormal=function(e,r){var o=r.X-e.X,h=r.Y-e.Y;if(o===0&&h===0)return new s.DoublePoint2(0,0);var _=1/Math.sqrt(o*o+h*h);return o*=_,h*=_,new s.DoublePoint2(h,-o)},s.ClipperOffset.prototype.DoOffset=function(e){if(this.m_destPolys=new Array,this.m_delta=e,s.ClipperBase.near_zero(e)){for(var r=0;r<this.m_polyNodes.ChildCount();r++){var o=this.m_polyNodes.Childs()[r];o.m_endtype===s.EndType.etClosedPolygon&&this.m_destPolys.push(o.m_polygon)}return}this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var h;this.ArcTolerance<=0?h=s.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(e)*s.ClipperOffset.def_arc_tolerance?h=Math.abs(e)*s.ClipperOffset.def_arc_tolerance:h=this.ArcTolerance;var _=3.14159265358979/Math.acos(1-h/Math.abs(e));this.m_sin=Math.sin(s.ClipperOffset.two_pi/_),this.m_cos=Math.cos(s.ClipperOffset.two_pi/_),this.m_StepsPerRad=_/s.ClipperOffset.two_pi,e<0&&(this.m_sin=-this.m_sin);for(var r=0;r<this.m_polyNodes.ChildCount();r++){var o=this.m_polyNodes.Childs()[r];this.m_srcPoly=o.m_polygon;var I=this.m_srcPoly.length;if(!(I===0||e<=0&&(I<3||o.m_endtype!==s.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,I===1){if(o.m_jointype===s.JoinType.jtRound)for(var N=1,z=0,q=1;q<=_;q++){this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+N*e),s.ClipperOffset.Round(this.m_srcPoly[0].Y+z*e)));var $=N;N=N*this.m_cos-this.m_sin*z,z=$*this.m_sin+z*this.m_cos}else for(var N=-1,z=-1,q=0;q<4;++q)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+N*e),s.ClipperOffset.Round(this.m_srcPoly[0].Y+z*e))),N<0?N=1:z<0?z=1:N=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var q=0;q<I-1;q++)this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[q],this.m_srcPoly[q+1]));if(o.m_endtype===s.EndType.etClosedLine||o.m_endtype===s.EndType.etClosedPolygon?this.m_normals.push(s.ClipperOffset.GetUnitNormal(this.m_srcPoly[I-1],this.m_srcPoly[0])):this.m_normals.push(new s.DoublePoint1(this.m_normals[I-2])),o.m_endtype===s.EndType.etClosedPolygon){for(var at=I-1,q=0;q<I;q++)at=this.OffsetPoint(q,at,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(o.m_endtype===s.EndType.etClosedLine){for(var at=I-1,q=0;q<I;q++)at=this.OffsetPoint(q,at,o.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var it=this.m_normals[I-1],q=I-1;q>0;q--)this.m_normals[q]=new s.DoublePoint2(-this.m_normals[q-1].X,-this.m_normals[q-1].Y);this.m_normals[0]=new s.DoublePoint2(-it.X,-it.Y),at=0;for(var q=I-1;q>=0;q--)at=this.OffsetPoint(q,at,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var at=0,q=1;q<I-1;++q)at=this.OffsetPoint(q,at,o.m_jointype);var lt;if(o.m_endtype===s.EndType.etOpenButt){var q=I-1;lt=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[q].X+this.m_normals[q].X*e),s.ClipperOffset.Round(this.m_srcPoly[q].Y+this.m_normals[q].Y*e)),this.m_destPoly.push(lt),lt=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[q].X-this.m_normals[q].X*e),s.ClipperOffset.Round(this.m_srcPoly[q].Y-this.m_normals[q].Y*e)),this.m_destPoly.push(lt)}else{var q=I-1;at=I-2,this.m_sinA=0,this.m_normals[q]=new s.DoublePoint2(-this.m_normals[q].X,-this.m_normals[q].Y),o.m_endtype===s.EndType.etOpenSquare?this.DoSquare(q,at):this.DoRound(q,at)}for(var q=I-1;q>0;q--)this.m_normals[q]=new s.DoublePoint2(-this.m_normals[q-1].X,-this.m_normals[q-1].Y);this.m_normals[0]=new s.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),at=I-1;for(var q=at-1;q>0;--q)at=this.OffsetPoint(q,at,o.m_jointype);o.m_endtype===s.EndType.etOpenButt?(lt=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*e),s.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*e)),this.m_destPoly.push(lt),lt=new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*e),s.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*e)),this.m_destPoly.push(lt)):(at=1,this.m_sinA=0,o.m_endtype===s.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}},s.ClipperOffset.prototype.Execute=function(){var e=arguments,r=e[0]instanceof s.PolyTree;if(r){var o=e[0],h=e[1];o.Clear(),this.FixOrientations(),this.DoOffset(h);var _=new s.Clipper(0);if(_.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),h>0)_.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var I=s.Clipper.GetBounds(this.m_destPolys),N=new s.Path;if(N.push(new s.IntPoint2(I.left-10,I.bottom+10)),N.push(new s.IntPoint2(I.right+10,I.bottom+10)),N.push(new s.IntPoint2(I.right+10,I.top-10)),N.push(new s.IntPoint2(I.left-10,I.top-10)),_.AddPath(N,s.PolyType.ptSubject,!0),_.ReverseSolution=!0,_.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),o.ChildCount()===1&&o.Childs()[0].ChildCount()>0){var z=o.Childs()[0];o.Childs()[0]=z.Childs()[0],o.Childs()[0].m_Parent=o;for(var q=1;q<z.ChildCount();q++)o.AddChild(z.Childs()[q])}else o.Clear()}}else{var o=e[0],h=e[1];s.Clear(o),this.FixOrientations(),this.DoOffset(h);var _=new s.Clipper(0);if(_.AddPaths(this.m_destPolys,s.PolyType.ptSubject,!0),h>0)_.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftPositive,s.PolyFillType.pftPositive);else{var I=s.Clipper.GetBounds(this.m_destPolys),N=new s.Path;N.push(new s.IntPoint2(I.left-10,I.bottom+10)),N.push(new s.IntPoint2(I.right+10,I.bottom+10)),N.push(new s.IntPoint2(I.right+10,I.top-10)),N.push(new s.IntPoint2(I.left-10,I.top-10)),_.AddPath(N,s.PolyType.ptSubject,!0),_.ReverseSolution=!0,_.Execute(s.ClipType.ctUnion,o,s.PolyFillType.pftNegative,s.PolyFillType.pftNegative),o.length>0&&o.splice(0,1)}}},s.ClipperOffset.prototype.OffsetPoint=function(e,r,o){if(this.m_sinA=this.m_normals[r].X*this.m_normals[e].Y-this.m_normals[e].X*this.m_normals[r].Y,Math.abs(this.m_sinA*this.m_delta)<1){var h=this.m_normals[r].X*this.m_normals[e].X+this.m_normals[e].Y*this.m_normals[r].Y;if(h>0)return this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[r].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[r].Y*this.m_delta))),r}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[r].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[r].Y*this.m_delta))),this.m_destPoly.push(new s.IntPoint1(this.m_srcPoly[e])),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)));else switch(o){case s.JoinType.jtMiter:{var _=1+(this.m_normals[e].X*this.m_normals[r].X+this.m_normals[e].Y*this.m_normals[r].Y);_>=this.m_miterLim?this.DoMiter(e,r,_):this.DoSquare(e,r);break}case s.JoinType.jtSquare:this.DoSquare(e,r);break;case s.JoinType.jtRound:this.DoRound(e,r);break}return r=e,r},s.ClipperOffset.prototype.DoSquare=function(e,r){var o=Math.tan(Math.atan2(this.m_sinA,this.m_normals[r].X*this.m_normals[e].X+this.m_normals[r].Y*this.m_normals[e].Y)/4);this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[r].X-this.m_normals[r].Y*o)),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[r].Y+this.m_normals[r].X*o)))),this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_delta*(this.m_normals[e].X+this.m_normals[e].Y*o)),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_delta*(this.m_normals[e].Y-this.m_normals[e].X*o))))},s.ClipperOffset.prototype.DoMiter=function(e,r,o){var h=this.m_delta/o;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+(this.m_normals[r].X+this.m_normals[e].X)*h),s.ClipperOffset.Round(this.m_srcPoly[e].Y+(this.m_normals[r].Y+this.m_normals[e].Y)*h)))},s.ClipperOffset.prototype.DoRound=function(e,r){for(var o=Math.atan2(this.m_sinA,this.m_normals[r].X*this.m_normals[e].X+this.m_normals[r].Y*this.m_normals[e].Y),h=Math.max(s.Cast_Int32(s.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(o))),1),_=this.m_normals[r].X,I=this.m_normals[r].Y,N,z=0;z<h;++z)this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+_*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[e].Y+I*this.m_delta))),N=_,_=_*this.m_cos-this.m_sin*I,I=N*this.m_sin+I*this.m_cos;this.m_destPoly.push(new s.IntPoint2(s.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*this.m_delta),s.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*this.m_delta)))},s.Error=function(e){try{throw new Error(e)}catch(r){alert(r.message)}},s.JS={},s.JS.AreaOfPolygon=function(e,r){return r||(r=1),s.Clipper.Area(e)/(r*r)},s.JS.AreaOfPolygons=function(e,r){r||(r=1);for(var o=0,h=0;h<e.length;h++)o+=s.Clipper.Area(e[h]);return o/(r*r)},s.JS.BoundsOfPath=function(e,r){return s.JS.BoundsOfPaths([e],r)},s.JS.BoundsOfPaths=function(e,r){r||(r=1);var o=s.Clipper.GetBounds(e);return o.left/=r,o.bottom/=r,o.right/=r,o.top/=r,o},s.JS.Clean=function(h,r){if(!(h instanceof Array))return[];var o=h[0]instanceof Array,h=s.JS.Clone(h);if(typeof r!="number"||r===null)return s.Error("Delta is not a number in Clean()."),h;if(h.length===0||h.length===1&&h[0].length===0||r<0)return h;o||(h=[h]);for(var _=h.length,I,N,z,q,$,at,it,lt=[],mt=0;mt<_;mt++)if(N=h[mt],I=N.length,I!==0){if(I<3){z=N,lt.push(z);continue}for(z=N,q=r*r,$=N[0],at=1,it=1;it<I;it++)(N[it].X-$.X)*(N[it].X-$.X)+(N[it].Y-$.Y)*(N[it].Y-$.Y)<=q||(z[at]=N[it],$=N[it],at++);$=N[at-1],(N[0].X-$.X)*(N[0].X-$.X)+(N[0].Y-$.Y)*(N[0].Y-$.Y)<=q&&at--,at<I&&z.splice(at,I-at),z.length&&lt.push(z)}return!o&&lt.length?lt=lt[0]:!o&&lt.length===0?lt=[]:o&&lt.length===0&&(lt=[[]]),lt},s.JS.Clone=function(e){if(!(e instanceof Array))return[];if(e.length===0)return[];if(e.length===1&&e[0].length===0)return[[]];var r=e[0]instanceof Array;r||(e=[e]);var o=e.length,h,_,I,N,z=new Array(o);for(_=0;_<o;_++){for(h=e[_].length,N=new Array(h),I=0;I<h;I++)N[I]={X:e[_][I].X,Y:e[_][I].Y};z[_]=N}return r||(z=z[0]),z},s.JS.Lighten=function(e,r){if(!(e instanceof Array))return[];if(typeof r!="number"||r===null)return s.Error("Tolerance is not a number in Lighten()."),s.JS.Clone(e);if(e.length===0||e.length===1&&e[0].length===0||r<0)return s.JS.Clone(e);var o=e[0]instanceof Array;o||(e=[e]);var h,_,I,N,z,q,$,at,it,lt,mt,Tt,Ot,Yt,ue,Pe,ke,si=e.length,De=r*r,Fe=[];for(h=0;h<si;h++)if(I=e[h],q=I.length,q!==0){for(N=0;N<1e6;N++){for(z=[],q=I.length,I[q-1].X!==I[0].X||I[q-1].Y!==I[0].Y?(Tt=1,I.push({X:I[0].X,Y:I[0].Y}),q=I.length):Tt=0,mt=[],_=0;_<q-2;_++)$=I[_],it=I[_+1],at=I[_+2],Pe=$.X,ke=$.Y,Ot=at.X-Pe,Yt=at.Y-ke,(Ot!==0||Yt!==0)&&(ue=((it.X-Pe)*Ot+(it.Y-ke)*Yt)/(Ot*Ot+Yt*Yt),ue>1?(Pe=at.X,ke=at.Y):ue>0&&(Pe+=Ot*ue,ke+=Yt*ue)),Ot=it.X-Pe,Yt=it.Y-ke,lt=Ot*Ot+Yt*Yt,lt<=De&&(mt[_+1]=1,_++);for(z.push({X:I[0].X,Y:I[0].Y}),_=1;_<q-1;_++)mt[_]||z.push({X:I[_].X,Y:I[_].Y});if(z.push({X:I[q-1].X,Y:I[q-1].Y}),Tt&&I.pop(),mt.length)I=z;else break}q=z.length,z[q-1].X===z[0].X&&z[q-1].Y===z[0].Y&&z.pop(),z.length>2&&Fe.push(z)}return o||(Fe=Fe[0]),typeof Fe>"u"&&(Fe=[]),Fe},s.JS.PerimeterOfPath=function(e,r,o){if(typeof e>"u")return 0;var h=Math.sqrt,_=0,I,N,z=0,q=0,$=0,at=0,it=e.length;if(it<2)return 0;for(r&&(e[it]=e[0],it++);--it;)I=e[it],z=I.X,q=I.Y,N=e[it-1],$=N.X,at=N.Y,_+=h((z-$)*(z-$)+(q-at)*(q-at));return r&&e.pop(),_/o},s.JS.PerimeterOfPaths=function(e,r,o){o||(o=1);for(var h=0,_=0;_<e.length;_++)h+=s.JS.PerimeterOfPath(e[_],r,o);return h},s.JS.ScaleDownPath=function(e,r){var o,h;for(r||(r=1),o=e.length;o--;)h=e[o],h.X=h.X/r,h.Y=h.Y/r},s.JS.ScaleDownPaths=function(e,r){var o,h,_;for(r||(r=1),o=e.length;o--;)for(h=e[o].length;h--;)_=e[o][h],_.X=_.X/r,_.Y=_.Y/r},s.JS.ScaleUpPath=function(e,r){var o,h,_=Math.round;for(r||(r=1),o=e.length;o--;)h=e[o],h.X=_(h.X*r),h.Y=_(h.Y*r)},s.JS.ScaleUpPaths=function(e,r){var o,h,_,I=Math.round;for(r||(r=1),o=e.length;o--;)for(h=e[o].length;h--;)_=e[o][h],_.X=I(_.X*r),_.Y=I(_.Y*r)},s.ExPolygons=function(){return[]},s.ExPolygon=function(){this.outer=null,this.holes=null},s.JS.AddOuterPolyNodeToExPolygons=function(e,r){var o=new s.ExPolygon;o.outer=e.Contour();var h=e.Childs(),_=h.length;o.holes=new Array(_);var I,N,z,q,$,at;for(z=0;z<_;z++)for(I=h[z],o.holes[z]=I.Contour(),q=0,$=I.Childs(),at=$.length;q<at;q++)N=$[q],s.JS.AddOuterPolyNodeToExPolygons(N,r);r.push(o)},s.JS.ExPolygonsToPaths=function(e){var r,o,h,_,I=new s.Paths;for(r=0,h=e.length;r<h;r++)for(I.push(e[r].outer),o=0,_=e[r].holes.length;o<_;o++)I.push(e[r].holes[o]);return I},s.JS.PolyTreeToExPolygons=function(e){var r=new s.ExPolygons,o,h,_,I;for(h=0,_=e.Childs(),I=_.length;h<I;h++)o=_[h],s.JS.AddOuterPolyNodeToExPolygons(o,r);return r}})()})(ji)),ji.exports}var rs=ns();const Si=Rn(rs);class ss{constructor(s){this.canvas=s,this.backgroundLayer=new Dt.Layer,this.foregroundLayer=new Dt.Layer;const A=new Dt.Raster("/images/paper.jpg");A.position=Dt.view.center,A.scale(.4),A.sendToBack(),this.backgroundLayer.addChild(A),this.backgroundLayer.visible=!1,this.foregroundLayer.activate()}clearForeground(){this.foregroundLayer.removeChildren()}renderCurves(s,A=!0,R=null,Y=null,T="rgba(0,150,255,0.2)"){let ot=this.generateOffsetsVisibilityMap(s);this.clearForeground(),s.forEach((j,dt)=>{const Ft=A&&dt===Y;if(this.drawCurve(j,Ft,R),j.offsetsData.length){const Ut=ot[dt]||Array(j.offsetsData.length).fill(!1);j.offsetsData.forEach((Et,ge)=>{!Ut[ge]||Et.points.length<2||(this.drawOffset(Et),this.fillBetweenCurveAndOffset(j,Et,T))})}}),Dt.view.update()}generateOffsetsVisibilityMap(s){const A={};return s.forEach((R,Y)=>{R.offsetsData&&(A[Y]=R.offsetsData.map(T=>!!T.visible))}),A}drawCurve(s,A=!0,R=null){const Y=new Dt.Path({strokeColor:"#000",strokeWidth:s.strokeWidth||2});s.handles.forEach(T=>{const ot=new Dt.Segment(new Dt.Point(T.segment.x,T.segment.y),new Dt.Point(T.handleIn.x,T.handleIn.y),new Dt.Point(T.handleOut.x,T.handleOut.y));Y.add(ot),A&&this._drawHandleCircles(T,R)}),this._drawHandleLines(s,A)}_drawHandleCircles(s,A){const R=A?.data?.id===s.id?"#1aac7eff":"#c64343";this._makeCircle(new Dt.Point(s.segment.x,s.segment.y),R,s.id,"circle",s.inPointId,s.outPointId),this._makeCircle(new Dt.Point(s.segment.x+s.handleIn.x,s.segment.y+s.handleIn.y),"#3498db",s.inPointId,"bezier_in"),this._makeCircle(new Dt.Point(s.segment.x+s.handleOut.x,s.segment.y+s.handleOut.y),"#3498db",s.outPointId,"bezier_out")}drawOffset(s){const A=new Dt.Path({strokeColor:"#1aac7eff",strokeWidth:2});s.points.forEach(R=>A.add(new Dt.Point(R.x,R.y))),A.sendToBack()}fillBetweenCurveAndOffset(s,A,R){const Y=new Dt.Path({fillColor:R});s.handles.forEach(T=>Y.add(new Dt.Segment(new Dt.Point(T.segment.x,T.segment.y),new Dt.Point(T.handleIn.x,T.handleIn.y),new Dt.Point(T.handleOut.x,T.handleOut.y))));for(let T=A.points.length-1;T>=0;T--){const ot=A.points[T];Y.add(new Dt.Point(ot.x,ot.y))}Y.closed=!0,Y.sendToBack()}setBackgroundVisibility(s){this.backgroundLayer.visible=!!s}_makeCircle(s,A,R,Y,T=null,ot=null){const j=new Dt.Path.Circle(s,4);return j.fillColor=A,j.data={type:Y,id:R,inPointId:T,outPointId:ot},this.foregroundLayer.addChild(j),j}_drawHandleLines(s,A=!0){A&&s.handles.forEach(R=>{const Y=new Dt.Point(R.segment.x,R.segment.y);[R.handleIn,R.handleOut].forEach(T=>{new Dt.Path.Line({from:Y,to:Y.add(T),strokeColor:"gray",strokeWidth:1,dashArray:[4,4]}).sendToBack()})})}exportAsImage(s="canvas.png",A=!0){if(!this.canvas)return;const R=document.createElement("canvas");R.width=this.canvas.width,R.height=this.canvas.height;const Y=R.getContext("2d");A&&(Y.fillStyle="#ffffff",Y.fillRect(0,0,R.width,R.height)),Y.drawImage(this.canvas,0,0);const T=R.toDataURL("image/png"),ot=document.createElement("a");ot.href=T,ot.download=s,ot.click()}}class as{constructor(){this.elements={toggleHandles:document.getElementById("toggleHandlesCbx"),deletePointBtn:document.getElementById("deletePointBtn"),deleteCurveBtn:document.getElementById("deleteBtn"),addCurveBtn:document.getElementById("addCurveBtn"),curveSelect:document.getElementById("curveSelect"),addOffsetCheckbox:document.getElementById("offsetCbx"),exportBtn:document.getElementById("exportBtn"),toggleBackground:document.getElementById("toggleBackgroundCbx"),saveBtn:document.getElementById("saveBtn"),importBtn:document.getElementById("importBtn"),importFile:document.getElementById("importFile"),addOffsetBtn:document.getElementById("addOffsetBtn")},this.offsetElements=[]}_bindEvent(s,A,R){s&&s.addEventListener(A,R)}bindToggleBackground(s){this._bindEvent(this.elements.toggleBackground,"click",s)}bindHandlesToggle(s){this._bindEvent(this.elements.toggleHandles,"click",s)}bindAddCurve(s){this._bindEvent(this.elements.addCurveBtn,"click",s)}bindCurveSelect(s){this.elements.curveSelect&&this.elements.curveSelect.addEventListener("change",A=>{s(parseInt(A.target.value,10))})}bindDeletePoint(s){this._bindEvent(this.elements.deletePointBtn,"click",s)}bindDeleteCurve(s){this._bindEvent(this.elements.deleteCurveBtn,"click",s)}bindExport(s){this._bindEvent(this.elements.exportBtn,"click",s)}bindSave(s){this._bindEvent(this.elements.saveBtn,"click",s)}bindImportButton(s){this._bindEvent(this.elements.importBtn,"click",s)}bindAddOffsetBtn(s){this._bindEvent(this.elements.addOffsetBtn,"click",s)}bindImportFile(s){this._bindEvent(this.elements.importFile,"change",s)}bindOffsetAdd(s){this._bindEvent(this.elements.addOffsetCheckbox,"click",s)}bindOffsetSlider(s,A){const R=this.offsetElements[s-1];R?.slider&&R.slider.addEventListener("input",A)}bindOffsetCheckbox(s,A){const R=this.offsetElements[s-1];R?.checkbox&&R.checkbox.addEventListener("click",A)}bindDynamicOffsetControls(s,A,R){const Y=document.getElementById("offsetControlsContainer");Y&&(Y.addEventListener("input",T=>{if(T.target.matches("input[type='range']")){const ot=parseInt(T.target.id.replace("offsetSlider",""),10),j=parseFloat(T.target.value);s(ot,j)}}),Y.addEventListener("click",T=>{if(T.target.matches("input[type='checkbox']")&&T.target.id.startsWith("toggleOffset")){const ot=parseInt(T.target.id.replace("toggleOffset","").replace("Cbx",""),10),j=T.target.checked;A(ot,j)}}),Y.addEventListener("click",T=>{if(T.target.matches("button")&&T.target.id.startsWith("removeOffsetBtn")){const ot=parseInt(T.target.id.replace("removeOffsetBtn",""),10);R(ot)}}))}updateBackgroundToggle(s){this.elements.toggleBackground&&(this.elements.toggleBackground.checked=s)}updateHandlesToggle(s){this.elements.toggleHandles&&(this.elements.toggleHandles.checked=s)}updateCurveList(s){const A=this.elements.curveSelect;A&&(A.innerHTML="",s.forEach((R,Y)=>{const T=document.createElement("option");T.value=Y,T.textContent=R.name,A.appendChild(T)}))}updateSelectedCurve(s){this.elements.curveSelect&&(this.elements.curveSelect.value=s)}updateOffsetValue(s,A){const R=this.offsetElements[s-1];R&&(R.slider&&(R.slider.value=A),R.valueDisplay&&(R.valueDisplay.textContent=A))}updateOffsetCheckbox(s,A){const R=this.offsetElements[s-1];R?.checkbox&&(R.checkbox.checked=A)}addOffsetControls(s){let A=this.offsetElements.length+1;const R=document.getElementById("offsetControlsContainer");if(!R||document.getElementById(`offsetSlider${A}`))return;const Y=document.createElement("div");Y.classList.add("slider-group"),Y.innerHTML=`
 <button id="removeOffsetBtn${A}" class="remove-button" title="Supprimer l'offset ${A}">X</button>
                    <input type="checkbox" id="toggleOffset${A}Cbx">
                    <label for="offsetSlider">Offset&nbsp;${A}</label>
                    <input type="range" id="offsetSlider${A}" min="00" max="200" step="1">
                    <span id="offsetValue${A}">0</span>
  `,R.appendChild(Y);const T={slider:document.getElementById(`offsetSlider${A}`),valueDisplay:document.getElementById(`offsetValue${A}`),checkbox:document.getElementById(`toggleOffset${A}Cbx`),remove:document.getElementById(`removeOffsetBtn${A}`)};this.offsetElements[A-1]=T}removeOffsetControls(s){const A=this.offsetElements[s-1];if(!A)return;const R=A.slider?.closest(".slider-group");R&&R.remove(),this.offsetElements.splice(s-1,1),this.offsetElements.forEach((Y,T)=>{if(!Y)return;Y.slider.id=`offsetSlider${T+1}`,Y.valueDisplay.id=`offsetValue${T+1}`,Y.checkbox.id=`toggleOffset${T+1}Cbx`,Y.remove.id=`removeOffsetBtn${T+1}`;const ot=Y.slider?.closest(".slider-group")?.querySelector("label");ot&&(ot.innerHTML=`Offset&nbsp;${T+1}`)})}renderOffsetsControls(s){this.clearOffsetsControls(),document.getElementById("offsetControlsContainer")&&s.offsetsData.forEach((R,Y)=>{this.addOffsetControls(Y+1),this.updateOffsetValue(Y+1,R.offset),this.updateOffsetCheckbox(Y+1,R.visible)})}clearOffsetsControls(){this.offsetElements=[];const s=document.getElementById("offsetControlsContainer");s&&(s.innerHTML="<h2>Offsets</h2>")}}class os{constructor(s,A){this.model=s,this.view=A,this.selectedItem=null,this.dragOffset=null,this.handlesVisible=!0,this.backgroundVisible=!1,this.offsetVisible=!0,this.isDraggingCurve=!1,this.lastMousePos=null,this._setupTool()}_setupTool(){const s=new Dt.Tool;s.onMouseDown=A=>this._handleMouseDown(A),s.onMouseDrag=A=>this._handleMouseDrag(A),s.onMouseUp=()=>this._handleMouseUp()}_handleMouseDown(s){const A=this.model.curves[this.model.currentCurveIndex];if(!A)return;const R=Dt.project.hitTest(s.point,{fill:!0,stroke:!0,tolerance:8});this._selectHitItem(R,s)||this._checkStartCurveDrag(A,s)||this.handlesVisible&&this._addPointToCurve(A,s.point)}_handleMouseDrag(s){const A=this.model.getCurrentCurve();A&&(this.isDraggingCurve?this._dragEntireCurve(s):this.selectedItem&&this._dragSelectedItem(s,A))}_handleMouseUp(){this.isDraggingCurve=!1,this.model.computeAllOffsets(),this._renderCurves()}_selectHitItem(s,A){return s&&s.item&&["circle","bezier_in","bezier_out"].includes(s.item.data.type)?(this.selectedItem=s.item,this.dragOffset=A.point.subtract(s.item.position),this._renderCurves(),!0):!1}_checkStartCurveDrag(s,A){if(s.handles.length<2)return!1;const R=new Dt.Path;s.handles.forEach(T=>R.add(T.segment));const Y=R.getNearestPoint(A.point);return Y&&Y.getDistance(A.point)<10?(this.isDraggingCurve=!0,this.lastMousePos=A.point,this.selectedItem=null,R.remove(),!0):(R.remove(),!1)}_addPointToCurve(s,A){const R=this.model.generateId(),Y=this.model.generateId(),T=this.model.generateId();s.handles.push({id:R,segment:{x:A.x,y:A.y},handleIn:{x:-50,y:0},handleOut:{x:50,y:0},inPointId:Y,outPointId:T});const ot=this.model.currentCurveIndex;this.model.computeAllOffsets(),this.selectedItem=null,this._renderCurves(ot)}_dragEntireCurve(s){const A=s.point.x-this.lastMousePos.x,R=s.point.y-this.lastMousePos.y;this.lastMousePos=s.point,this.model.moveActiveCurve(A,R),this._renderCurves()}_dragSelectedItem(s,A){let R;switch(this.selectedItem.data.type){case"circle":R=A.handles.find(Y=>Y.id===this.selectedItem.data.id),R&&(R.segment.x+=s.delta.x,R.segment.y+=s.delta.y);break;case"bezier_in":R=A.handles.find(Y=>Y.inPointId===this.selectedItem.data.id),R.handleIn.x+=s.delta.x,R.handleIn.y+=s.delta.y;break;case"bezier_out":R=A.handles.find(Y=>Y.outPointId===this.selectedItem.data.id),R.handleOut.x+=s.delta.x,R.handleOut.y+=s.delta.y;break}this.model.computeAllOffsets(),this._renderCurves()}_renderCurves(s=this.model.currentCurveIndex){this.view.renderCurves(this.model.curves,this.handlesVisible,this.selectedItem,s,"rgba(0,150,255,0.2)")}isItemOnSelectedCurve(s,A){return!s||!A||!A.handles?!1:A.handles.some(R=>R.id===s.data.id||R.inPointId===s.data.id||R.outPointId===s.data.id)}toggleOffsetVisibility(s,A){this.model.curves[s].offsetsData[A].visible=!this.model.curves[s].offsetsData[A].visible,this._renderCurves()}}class us{constructor(s,A,R,Y){this.model=s,this.toolbarView=A,this.canvasView=R,this.drawController=Y,this._updateSlidersAndCheckboxes(),this.toolbarView.updateCurveList(this.model.curves),this.drawController.handlesVisible=!0,this.toolbarView.updateHandlesToggle(!0),this._bindUIEvents()}_updateSlidersAndCheckboxes(){const s=this.model.getCurrentCurve();s&&s.offsetsData.forEach((A,R)=>{this.toolbarView.updateOffsetValue(R+1,s.offsetsData[R].offset),this.toolbarView.updateOffsetCheckbox(R+1,A.visible)})}_onOffsetSliderChange(s,A){const R=this.model.getCurrentCurve();R&&(R.offsetsData[s-1].offset=A,this.toolbarView.updateOffsetValue(s,A),this.model.computeAllOffsets(),this._render())}_onOffsetToggle(s){const A=this.model.getCurrentCurve();if(!A)return;const R=A.offsetsData[s-1];R&&(R.visible=!R.visible,this._render())}_onRemoveOffset(s){const A=this.model.getCurrentCurve();A&&(A.offsetsData.splice(s-1,1),this.toolbarView.removeOffsetControls(s),this._render())}_updateOffsetCheckboxesFromModel(){const s=this.model.getCurrentCurve();s&&s.offsetsData.forEach((A,R)=>{const Y=!!A.visible;this.toolbarView.updateOffsetCheckbox(R+1,Y)})}_addNewCurve(){const s=document.getElementById("curveName");let A=s?.value?.trim();A===""&&(A=void 0),this.model.createCurve(A);const R=this.model.currentCurveIndex;this.toolbarView.clearOffsetsControls(),this.toolbarView.updateCurveList(this.model.curves),this.toolbarView.updateSelectedCurve(R),this.drawController.handlesVisible=!0,this.toolbarView.updateHandlesToggle(!0),this._render(),s&&(s.value="")}_deleteCurrentCurve(){this.model.deleteCurrentCurve(),this.toolbarView.clearOffsetsControls(),this.toolbarView.updateCurveList(this.model.curves),this.model.curves.length>0&&(this.model.currentCurveIndex>=this.model.curves.length&&(this.model.currentCurveIndex=this.model.curves.length-1),this.toolbarView.updateSelectedCurve(this.model.currentCurveIndex),this._updateSlidersAndCheckboxes()),this._render()}_selectCurve(s){this.model.currentCurveIndex=s,this._updateSlidersAndCheckboxes(),this.toolbarView.renderOffsetsControls(this.model.curves[s]),this._render()}_bindUIEvents(){this._bindCurveManagementButtons(),this._bindMiscButtons(),this._bindImportEvents(),this.toolbarView.bindDynamicOffsetControls((s,A)=>this._onOffsetSliderChange(s,A),s=>this._onOffsetToggle(s),s=>this._onRemoveOffset(s))}_bindCurveManagementButtons(){this.toolbarView.bindAddCurve(()=>this._addNewCurve()),this.toolbarView.bindDeleteCurve(()=>this._deleteCurrentCurve()),this.toolbarView.bindCurveSelect(s=>this._selectCurve(s))}_bindMiscButtons(){this.toolbarView.bindHandlesToggle(()=>{this.drawController.handlesVisible=!this.drawController.handlesVisible,this._render()}),this.toolbarView.bindToggleBackground(()=>{this.drawController.backgroundVisible=!this.drawController.backgroundVisible,this.canvasView.setBackgroundVisibility(this.drawController.backgroundVisible)}),this.toolbarView.bindDeletePoint(()=>{if(this.drawController.selectedItem){const s=this.drawController.selectedItem.data.id;this.model.deleteHandleById(s),this.drawController.selectedItem=null,this._render()}}),this.toolbarView.bindExport(()=>this.canvasView.exportAsImage("mon_dessin.png")),this.toolbarView.bindSave(()=>{let s=this.model.getCurrentCurveJSON();if(!s)return;const A=new Blob([s],{type:"application/json"}),R=document.createElement("a");R.href=URL.createObjectURL(A),R.download=`drawing-${this.model.getCurrentCurve().name}.json`,R.click(),setTimeout(()=>URL.revokeObjectURL(R.href),1e3)}),this.toolbarView.bindImportButton(()=>{this.toolbarView.elements.importFile?.click()}),this.toolbarView.bindAddOffsetBtn(()=>{this.model.addOffsetToCurrentCurve(),this.toolbarView.addOffsetControls(),this._updateSlidersAndCheckboxes(),this._render()})}_bindImportEvents(){this.toolbarView.bindImportFile(s=>{const A=s.target.files[0];if(!A)return;const R=new FileReader;R.onload=Y=>{this._importCurveFromJSON(Y.target.result),s.target.value=""},R.readAsText(A)})}_importCurveFromJSON(s){try{this.model.importCurve(s);const A=this.model.curves.length-1;this.model.currentCurveIndex=A,this.drawController.handlesVisible=!1,this.toolbarView.updateHandlesToggle(!1),this.model.computeAllOffsets(),this._updateSlidersAndCheckboxes(),this._updateOffsetCheckboxesFromModel(),this._render(),this.toolbarView.updateCurveList(this.model.curves),this.toolbarView.updateSelectedCurve(A),this.toolbarView.renderOffsetsControls(this.model.curves[A])}catch(A){console.error("Erreur lors de l'import JSON :",A),alert("Le fichier importé est invalide !")}}_render(){this.canvasView.renderCurves(this.model.curves,this.drawController.handlesVisible,this.drawController.selectedItem,this.model.currentCurveIndex,"rgba(0,150,255,0.2)")}}class ls{constructor(s=1e3,A=2,R=4){this.clipperScale=s,this.sampleStep=A,this.minOffsetPointSpacing=R}computeSingleOffset(s,A){const R=this.sampleCurve(s);if(!R||R.length<2){s.offsetsData.forEach(function(j){j.points=[]});return}const Y=this.scalePoints(R),T=this.executeClipperOffset(Y,A.offset);if(!T.length){A.points=[];return}let ot=this.convertClipperPointsToPaper(T);ot=this.removeClosePoints(ot,this.minOffsetPointSpacing),A.points=ot,this.alignOffsetStart(s,A),this.trimOffsetPoints(s,A)}scalePoints(s){return s.map(function(A){return{X:Math.round(A.x*this.clipperScale),Y:Math.round(A.y*this.clipperScale)}},this)}executeClipperOffset(s,A){const R=new Si.ClipperOffset;R.AddPath(s,Si.JoinType.jtRound,Si.EndType.etOpenRound);const Y=new Si.Paths;return R.Execute(Y,A*this.clipperScale),Y.length?Y.reduce(function(T,ot){return ot.length>T.length?ot:T}):[]}convertClipperPointsToPaper(s){return s.map(function(A){return new Dt.Point(A.X/this.clipperScale,A.Y/this.clipperScale)},this)}trimOffsetPoints(s,A){A.points.reverse();const R=this.findClosestOffsetEnd(s,A);A.points=A.points.slice(0,R+1),this.filterCornerPoints(s,A)}alignOffsetStart(s,A){if(!A.points||!A.points.length||!s.handles||!s.handles.length)return;const R=new Dt.Point(s.handles[0].segment.x,s.handles[0].segment.y);let Y=0,T=1/0;A.points.forEach(function(ot,j){const dt=ot.getDistance(R);dt<T&&(T=dt,Y=j)}),A.points=A.points.slice(Y).concat(A.points.slice(0,Y))}findClosestOffsetEnd(s,A){if(!A.points||!A.points.length||!s.handles||!s.handles.length)return 0;const R=new Dt.Point(s.handles[s.handles.length-1].segment.x,s.handles[s.handles.length-1].segment.y);let Y=0,T=1/0;return A.points.forEach(function(ot,j){const dt=ot.getDistance(R);dt<T&&(T=dt,Y=j)}),Y}filterCornerPoints(s,A){const R=new Dt.Point(s.handles[0].segment.x,s.handles[0].segment.y),Y=new Dt.Point(s.handles[s.handles.length-1].segment.x,s.handles[s.handles.length-1].segment.y);A.points=A.points.filter(function(T){return T.getDistance(R)>A.offset+1&&T.getDistance(Y)>A.offset+1})}removeClosePoints(s,A){const R=[];let Y=null;return s.forEach(function(T){(!Y||T.getDistance(Y)>=A)&&(R.push(T),Y=T)}),R}sampleCurve(s){const A=new Dt.Path({visible:!0});let R;s.handles.forEach(function(T){R=new Dt.Segment(new Dt.Point(T.segment.x,T.segment.y),new Dt.Point(T.handleIn.x,T.handleIn.y),new Dt.Point(T.handleOut.x,T.handleOut.y)),A.add(R)});const Y=[];for(let T=0;T<=A.length;T+=this.sampleStep){const ot=A.getPointAt(T);ot&&Y.push(ot)}return A.remove(),Y}}class hs{constructor(){this.processor=new ls(1e3,2,5),this.defaultStrokeWidth=4,this.offsetSampleStep=5,this.minOffsetPointSpacing=4,this.curves=[],this.currentCurveIndex=-1,this.curveIdCounter=0,this.handleIdCounter=0,this.clipperScale=500,this.defaultOffsets=[],this.createCurve()}createCurve(s=`Courbe ${++this.curveIdCounter}`){const A={name:s,handles:[],strokeWidth:this.defaultStrokeWidth,offsetsData:this.defaultOffsets.map(R=>({offset:R,points:[],visible:!0}))};this.curves.push(A),this.currentCurveIndex=this.curves.length-1}deleteCurrentCurve(){this.currentCurveIndex<0||this.currentCurveIndex>=this.curves.length||(this.curves.splice(this.currentCurveIndex,1),this.curves.length===0?this.currentCurveIndex=-1:this.currentCurveIndex>=this.curves.length&&(this.currentCurveIndex=this.curves.length-1))}deleteHandleById(s){const A=this.getCurrentCurve();if(!A)return;const R=A.handles.findIndex(Y=>Y.id===s);R>=0&&A.handles.splice(R,1),this.computeAllOffsets()}moveActiveCurve(s,A){const R=this.getCurrentCurve();R&&(R.handles.forEach(Y=>{Y.segment.x+=s,Y.segment.y+=A}),this.computeAllOffsets())}addOffsetToCurrentCurve(){const s=this.getCurrentCurve();if(s){if(s.offsetsData.length>0){let R={offset:s.offsetsData[s.offsetsData.length-1].offset+20,points:[],visible:!0};s.offsetsData.push(R)}else s.offsetsData.push({offset:20,points:[],visible:!0});this.computeAllOffsets()}}computeAllOffsets(){this.curves.forEach(s=>{this.computeOffset(s)})}computeOffset(s){s.offsetsData.forEach(A=>this.processor.computeSingleOffset(s,A))}getCurrentCurve(){return this.currentCurveIndex<0||this.currentCurveIndex>=this.curves.length?null:this.curves[this.currentCurveIndex]}generateId(s="id"){return this.handleIdCounter+=1,`${s}-${this.handleIdCounter}`}getCurrentCurveJSON(){const s=this.getCurrentCurve();if(!s)return;const A={name:s.name,strokeWidth:s.strokeWidth,handles:s.handles.map(Y=>({id:Y.id,segment:{x:Y.segment.x,y:Y.segment.y},handleIn:{x:Y.handleIn.x,y:Y.handleIn.y},handleOut:{x:Y.handleOut.x,y:Y.handleOut.y},inPointId:Y.inPointId,outPointId:Y.outPointId})),offsetsData:s.offsetsData.map(Y=>({offset:Y.offset,point:[],visible:!!Y.visible}))};return JSON.stringify(A)}importCurve(s){try{const A=JSON.parse(s),R={name:A.name,strokeWidth:A.strokeWidth||this.defaultStrokeWidth,handles:A.handles.map(Y=>({id:Y.id||this.generateId(),inPointId:Y.inPointId||this.generateId(),outPointId:Y.outPointId||this.generateId(),segment:{x:Y.segment.x,y:Y.segment.y},handleIn:{x:Y.handleIn.x,y:Y.handleIn.y},handleOut:{x:Y.handleOut.x,y:Y.handleOut.y}})),offsetsData:(A.offsetsData||[]).map(Y=>({offset:Y.offset,points:[],visible:!!Y.visible}))};this.curves.push(R),this.currentCurveIndex=this.curves.length-1}catch(A){throw console.error("Erreur import:",A),A}}}const zn=document.getElementById("canvas");Dt.setup(zn);const fs=new as,qn=new hs,Vn=new ss(zn),cs=new os(qn,Vn);new us(qn,fs,Vn,cs);
